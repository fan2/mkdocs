
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="在别处或在路上">
      
      
        <meta name="author" content="Cliff Fan">
      
      
        <link rel="canonical" href="https://duetorun.com/blog/20191029/linux-cmd-find-xargs/">
      
      
        <link rel="prev" href="../linux-cmd-ps-kill/">
      
      
        <link rel="next" href="../linux-cmd-split-merge/">
      
      
      <link rel="icon" href="../../../assets/hold_yourself.jpg">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.15">
    
    
      
        <title>Linux Command - find & xargs - ElseWhere</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-XGW41EGL31"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-XGW41EGL31",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-XGW41EGL31",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#man" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="ElseWhere" class="md-header__button md-logo" aria-label="ElseWhere" data-md-component="logo">
      
  <img src="../../../assets/hold_yourself.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ElseWhere
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Linux Command - find & xargs
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8v2m9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.71-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../about/" class="md-tabs__link">
        
  
    
  
  About

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  Blog

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../link/" class="md-tabs__link">
        
  
    
  
  Link

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="ElseWhere" class="md-nav__button md-logo" aria-label="ElseWhere" data-md-component="logo">
      
  <img src="../../../assets/hold_yourself.jpg" alt="logo">

    </a>
    ElseWhere
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Blog
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      <a href="../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Archive
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2024/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2024
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2023/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2023
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2022/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2022
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2021/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2021
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2020/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2020
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2019/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2019
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2018/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2018
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2017/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2017
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2015/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2015
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2009/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2009
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Categories
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/cs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/arm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    arm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/c/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    c
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/cpp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cpp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/editor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    editor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/elf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    elf
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/excerpt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    excerpt
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/git/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    git
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/linux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    linux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/macos/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    macOS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/markdown/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    markdown
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/material/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    material
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/mkdocs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mkdocs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/nginx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nginx
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/resource/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    resource
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/shell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    shell
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/toolchain/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    toolchain
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/ubuntu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ubuntu
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/vim/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vim
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/webdav/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    webDAV
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/wiki/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    wiki
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/zsh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    zsh
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../link/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Link
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#man" class="md-nav__link">
    <span class="md-ellipsis">
      man
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helpusage" class="md-nav__link">
    <span class="md-ellipsis">
      help/usage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#options" class="md-nav__link">
    <span class="md-ellipsis">
      options
    </span>
  </a>
  
    <nav class="md-nav" aria-label="options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#operators" class="md-nav__link">
    <span class="md-ellipsis">
      OPERATORS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-name" class="md-nav__link">
    <span class="md-ellipsis">
      -name
    </span>
  </a>
  
    <nav class="md-nav" aria-label="-name">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#case-insensitive" class="md-nav__link">
    <span class="md-ellipsis">
      case-insensitive
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inverse" class="md-nav__link">
    <span class="md-ellipsis">
      inverse
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#or" class="md-nav__link">
    <span class="md-ellipsis">
      or
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-type" class="md-nav__link">
    <span class="md-ellipsis">
      -type
    </span>
  </a>
  
    <nav class="md-nav" aria-label="-type">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#or_1" class="md-nav__link">
    <span class="md-ellipsis">
      or
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#其他选项" class="md-nav__link">
    <span class="md-ellipsis">
      其他选项
    </span>
  </a>
  
    <nav class="md-nav" aria-label="其他选项">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-path" class="md-nav__link">
    <span class="md-ellipsis">
      -path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-user-group" class="md-nav__link">
    <span class="md-ellipsis">
      -user/-group
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-size" class="md-nav__link">
    <span class="md-ellipsis">
      -size
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-regex" class="md-nav__link">
    <span class="md-ellipsis">
      -regex
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-depth" class="md-nav__link">
    <span class="md-ellipsis">
      -depth
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-prune" class="md-nav__link">
    <span class="md-ellipsis">
      -prune
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utility" class="md-nav__link">
    <span class="md-ellipsis">
      utility
    </span>
  </a>
  
    <nav class="md-nav" aria-label="utility">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-exec" class="md-nav__link">
    <span class="md-ellipsis">
      -exec
    </span>
  </a>
  
    <nav class="md-nav" aria-label="-exec">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      +
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xargs" class="md-nav__link">
    <span class="md-ellipsis">
      xargs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="xargs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-t" class="md-nav__link">
    <span class="md-ellipsis">
      -t
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-0" class="md-nav__link">
    <span class="md-ellipsis">
      -0
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#demos" class="md-nav__link">
    <span class="md-ellipsis">
      demos
    </span>
  </a>
  
    <nav class="md-nav" aria-label="demos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exclude_dir" class="md-nav__link">
    <span class="md-ellipsis">
      exclude dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete_file" class="md-nav__link">
    <span class="md-ellipsis">
      delete file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete_folder" class="md-nav__link">
    <span class="md-ellipsis">
      delete folder
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#format_files" class="md-nav__link">
    <span class="md-ellipsis">
      format files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#copy_files" class="md-nav__link">
    <span class="md-ellipsis">
      copy files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edit_files" class="md-nav__link">
    <span class="md-ellipsis">
      edit files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dos2unix" class="md-nav__link">
    <span class="md-ellipsis">
      dos2unix
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content md-content--post" data-md-component="content">
    <div class="md-sidebar md-sidebar--post" data-md-component="sidebar" data-md-type="navigation">
      <div class="md-sidebar__scrollwrap">
        <div class="md-sidebar__inner md-post">
          <nav class="md-nav md-nav--primary">
            <div class="md-post__back">
              <div class="md-nav__title md-nav__container">
                <a href="../../" class="md-nav__link">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
                  <span class="md-ellipsis">
                    回到主页
                  </span>
                </a>
              </div>
            </div>
            
              <div class="md-post__authors md-typeset">
                
                  <div class="md-profile md-post__profile">
                    <span class="md-author md-author--long">
                      <img src="https://duetorun.com/assets/carve_yourself.jpg" alt="Cliff Fan">
                    </span>
                    <span class="md-profile__description">
                      <strong>
                        
                          Cliff Fan
                        
                      </strong>
                      <br>
                      Just do IT
                    </span>
                  </div>
                
              </div>
            
            <ul class="md-post__meta md-nav__list">
              <li class="md-nav__item md-nav__item--section">
                <div class="md-post__title">
                  <span class="md-ellipsis">
                    元数据
                  </span>
                </div>
                <nav class="md-nav">
                  <ul class="md-nav__list">
                    <li class="md-nav__item">
                      <div class="md-nav__link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5v-5Z"/></svg>
                        <time datetime="2019-10-29 12:00:00" class="md-ellipsis">2019年10月29日</time>
                      </div>
                    </li>
                    
                    
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 3v15h3V3H9m3 2 4 13 3-1-4-13-3 1M5 5v13h3V5H5M3 19v2h18v-2H3Z"/></svg>
                          <span class="md-ellipsis">
                            分类于
                            
                              <a href="../../category/wiki/">wiki</a>, 
                              <a href="../../category/linux/">linux</a></span>
                        </div>
                      </li>
                    
                    
                      
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10 10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67-.75 1.23L11 13V7h1.5Z"/></svg>
                          <span class="md-ellipsis">
                            
                              需要 17 分钟阅读时间
                            
                          </span>
                        </div>
                      </li>
                    
                    <!-- Add by Cliff.Fan, 29Mar24. -->
                    <li class="md-nav__item">
                      <div class="md-nav__link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19 1-5 5v11l5-4.5V1m2 4v13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6c-1.45-1.1-3.55-1.5-5.5-1.5-1.95 0-4.05.4-5.5 1.5v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1M10 18.41C8.75 18.09 7.5 18 6.5 18c-1.06 0-2.32.19-3.5.5V7.13c.91-.4 2.14-.63 3.5-.63 1.36 0 2.59.23 3.5.63v11.28Z"/></svg>
                        <span class="md-ellipsis" id="busuanzi_container_page_pv">
                          阅读量：<span id="busuanzi_value_page_pv">N/A</span>
                        </span>
                      </div>
                    </li>
                  </ul>
                </nav>
              </li>
            </ul>
          </nav>
          
        </div>
      </div>
    </div>
    <article class="md-content__inner md-typeset">
      
        
  
  

<nav class="md-tags" >
  
    
    
    
      <span class="md-tag">find</span>
    
  
    
    
    
      <span class="md-tag">xargs</span>
    
  
</nav>



  <h1>Linux Command - find & xargs</h1>

<p>linux 下的命令 find 用法总结。</p>
<!-- more -->

<h2 id="man">man<a class="headerlink" href="#man" title="Permanent link">#</a></h2>
<p>以下是各大平台的 find 在线手册：</p>
<ul>
<li>unix/POSIX - <a href="https://pubs.opengroup.org/onlinepubs/9699919799/utilities/find.html">find</a>  </li>
<li>
<p>FreeBSD/Darwin - <a href="https://www.freebsd.org/cgi/man.cgi?query=find">find</a>  </p>
</li>
<li>
<p>linux - <a href="http://man7.org/linux/man-pages/man1/find.1.html">find(1)</a> &amp; <a href="http://man7.org/linux/man-pages/man1/find.1p.html">find(1p)</a>  </p>
</li>
<li>
<p>debian - <a href="https://manpages.debian.org/buster/findutils/find.1.en.html">find(1)</a>  </p>
</li>
<li>
<p>ubuntu - <a href="https://manpages.ubuntu.com/manpages/jammy/en/man1/find.1.html">find(1)</a>  </p>
</li>
</ul>
<p>以下是各大平台对 find 的定义：</p>
<ul>
<li>unix/POSIX：find - find files  </li>
<li>FreeBSD/Darwin：find -- walk a file hierarchy  </li>
<li>linux/debian/ubuntu：find - search for files in a directory hierarchy  </li>
</ul>
<h2 id="helpusage">help/usage<a class="headerlink" href="#helpusage" title="Permanent link">#</a></h2>
<p>执行 <code>man find</code> 可查看 find 命令帮助手册。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># macOS</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>FIND<span class="o">(</span><span class="m">1</span><span class="o">)</span><span class="w">         </span>FreeBSD<span class="w"> </span>General<span class="w"> </span>Commands<span class="w"> </span>Manual<span class="w">            </span>FIND<span class="o">(</span><span class="m">1</span><span class="o">)</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>NAME
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">     </span>find<span class="w"> </span>--<span class="w"> </span>walk<span class="w"> </span>a<span class="w"> </span>file<span class="w"> </span>hierarchy
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>SYNOPSIS
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">     </span>find<span class="w"> </span><span class="o">[</span>-H<span class="w"> </span><span class="p">|</span><span class="w"> </span>-L<span class="w"> </span><span class="p">|</span><span class="w"> </span>-P<span class="o">]</span><span class="w"> </span><span class="o">[</span>-EXdsx<span class="o">]</span><span class="w"> </span><span class="o">[</span>-f<span class="w"> </span>path<span class="o">]</span><span class="w"> </span>path<span class="w"> </span>...<span class="w"> </span><span class="o">[</span>expression<span class="o">]</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">     </span>find<span class="w"> </span><span class="o">[</span>-H<span class="w"> </span><span class="p">|</span><span class="w"> </span>-L<span class="w"> </span><span class="p">|</span><span class="w"> </span>-P<span class="o">]</span><span class="w"> </span><span class="o">[</span>-EXdsx<span class="o">]</span><span class="w"> </span>-f<span class="w"> </span>path<span class="w"> </span><span class="o">[</span>path<span class="w"> </span>...<span class="o">]</span><span class="w"> </span><span class="o">[</span>expression<span class="o">]</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>DESCRIPTION
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">     </span>The<span class="w"> </span>find<span class="w"> </span>utility<span class="w"> </span>recursively<span class="w"> </span>descends<span class="w"> </span>the<span class="w"> </span>directory<span class="w"> </span>tree<span class="w"> </span><span class="k">for</span><span class="w"> </span>each<span class="w"> </span>path
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">     </span>listed,<span class="w"> </span>evaluating<span class="w"> </span>an<span class="w"> </span>expression<span class="w"> </span><span class="o">(</span>composed<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span><span class="s2">&quot;primaries&quot;</span><span class="w"> </span>and
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">     </span><span class="s2">&quot;operands&quot;</span><span class="w"> </span>listed<span class="w"> </span>below<span class="o">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span>terms<span class="w"> </span>of<span class="w"> </span>each<span class="w"> </span>file<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>tree.
</span></code></pre></div>
<p>find 命令的工作方式如下：沿着文件层次结构向下遍历，匹配查找符合条件的文件（夹），执行相应的操作。</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>find path [options] [expression]
</span></code></pre></div>
<blockquote>
<p>其中 path 可以指定多个目录。</p>
</blockquote>
<h2 id="options">options<a class="headerlink" href="#options" title="Permanent link">#</a></h2>
<h3 id="operators">OPERATORS<a class="headerlink" href="#operators" title="Permanent link">#</a></h3>
<p>表达式及操作符。</p>
<blockquote>
<p>The operator <code>-or</code> was implemented as <code>-o</code>, and the operator <code>-and</code> was implemented as <code>-a</code>.</p>
</blockquote>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="w">     </span>The<span class="w"> </span>primaries<span class="w"> </span>may<span class="w"> </span>be<span class="w"> </span>combined<span class="w"> </span>using<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>operators.<span class="w">  </span>The<span class="w"> </span>operators<span class="w"> </span>are<span class="w"> </span>listed<span class="w"> </span><span class="k">in</span><span class="w"> </span>order<span class="w"> </span>of
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">     </span>decreasing<span class="w"> </span>precedence.
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">     </span><span class="o">(</span><span class="w"> </span>expression<span class="w"> </span><span class="o">)</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">             </span>This<span class="w"> </span>evaluates<span class="w"> </span>to<span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="k">if</span><span class="w"> </span>the<span class="w"> </span>parenthesized<span class="w"> </span>expression<span class="w"> </span>evaluates<span class="w"> </span>to<span class="w"> </span>true.
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">     </span>!<span class="w"> </span>expression
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">     </span>-not<span class="w"> </span>expression
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">             </span>This<span class="w"> </span>is<span class="w"> </span>the<span class="w"> </span>unary<span class="w"> </span>NOT<span class="w"> </span>operator.<span class="w">  </span>It<span class="w"> </span>evaluates<span class="w"> </span>to<span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="k">if</span><span class="w"> </span>the<span class="w"> </span>expression<span class="w"> </span>is<span class="w"> </span>false.
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">     </span>-false<span class="w">  </span>Always<span class="w"> </span>false.
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">     </span>-true<span class="w">   </span>Always<span class="w"> </span>true.
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="w">     </span>expression<span class="w"> </span>-and<span class="w"> </span>expression
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="w">     </span>expression<span class="w"> </span>expression
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="w">             </span>The<span class="w"> </span>-and<span class="w"> </span>operator<span class="w"> </span>is<span class="w"> </span>the<span class="w"> </span>logical<span class="w"> </span>AND<span class="w"> </span>operator.<span class="w">  </span>As<span class="w"> </span>it<span class="w"> </span>is<span class="w"> </span>implied<span class="w"> </span>by<span class="w"> </span>the<span class="w"> </span>juxtaposition<span class="w"> </span>of<span class="w"> </span>two
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="w">             </span>expressions<span class="w"> </span>it<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>have<span class="w"> </span>to<span class="w"> </span>be<span class="w"> </span>specified.<span class="w">  </span>The<span class="w"> </span>expression<span class="w"> </span>evaluates<span class="w"> </span>to<span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="k">if</span><span class="w"> </span>both
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="w">             </span>expressions<span class="w"> </span>are<span class="w"> </span>true.<span class="w">  </span>The<span class="w"> </span>second<span class="w"> </span>expression<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>evaluated<span class="w"> </span><span class="k">if</span><span class="w"> </span>the<span class="w"> </span>first<span class="w"> </span>expression<span class="w"> </span>is
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="w">             </span>false.
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a>
</span><span id="__span-2-21"><a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a><span class="w">     </span>expression<span class="w"> </span>-or<span class="w"> </span>expression
</span><span id="__span-2-22"><a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a><span class="w">             </span>The<span class="w"> </span>-or<span class="w"> </span>operator<span class="w"> </span>is<span class="w"> </span>the<span class="w"> </span>logical<span class="w"> </span>OR<span class="w"> </span>operator.<span class="w">  </span>The<span class="w"> </span>expression<span class="w"> </span>evaluates<span class="w"> </span>to<span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="k">if</span><span class="w"> </span>either<span class="w"> </span>the
</span><span id="__span-2-23"><a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a><span class="w">             </span>first<span class="w"> </span>or<span class="w"> </span>the<span class="w"> </span>second<span class="w"> </span>expression<span class="w"> </span>is<span class="w"> </span>true.<span class="w">  </span>The<span class="w"> </span>second<span class="w"> </span>expression<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>evaluated<span class="w"> </span><span class="k">if</span><span class="w"> </span>the<span class="w"> </span>first
</span><span id="__span-2-24"><a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a><span class="w">             </span>expression<span class="w"> </span>is<span class="w"> </span>true.
</span><span id="__span-2-25"><a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a>
</span><span id="__span-2-26"><a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a><span class="w">     </span>All<span class="w"> </span>operands<span class="w"> </span>and<span class="w"> </span>primaries<span class="w"> </span>must<span class="w"> </span>be<span class="w"> </span>separate<span class="w"> </span>arguments<span class="w"> </span>to<span class="w"> </span>find.<span class="w">  </span>Primaries<span class="w"> </span>which<span class="w"> </span>themselves<span class="w"> </span>take<span class="w"> </span>argu-
</span><span id="__span-2-27"><a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a><span class="w">     </span>ments<span class="w"> </span>expect<span class="w"> </span>each<span class="w"> </span>argument<span class="w"> </span>to<span class="w"> </span>be<span class="w"> </span>a<span class="w"> </span>separate<span class="w"> </span>argument<span class="w"> </span>to<span class="w"> </span>find.
</span></code></pre></div>
<h3 id="-name">-name<a class="headerlink" href="#-name" title="Permanent link">#</a></h3>
<p>按照文件名查找文件。</p>
<p><strong>注意</strong>：-name 模糊匹配目录或文件，是基于通配符（globbing/wildcard patterns），而非正则表达式！</p>
<p>以下示例通配查找当前目录下的所有txt文件：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span>*.txt
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>find:<span class="w"> </span>data.txt:<span class="w"> </span>unknown<span class="w"> </span>primary<span class="w"> </span>or<span class="w"> </span>operator
</span></code></pre></div>
<p>根据提示通配符需要转义，或者将 <code>-name</code> 参数用引号包起来：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span><span class="se">\*</span>.txt
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;*.txt&#39;</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.log&quot;</span>
</span></code></pre></div>
<p>以下示例通配查找当前目录下所有名称包含OfflineFile的文件夹及文件。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-iname<span class="w"> </span><span class="s1">&#39;*OfflineFile*&#39;</span>
</span></code></pre></div>
<p>以下示例通配查找当前目录下所有后缀为proto的文件（即protobuf协议文件）。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.proto&quot;</span>
</span></code></pre></div>
<p>在 /usr/include 目录下（递归）查找名称为 wordsize.h 的文件。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>$<span class="w"> </span>find<span class="w"> </span>/usr/include<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span>wordsize.h
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>/usr/include/aarch64-linux-gnu/bits/wordsize.h
</span></code></pre></div>
<p>如果知道这个头文件在旗下一级 target 的 bits 目录下，可以缩小范围通配查找：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>$<span class="w"> </span>find<span class="w"> </span>/usr/include/*/bits<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span>wordsize.h
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>/usr/include/aarch64-linux-gnu/bits/wordsize.h
</span></code></pre></div>
<h4 id="case-insensitive">case-insensitive<a class="headerlink" href="#case-insensitive" title="Permanent link">#</a></h4>
<p><code>-iname</code>：匹配名字时会忽略大小写。</p>
<p>大部分操作系统中，文件名中不区分大小写，<code>file.txt</code> 和 <code>FILE.txt</code> 表示同一个文件；<code>file.txt</code> 和 <code>file.TXT</code> 也表示同一个文件。</p>
<p>因此在执行相关 find 查找时，比如统计C语言程序代码文件，其后缀可能为 <code>*.c</code> 或 <code>*.C</code>。此时，<code>-iname</code> 比 <code>-name</code> 更实用。</p>
<h4 id="inverse">inverse<a class="headerlink" href="#inverse" title="Permanent link">#</a></h4>
<p><code>!</code>（<code>-not</code>）运算符支持反向匹配。</p>
<p>以下示例查找所有非指定后缀的文件：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>!<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;*.txt&#39;</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-not<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;*.txt&#39;</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="c1"># 转义反斜杠貌似可有可无</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span><span class="se">\!</span><span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.c&quot;</span>
</span></code></pre></div>
<p>以下为 find 的 man page 中的两个相关示例：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="w">     </span>find<span class="w"> </span>/<span class="w"> </span><span class="se">\!</span><span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.c&quot;</span><span class="w"> </span>-print
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">             </span>Print<span class="w"> </span>out<span class="w"> </span>a<span class="w"> </span>list<span class="w"> </span>of<span class="w"> </span>all<span class="w"> </span>the<span class="w"> </span>files<span class="w"> </span>whose<span class="w"> </span>names<span class="w"> </span><span class="k">do</span><span class="w"> </span>not<span class="w"> </span>end<span class="w"> </span><span class="k">in</span><span class="w"> </span>.c.
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">     </span>find<span class="w"> </span>/<span class="w"> </span><span class="se">\!</span><span class="w"> </span><span class="se">\(</span><span class="w"> </span>-newer<span class="w"> </span>ttt<span class="w"> </span>-user<span class="w"> </span>wnj<span class="w"> </span><span class="se">\)</span><span class="w"> </span>-print
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">             </span>Print<span class="w"> </span>out<span class="w"> </span>a<span class="w"> </span>list<span class="w"> </span>of<span class="w"> </span>all<span class="w"> </span>the<span class="w"> </span>files<span class="w"> </span>which<span class="w"> </span>are<span class="w"> </span>not<span class="w"> </span>both<span class="w"> </span>newer<span class="w"> </span>than<span class="w"> </span>ttt<span class="w"> </span>and<span class="w"> </span>owned<span class="w"> </span>by<span class="w"> </span><span class="sb">``</span>wnj<span class="s1">&#39;&#39;</span>.
</span></code></pre></div>
<p>以下示例，同时指定符合和不符合的条件：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1"># 查找 *.txt 文件，但是忽略 .txt、.vimrc、.data 等隐藏文件（hidden dot files）。</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.txt&quot;</span><span class="w"> </span>!<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;.*&quot;</span><span class="w"> </span><span class="se">\)</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="c1"># 查找所有的点隐藏文件（hidden dot files），但是忽略 .htaccess 文件。</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;.*&quot;</span><span class="w"> </span>!<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;.htaccess&quot;</span><span class="w"> </span><span class="se">\)</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="c1"># 查找所有非C/C++代码文件（包括头文件和源码文件），以便删除中间产物</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span><span class="se">\(</span><span class="w"> </span>!<span class="w"> </span>-iname<span class="w"> </span><span class="s1">&#39;*.h&#39;</span><span class="w"> </span>!<span class="w"> </span>-iname<span class="w"> </span><span class="s1">&#39;*.hh&#39;</span><span class="w"> </span>!<span class="w"> </span>-iname<span class="w"> </span><span class="s1">&#39;*.hpp&#39;</span><span class="w"> </span>!<span class="w"> </span>-iname<span class="w"> </span><span class="s1">&#39;*.c&#39;</span><span class="w"> </span>!<span class="w"> </span>-iname<span class="w"> </span><span class="s1">&#39;*.cc&#39;</span><span class="w"> </span>!<span class="w"> </span>-iname<span class="w"> </span><span class="s1">&#39;*.cpp&#39;</span><span class="w"> </span><span class="se">\)</span>
</span></code></pre></div>
<h4 id="or">or<a class="headerlink" href="#or" title="Permanent link">#</a></h4>
<p><code>-name</code> 每次只能指定一种文件名通配规则，如果要复合匹配多个规则，可使用逻辑运算符。</p>
<p>如果想同时匹配多个条件，可以采用 AND 条件运算符（<code>-and</code> 或 <code>-a</code>）。</p>
<blockquote>
<p>多个匹配条件没有指定逻辑运算符时，默认就是同时满足（AND）。<br />
一般 -type 和 -name 选项同时出现，就是同时通配满足类型和名称。</p>
</blockquote>
<p>如果想匹配多个条件中的一个，可以采用 OR 条件运算符（<code>-or</code> 或 <code>-o</code>）：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>$<span class="w"> </span>ls
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>new.txt<span class="w"> </span>some.jpg<span class="w"> </span>text.pdf<span class="w"> </span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.txt&quot;</span><span class="w"> </span>-o<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.pdf&quot;</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>./text.pdf
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>./new.txt
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>./hello<span class="w"> </span>world.txt
</span></code></pre></div>
<p>上面的代码会打印出所有后缀为 .txt 和 .pdf 文件。</p>
<p>当带有多个同类条件时，也可通过括号将同类条件（-iname）括起来，方便归拢逻辑和提高阅读体验。</p>
<blockquote>
<p><code>\(</code> 以及 <code>\)</code> 用于将 <code>-name "*.txt" -o -name "*.pdf</code> 视为一个逻辑整体。</p>
</blockquote>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.txt&quot;</span><span class="w"> </span>-o<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.pdf&quot;</span><span class="w"> </span><span class="se">\)</span>
</span></code></pre></div>
<hr />
<p>当把 find 结果传给 -exec 执行或管传给 xargs 执行时，<strong>如果不加括号</strong>，则实际效果看起来只传参了匹配 -o 后面的那一部分！？</p>
<p>以下脚本本意是删除 testDir1 目录下的所有文件夹 __MACOSX 和隐藏文件 .DS_Store，实际只删除了 .DS_Store：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>$<span class="w"> </span>find<span class="w"> </span>testDir1<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;__MACOSX&quot;</span><span class="w"> </span>-o<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;.DS_Store&quot;</span><span class="w"> </span>-exec<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\;</span>
</span></code></pre></div>
<p>按照逻辑结合优先级，以上表达式等效于：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>$<span class="w"> </span>find<span class="w"> </span>testDir1<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;__MACOSX&quot;</span><span class="w"> </span><span class="se">\)</span><span class="w"> </span>-o<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;.DS_Store&quot;</span><span class="w"> </span>-exec<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\;</span><span class="w"> </span><span class="se">\)</span>
</span></code></pre></div>
<h3 id="-type">-type<a class="headerlink" href="#-type" title="Permanent link">#</a></h3>
<p><code>-type</code> 选项支持按照文件类型查找文件。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="w">     </span>-type<span class="w"> </span>t
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="w">             </span>True<span class="w"> </span><span class="k">if</span><span class="w"> </span>the<span class="w"> </span>file<span class="w"> </span>is<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>specified<span class="w"> </span>type.<span class="w">  </span>Possible<span class="w"> </span>file<span class="w"> </span>types<span class="w"> </span>are<span class="w"> </span>as<span class="w"> </span>follows:
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">             </span>b<span class="w">       </span>block<span class="w"> </span>special
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">             </span>c<span class="w">       </span>character<span class="w"> </span>special
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="w">             </span>d<span class="w">       </span>directory
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="w">             </span>f<span class="w">       </span>regular<span class="w"> </span>file
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="w">             </span>l<span class="w">       </span>symbolic<span class="w"> </span>link
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="w">             </span>p<span class="w">       </span>FIFO
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="w">             </span>s<span class="w">       </span>socket
</span></code></pre></div>
<p>当未指定 <code>-type</code> 选项时，默认查找所有文件类型，包括文件夹、文件和软链等。</p>
<p>上面的非名称匹配（-not -name）示例中，第一行默认输出当前目录（.），因为未指定 -type 。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>!<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;*.txt&#39;</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="c1"># 明确查找类型为文件</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>!<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;*.txt&#39;</span>
</span></code></pre></div>
<p>以下示例通配查找当前目录下所有名称以 data 开头的文件。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-iname<span class="w"> </span><span class="s1">&#39;data*&#39;</span>
</span></code></pre></div>
<p>以下示例列举当前文件夹下的子目录：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>d
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="c1"># 过滤掉当前目录dot(&#39;.&#39;)</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span>!<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;.&#39;</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="c1"># 或者</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>$<span class="w"> </span>find<span class="w"> </span>./*<span class="w"> </span>-type<span class="w"> </span>d
</span></code></pre></div>
<p>以下示例精确查找名为 <code>OfflineFile</code> 的文件夹：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;OfflineFile&#39;</span>
</span></code></pre></div>
<p>以下示例精确查找名为 <code>libOfflineFile.a</code> 的文件：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;libOfflineFile.a&#39;</span>
</span></code></pre></div>
<p>以下示例统计 <code>OfflineFile</code> 文件夹下所有可参与编译的源代码文件（Compile Sources）数量：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>$<span class="w"> </span>find<span class="w"> </span>OfflineFile<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.c&quot;</span><span class="w"> </span>-o<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.cpp&quot;</span><span class="w"> </span>-o<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.m&quot;</span><span class="w"> </span>-o<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.mm&quot;</span><span class="w"> </span><span class="se">\)</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="w">     </span><span class="m">273</span>
</span></code></pre></div>
<h4 id="or_1">or<a class="headerlink" href="#or_1" title="Permanent link">#</a></h4>
<p><code>-type</code> 每次只能指定一种类型，如果要复合匹配多种类型，可使用逻辑运算符。</p>
<blockquote>
<p>关于 AND 条件运算符（<code>-and</code> 或 <code>-a</code>）和 OR 条件运算符（<code>-or</code> 或 <code>-o</code>）具体参考 -name 中的阐述，此处不再赘述。</p>
</blockquote>
<p>以下示例查找项目工程中的文件 <code>JceObjectV2.h</code>：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;JceObjectV2.h&#39;</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>./Classes/module/WaterMarkCamera/3rd/WirelessUnifiedProtocol/Serializable/JceObjectV2.h
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>./Classes/extern/Analytics/BuglyOA/BuglyCocoa/BuglyCocoa/JceProtocol/CocoaJce/JceObjectV2.h
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>./Pods/CocoaJCE/Include/JceObjectV2.h
</span></code></pre></div>
<p>以下示例查找项目工程中的软链 <code>JceObjectV2.h</code>：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>l<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;JceObjectV2.h&#39;</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>./Pods/Headers/Public/CocoaJCE/JceObjectV2.h
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>./Pods/Headers/Private/CocoaJCE/JceObjectV2.h
</span></code></pre></div>
<p>当然，也可以用 <code>-o</code> 指定并列的 <code>-type</code> 类型约束：</p>
<blockquote>
<p>通过括号将同类条件（-type）括起来，方便归拢逻辑和提高阅读体验。</p>
</blockquote>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;JceObjectV2.h&#39;</span><span class="w"> </span><span class="se">\(</span><span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-o<span class="w"> </span>-type<span class="w"> </span>l<span class="w"> </span><span class="se">\)</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>./Classes/module/WaterMarkCamera/3rd/WirelessUnifiedProtocol/Serializable/JceObjectV2.h
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>./Classes/extern/Analytics/BuglyOA/BuglyCocoa/BuglyCocoa/JceProtocol/CocoaJce/JceObjectV2.h
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>./Pods/Headers/Public/CocoaJCE/JceObjectV2.h
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>./Pods/Headers/Private/CocoaJCE/JceObjectV2.h
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>./Pods/CocoaJCE/Include/JceObjectV2.h
</span></code></pre></div>
<p>如果 <code>JceObjectV2.h</code> 很明确是头文件（或软链替身），不可能为文件夹的话，也可不指定 <code>-type</code> 选项，查找项目工程中的所有名为 <code>JceObjectV2.h</code> 的文件：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;JceObjectV2.h&#39;</span>
</span></code></pre></div>
<h3 id="其他选项">其他选项<a class="headerlink" href="#其他选项" title="Permanent link">#</a></h3>
<h4 id="-path">-path<a class="headerlink" href="#-path" title="Permanent link">#</a></h4>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="w">     </span>-path<span class="w"> </span>pattern
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="w">             </span>True<span class="w"> </span><span class="k">if</span><span class="w"> </span>the<span class="w"> </span>pathname<span class="w"> </span>being<span class="w"> </span>examined<span class="w"> </span>matches<span class="w"> </span>pattern.<span class="w">  </span>Special<span class="w"> </span>shell<span class="w"> </span>pattern<span class="w"> </span>matching<span class="w"> </span>charac-
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="w">             </span>ters<span class="w"> </span><span class="o">(</span><span class="sb">``</span><span class="o">[</span><span class="s1">&#39;&#39;</span>,<span class="w"> </span><span class="sb">``</span><span class="o">]</span><span class="s1">&#39;&#39;</span>,<span class="w"> </span><span class="sb">``</span>*<span class="s1">&#39;&#39;</span>,<span class="w"> </span>and<span class="w"> </span><span class="sb">``</span>?<span class="s1">&#39;&#39;</span><span class="o">)</span><span class="w"> </span>may<span class="w"> </span>be<span class="w"> </span>used<span class="w"> </span>as<span class="w"> </span>part<span class="w"> </span>of<span class="w"> </span>pattern.<span class="w">  </span>These<span class="w"> </span>characters<span class="w"> </span>may
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="w">             </span>be<span class="w"> </span>matched<span class="w"> </span>explicitly<span class="w"> </span>by<span class="w"> </span>escaping<span class="w"> </span>them<span class="w"> </span>with<span class="w"> </span>a<span class="w"> </span>backslash<span class="w"> </span><span class="o">(</span><span class="sb">``</span><span class="se">\&#39;</span><span class="s1">&#39;).  Slashes (``/&#39;</span><span class="err">&#39;</span><span class="o">)</span><span class="w"> </span>are<span class="w"> </span>treated
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="w">             </span>as<span class="w"> </span>normal<span class="w"> </span>characters<span class="w"> </span>and<span class="w"> </span><span class="k">do</span><span class="w"> </span>not<span class="w"> </span>have<span class="w"> </span>to<span class="w"> </span>be<span class="w"> </span>matched<span class="w"> </span>explicitly.
</span></code></pre></div>
<p>选项 <code>-path</code> 的参数可以使用通配符来匹配文件路径。<br />
<code>-name</code> 总是用给定的文件名进行匹配，<code>-path</code> 则将文件路径作为一个整体进行匹配。例如：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>$<span class="w"> </span>find<span class="w"> </span>/home/users<span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;*/slynux/*&quot;</span>
</span></code></pre></div>
<p>可以匹配出以下路径：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>/home/users/list/slynux.txt
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>/home/users/slynux/eg.css
</span></code></pre></div>
<p><a href="https://stackoverflow.com/questions/13525004/how-to-exclude-this-current-dot-folder-from-find-type-d">shell - How to exclude this / current / dot folder from find "type d" - Stack Overflow</a></p>
<p>当 find -d 要过滤掉当前目录，除了 <code>! -name $targetDir</code> 名称排除，还可以 <code>! -path "$targetDir"</code> 通过路径排除。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="nv">targetDir</span><span class="o">=</span><span class="s2">&quot;dir_path&quot;</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>find<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$targetDir</span><span class="s2">&quot;</span><span class="w"> </span>!<span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$targetDir</span><span class="s2">&quot;</span><span class="w"> </span>-type<span class="w"> </span>d
</span></code></pre></div>
<h4 id="-user-group">-user/-group<a class="headerlink" href="#-user-group" title="Permanent link">#</a></h4>
<p>按照文件属主、用户组来查找文件，查找属于该用户的所有文件。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>$<span class="w"> </span>find<span class="w"> </span>/<span class="w"> </span>-user<span class="w"> </span><span class="nv">$USER_ACCOUNT</span><span class="w"> </span>&gt;<span class="w"> </span><span class="nv">$REPORT_FILE</span>
</span></code></pre></div>
<p>查找 webdav 目录下 user 或 group 不为 <code>_www</code> 的文件。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>$<span class="w"> </span>find<span class="w"> </span>/usr/local/var/webdav<span class="w"> </span>!<span class="w"> </span>-user<span class="w"> </span>_www<span class="w"> </span>-o<span class="w"> </span>!<span class="w"> </span>-group<span class="w"> </span>_www
</span></code></pre></div>
<h4 id="-size">-size<a class="headerlink" href="#-size" title="Permanent link">#</a></h4>
<p>可以按照文件长度来查找过滤文件，默认以块（block）为计量单位。<br />
也可以用字节来计量，表达形式为 Nc、Nk、NM、NG。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="w">     </span>-size<span class="w"> </span>n<span class="o">[</span>ckMGTP<span class="o">]</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="w">             </span>True<span class="w"> </span><span class="k">if</span><span class="w"> </span>the<span class="w"> </span>file<span class="s1">&#39;s size, rounded up, in 512-byte blocks is n.  If n is followed by a c, then</span>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="s1">             the primary is true if the file&#39;</span>s<span class="w"> </span>size<span class="w"> </span>is<span class="w"> </span>n<span class="w"> </span>bytes<span class="w"> </span><span class="o">(</span>characters<span class="o">)</span>.<span class="w">  </span>Similarly<span class="w"> </span><span class="k">if</span><span class="w"> </span>n<span class="w"> </span>is<span class="w"> </span>followed
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="w">             </span>by<span class="w"> </span>a<span class="w"> </span>scale<span class="w"> </span>indicator<span class="w"> </span><span class="k">then</span><span class="w"> </span>the<span class="w"> </span>file<span class="err">&#39;</span>s<span class="w"> </span>size<span class="w"> </span>is<span class="w"> </span>compared<span class="w"> </span>to<span class="w"> </span>n<span class="w"> </span>scaled<span class="w"> </span>as:
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a><span class="w">             </span>k<span class="w">       </span>kilobytes<span class="w"> </span><span class="o">(</span><span class="m">1024</span><span class="w"> </span>bytes<span class="o">)</span>
</span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a><span class="w">             </span>M<span class="w">       </span>megabytes<span class="w"> </span><span class="o">(</span><span class="m">1024</span><span class="w"> </span>kilobytes<span class="o">)</span>
</span><span id="__span-33-8"><a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a><span class="w">             </span>G<span class="w">       </span>gigabytes<span class="w"> </span><span class="o">(</span><span class="m">1024</span><span class="w"> </span>megabytes<span class="o">)</span>
</span><span id="__span-33-9"><a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a><span class="w">             </span>T<span class="w">       </span>terabytes<span class="w"> </span><span class="o">(</span><span class="m">1024</span><span class="w"> </span>gigabytes<span class="o">)</span>
</span><span id="__span-33-10"><a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a><span class="w">             </span>P<span class="w">       </span>petabytes<span class="w"> </span><span class="o">(</span><span class="m">1024</span><span class="w"> </span>terabytes<span class="o">)</span>
</span></code></pre></div>
<p>以下示例在 /home/apache 目录下查找大小恰好为100字节的文件：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>$<span class="w"> </span>find<span class="w"> </span>/home/apache<span class="w"> </span>-size<span class="w"> </span>100c<span class="w"> </span>-print
</span></code></pre></div>
<p>以下示例在当前目录下查找大小超过10块（5120c）的文件：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-size<span class="w"> </span>+10<span class="w"> </span>-print
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="c1"># 字节计量</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-size<span class="w"> </span>+5120c
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="c1"># kilobytes计量</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-size<span class="w"> </span>+5k
</span></code></pre></div>
<p>以下示例在当前目录下查找大小超过1M的文件：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="c1"># 字节计量</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-size<span class="w"> </span>+1048576c<span class="w"> </span>-print
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="c1"># kilobytes计量</span>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-size<span class="w"> </span>+1024k<span class="w"> </span>-print
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="c1"># megabytes计量</span>
</span><span id="__span-36-6"><a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-size<span class="w"> </span>+1M<span class="w"> </span>-print
</span></code></pre></div>
<h4 id="-regex">-regex<a class="headerlink" href="#-regex" title="Permanent link">#</a></h4>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="c1"># macOS</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="w">     </span>-regex<span class="w"> </span>pattern
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="w">             </span>True<span class="w"> </span><span class="k">if</span><span class="w"> </span>the<span class="w"> </span>whole<span class="w"> </span>path<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>file<span class="w"> </span>matches<span class="w"> </span>pattern<span class="w"> </span>using<span class="w"> </span>regular<span class="w"> </span>expression.<span class="w">  </span>To<span class="w"> </span>match<span class="w"> </span>a<span class="w"> </span>file
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="w">             </span>named<span class="w"> </span><span class="sb">``</span>./foo/xyzzy<span class="s1">&#39;&#39;</span>,<span class="w"> </span>you<span class="w"> </span>can<span class="w"> </span>use<span class="w"> </span>the<span class="w"> </span>regular<span class="w"> </span>expression<span class="w"> </span><span class="sb">``</span>.*/<span class="o">[</span>xyz<span class="o">]</span>*<span class="s1">&#39;&#39;</span><span class="w"> </span>or<span class="w"> </span><span class="sb">``</span>.*/foo/.*<span class="s1">&#39;&#39;</span>,<span class="w"> </span>but
</span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a><span class="w">             </span>not<span class="w"> </span><span class="sb">``</span>xyzzy<span class="s1">&#39;&#39;</span><span class="w"> </span>or<span class="w"> </span><span class="sb">``</span>/foo/<span class="s1">&#39;&#39;</span>.
</span><span id="__span-37-6"><a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a><span class="c1"># ubuntu</span>
</span><span id="__span-37-7"><a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a><span class="w">       </span>-regex<span class="w"> </span>pattern
</span><span id="__span-37-8"><a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a><span class="w">              </span>File<span class="w"> </span>name<span class="w"> </span>matches<span class="w"> </span>regular<span class="w"> </span>expression<span class="w"> </span>pattern.<span class="w">  </span>This<span class="w"> </span>is<span class="w"> </span>a<span class="w"> </span>match<span class="w"> </span>on<span class="w"> </span>the<span class="w"> </span>whole<span class="w"> </span>path,<span class="w"> </span>not<span class="w"> </span>a<span class="w">  </span>search.<span class="w">   </span>For
</span><span id="__span-37-9"><a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a><span class="w">              </span>example,<span class="w">  </span>to<span class="w"> </span>match<span class="w"> </span>a<span class="w"> </span>file<span class="w"> </span>named<span class="w"> </span>./fubar3,<span class="w"> </span>you<span class="w"> </span>can<span class="w"> </span>use<span class="w"> </span>the<span class="w"> </span>regular<span class="w"> </span>expression<span class="w"> </span><span class="sb">`</span>.*bar.<span class="s1">&#39; or `.*b.*3&#39;</span>,<span class="w"> </span>but
</span><span id="__span-37-10"><a id="__codelineno-37-10" name="__codelineno-37-10" href="#__codelineno-37-10"></a><span class="w">              </span>not<span class="w"> </span><span class="sb">`</span>f.*r3<span class="s1">&#39;.  The regular expressions understood by find are by default Emacs Regular Expressions (ex‐</span>
</span><span id="__span-37-11"><a id="__codelineno-37-11" name="__codelineno-37-11" href="#__codelineno-37-11"></a><span class="s1">              cept that `.&#39;</span><span class="w"> </span>matches<span class="w"> </span>newline<span class="o">)</span>,<span class="w"> </span>but<span class="w"> </span>this<span class="w"> </span>can<span class="w"> </span>be<span class="w"> </span>changed<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>-regextype<span class="w"> </span>option.
</span></code></pre></div>
<p><a href="https://stackoverflow.com/questions/6844785/how-to-use-regex-with-find-command">linux - How to use regex with find command?</a><br />
<a href="https://linuxhandbook.com/find-with-regex/">Find Command in Linux With Regex [5 Examples]</a><br />
<a href="https://www.baeldung.com/linux/find-command-regex">Linux Find Command With Regular Expressions</a></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="c1"># ls -l /usr/lib/gcc/aarch64-linux-gnu/11 /usr/lib/aarch64-linux-gnu /usr/lib /lib/aarch64-linux-gnu /lib/ | grep -E &quot;libgcc(_s|_eh)?\.&quot;</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="c1"># find /usr/lib/gcc/aarch64-linux-gnu/11 /usr/lib/aarch64-linux-gnu /usr/lib /lib/aarch64-linux-gnu /lib/ -type f -name &quot;libgcc*\.*&quot;</span>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a>$<span class="w"> </span>find<span class="w"> </span>/usr/lib/gcc/aarch64-linux-gnu/11<span class="w"> </span>/usr/lib/aarch64-linux-gnu<span class="w"> </span>/usr/lib<span class="w"> </span>/lib/aarch64-linux-gnu<span class="w"> </span>/lib/<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-regextype<span class="w"> </span>egrep<span class="w"> </span>-iregex<span class="w"> </span><span class="s2">&quot;.*libgcc(_s|_eh)?\..*&quot;</span>
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="c1"># ls -l /usr/lib/gcc/aarch64-linux-gnu/11 /usr/lib/aarch64-linux-gnu /usr/lib /lib/aarch64-linux-gnu /lib/ | grep -E &quot;libc\.&quot;</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>$<span class="w"> </span>find<span class="w"> </span>/usr/lib/gcc/aarch64-linux-gnu/11<span class="w"> </span>/usr/lib/aarch64-linux-gnu<span class="w"> </span>/usr/lib<span class="w"> </span>/lib/aarch64-linux-gnu<span class="w"> </span>/lib/<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;libc\.*&quot;</span>
</span></code></pre></div>
<h4 id="-depth">-depth<a class="headerlink" href="#-depth" title="Permanent link">#</a></h4>
<p>find 命令在使用时会遍历所有的子目录，首先查找当前目录中的文件，然后再在其子目录中查找。</p>
<p>如果只需在当前目录中进行搜索，无须继续进入子目录深度查找，则可通过指定深度选项 <code>-maxdepth</code>/<code>-mindepth</code> 来限制 find 遍历查找的深度。</p>
<ul>
<li>如果只允许 find 在当前目录中查找，深度可以设置为1；  </li>
<li>当需要向下两级时，深度可以设置为2；</li>
<li>其他情况可以依次类推。  </li>
</ul>
<p>通过 <code>-maxdepth</code> 选项可指定最大搜索深度。<br />
以下示例将 find 命令的最大搜索深度限制为1：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-maxdepth<span class="w"> </span><span class="m">1</span><span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;f*&quot;</span><span class="w"> </span>-print
</span></code></pre></div>
<p>该命令列出当前目录下的所有名称以 f 打头的文件（夹）。<br />
<code>-maxdepth 2</code> 则表示最多向下遍历两级子目录。</p>
<p>通过 <code>-mindepth</code> 选项则可用来查找并打印那些距离起始路径一定深度的所有文件。<br />
如果想从第二级目录开始搜索，那么使用 <code>-mindepth 2</code> 可设置最小深度为2。<br />
以下示例打印出深度距离当前目录至少两个子目录的所有文件：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-mindepth<span class="w"> </span><span class="m">2</span><span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;f*&quot;</span><span class="w"> </span>-print
</span></code></pre></div>
<p>查找一级目录和二级目录下的 conf 文件：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>$<span class="w"> </span>find<span class="w"> </span>/<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.conf&quot;</span><span class="w"> </span>-not<span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;/etc/fonts/*&quot;</span><span class="w"> </span>!<span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;*/tmpfiles.d/*&quot;</span><span class="w"> </span>-maxdepth<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">2</span>&gt;/dev/null
</span></code></pre></div>
<p>部分结果如下：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>/etc/deluser.conf
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>/etc/sudo.conf
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a>/etc/fuse.conf
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a>/etc/overlayroot.conf
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a>/etc/host.conf
</span><span id="__span-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a>/etc/adduser.conf
</span><span id="__span-43-7"><a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a>/etc/multipath.conf
</span><span id="__span-43-8"><a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a>/etc/ca-certificates.conf<span class="w"> </span><span class="c1"># line</span>
</span><span id="__span-43-9"><a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a>/etc/sysctl.conf
</span><span id="__span-43-10"><a id="__codelineno-43-10" name="__codelineno-43-10" href="#__codelineno-43-10"></a>/etc/ucf.conf
</span></code></pre></div>
<p>查找三级目录下的 conf 文件：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>$<span class="w"> </span>find<span class="w"> </span>/<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.conf&quot;</span><span class="w"> </span>-not<span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;/etc/fonts/*&quot;</span><span class="w"> </span>!<span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;*/tmpfiles.d/*&quot;</span><span class="w"> </span>-mindepth<span class="w"> </span><span class="m">3</span><span class="w"> </span>-maxdepth<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span>&gt;/dev/null
</span></code></pre></div>
<p>部分结果如下：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>/etc/avahi/avahi-daemon.conf
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>/etc/ldap/ldap.conf
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>/etc/pulse/client.conf
</span><span id="__span-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a>/etc/dhcp/dhclient.conf
</span><span id="__span-45-5"><a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a>/etc/ufw/ufw.conf
</span><span id="__span-45-6"><a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a>/etc/ufw/sysctl.conf
</span><span id="__span-45-7"><a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a>/etc/systemd/user.conf
</span><span id="__span-45-8"><a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a>/etc/systemd/resolved.conf
</span><span id="__span-45-9"><a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a>/etc/systemd/system.conf
</span><span id="__span-45-10"><a id="__codelineno-45-10" name="__codelineno-45-10" href="#__codelineno-45-10"></a>/etc/systemd/sleep.conf
</span><span id="__span-45-11"><a id="__codelineno-45-11" name="__codelineno-45-11" href="#__codelineno-45-11"></a>/etc/systemd/networkd.conf
</span><span id="__span-45-12"><a id="__codelineno-45-12" name="__codelineno-45-12" href="#__codelineno-45-12"></a>/etc/udev/udev.conf
</span><span id="__span-45-13"><a id="__codelineno-45-13" name="__codelineno-45-13" href="#__codelineno-45-13"></a>/etc/PackageKit/Vendor.conf
</span><span id="__span-45-14"><a id="__codelineno-45-14" name="__codelineno-45-14" href="#__codelineno-45-14"></a>/etc/PackageKit/PackageKit.conf
</span><span id="__span-45-15"><a id="__codelineno-45-15" name="__codelineno-45-15" href="#__codelineno-45-15"></a>/etc/lvm/lvm.conf
</span></code></pre></div>
<p>查找限定四级目录下的部分结果：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>/run/NetworkManager/conf.d/netplan.conf
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a>/run/systemd/resolve/resolv.conf
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a>/usr/lib/systemd/resolv.conf
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a>/usr/share/ufw/ufw.conf
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a>/usr/share/adduser/adduser.conf
</span></code></pre></div>
<h4 id="-prune">-prune<a class="headerlink" href="#-prune" title="Permanent link">#</a></h4>
<p>使用 <code>-prune</code> 选项可使 find 命令不在当前指定的目录中查找。<br />
如果同时使用了 <code>-depth</code> 选项，那么 <code>-prune</code> 选项将被find命令忽略。</p>
<p>在搜索目录并执行某些操作时，有时为了提高性能，需要跳过一些子目录。<br />
以下命令打印出不包括在 <code>.git</code> 目录中的所有文件的名称（路径）。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>$<span class="w"> </span>find<span class="w"> </span>workspace/project<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;.git&quot;</span><span class="w"> </span>-prune<span class="w"> </span><span class="se">\)</span><span class="w"> </span>-o<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span><span class="se">\)</span>
</span></code></pre></div>
<p>以下为 find 的 man page 中的两个相关示例：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="w">     </span>find<span class="w"> </span>/usr/src<span class="w"> </span>-name<span class="w"> </span>CVS<span class="w"> </span>-prune<span class="w"> </span>-o<span class="w"> </span>-depth<span class="w"> </span>+6<span class="w"> </span>-print
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="w">             </span>Find<span class="w"> </span>files<span class="w"> </span>and<span class="w"> </span>directories<span class="w"> </span>that<span class="w"> </span>are<span class="w"> </span>at<span class="w"> </span>least<span class="w"> </span>seven<span class="w"> </span>levels<span class="w"> </span>deep<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>working<span class="w"> </span>directory
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a><span class="w">             </span>/usr/src.
</span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a>
</span><span id="__span-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a><span class="w">     </span>find<span class="w"> </span>/usr/src<span class="w"> </span>-name<span class="w"> </span>CVS<span class="w"> </span>-prune<span class="w"> </span>-o<span class="w"> </span>-mindepth<span class="w"> </span><span class="m">7</span><span class="w"> </span>-print
</span><span id="__span-48-6"><a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a><span class="w">             </span>Is<span class="w"> </span>not<span class="w"> </span>equivalent<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>previous<span class="w"> </span>example,<span class="w"> </span>since<span class="w"> </span>-prune<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>evaluated<span class="w"> </span>below<span class="w"> </span>level<span class="w"> </span>seven.
</span></code></pre></div>
<h2 id="utility">utility<a class="headerlink" href="#utility" title="Permanent link">#</a></h2>
<h3 id="-exec">-exec<a class="headerlink" href="#-exec" title="Permanent link">#</a></h3>
<p>find 有一个选项 <code>-exec</code>，支持对每个find查找到的文件执行命令。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="w">     </span>-exec<span class="w"> </span>utility<span class="w"> </span><span class="o">[</span>argument<span class="w"> </span>...<span class="o">]</span><span class="w"> </span><span class="p">;</span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a><span class="w">             </span>True<span class="w"> </span><span class="k">if</span><span class="w"> </span>the<span class="w"> </span>program<span class="w"> </span>named<span class="w"> </span>utility<span class="w"> </span>returns<span class="w"> </span>a<span class="w"> </span>zero<span class="w"> </span>value<span class="w"> </span>as<span class="w"> </span>its<span class="w"> </span><span class="nb">exit</span><span class="w"> </span>status.<span class="w">  </span>Optional
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a><span class="w">             </span>arguments<span class="w"> </span>may<span class="w"> </span>be<span class="w"> </span>passed<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>utility.<span class="w">  </span>The<span class="w"> </span>expression<span class="w"> </span>must<span class="w"> </span>be<span class="w"> </span>terminated<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>semicolon
</span><span id="__span-49-4"><a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a><span class="w">             </span><span class="o">(</span><span class="sb">``</span><span class="p">;</span><span class="s1">&#39;&#39;</span><span class="o">)</span>.<span class="w">  </span>If<span class="w"> </span>you<span class="w"> </span>invoke<span class="w"> </span>find<span class="w"> </span>from<span class="w"> </span>a<span class="w"> </span>shell<span class="w"> </span>you<span class="w"> </span>may<span class="w"> </span>need<span class="w"> </span>to<span class="w"> </span>quote<span class="w"> </span>the<span class="w"> </span>semicolon<span class="w"> </span><span class="k">if</span><span class="w"> </span>the<span class="w"> </span>shell
</span><span id="__span-49-5"><a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a><span class="w">             </span>would<span class="w"> </span>otherwise<span class="w"> </span>treat<span class="w"> </span>it<span class="w"> </span>as<span class="w"> </span>a<span class="w"> </span>control<span class="w"> </span>operator.<span class="w">  </span>If<span class="w"> </span>the<span class="w"> </span>string<span class="w"> </span><span class="sb">``</span><span class="o">{}</span><span class="s1">&#39;&#39;</span><span class="w"> </span>appears<span class="w"> </span>anywhere<span class="w"> </span><span class="k">in</span><span class="w"> </span>the
</span><span id="__span-49-6"><a id="__codelineno-49-6" name="__codelineno-49-6" href="#__codelineno-49-6"></a><span class="w">             </span>utility<span class="w"> </span>name<span class="w"> </span>or<span class="w"> </span>the<span class="w"> </span>arguments<span class="w"> </span>it<span class="w"> </span>is<span class="w"> </span>replaced<span class="w"> </span>by<span class="w"> </span>the<span class="w"> </span>pathname<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>current<span class="w"> </span>file.<span class="w">  </span>Utility
</span><span id="__span-49-7"><a id="__codelineno-49-7" name="__codelineno-49-7" href="#__codelineno-49-7"></a><span class="w">             </span>will<span class="w"> </span>be<span class="w"> </span>executed<span class="w"> </span>from<span class="w"> </span>the<span class="w"> </span>directory<span class="w"> </span>from<span class="w"> </span>which<span class="w"> </span>find<span class="w"> </span>was<span class="w"> </span>executed.<span class="w">  </span>Utility<span class="w"> </span>and<span class="w"> </span>arguments<span class="w"> </span>are
</span><span id="__span-49-8"><a id="__codelineno-49-8" name="__codelineno-49-8" href="#__codelineno-49-8"></a><span class="w">             </span>not<span class="w"> </span>subject<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>further<span class="w"> </span>expansion<span class="w"> </span>of<span class="w"> </span>shell<span class="w"> </span>patterns<span class="w"> </span>and<span class="w"> </span>constructs.
</span><span id="__span-49-9"><a id="__codelineno-49-9" name="__codelineno-49-9" href="#__codelineno-49-9"></a>
</span><span id="__span-49-10"><a id="__codelineno-49-10" name="__codelineno-49-10" href="#__codelineno-49-10"></a><span class="w">     </span>-exec<span class="w"> </span>utility<span class="w"> </span><span class="o">[</span>argument<span class="w"> </span>...<span class="o">]</span><span class="w"> </span><span class="o">{}</span><span class="w"> </span>+
</span><span id="__span-49-11"><a id="__codelineno-49-11" name="__codelineno-49-11" href="#__codelineno-49-11"></a><span class="w">             </span>Same<span class="w"> </span>as<span class="w"> </span>-exec,<span class="w"> </span>except<span class="w"> </span>that<span class="w"> </span><span class="sb">``</span><span class="o">{}</span><span class="s1">&#39;&#39;</span><span class="w"> </span>is<span class="w"> </span>replaced<span class="w"> </span>with<span class="w"> </span>as<span class="w"> </span>many<span class="w"> </span>pathnames<span class="w"> </span>as<span class="w"> </span>possible<span class="w"> </span><span class="k">for</span><span class="w"> </span>each
</span><span id="__span-49-12"><a id="__codelineno-49-12" name="__codelineno-49-12" href="#__codelineno-49-12"></a><span class="w">             </span>invocation<span class="w"> </span>of<span class="w"> </span>utility.<span class="w">  </span>This<span class="w"> </span>behaviour<span class="w"> </span>is<span class="w"> </span>similar<span class="w"> </span>to<span class="w"> </span>that<span class="w"> </span>of<span class="w"> </span>xargs<span class="o">(</span><span class="m">1</span><span class="o">)</span>.
</span></code></pre></div>
<blockquote>
<p><code>{}</code> 表示一个匹配，对于任何匹配的文件名，<code>{}</code> 均会被该文件名所替换。</p>
</blockquote>
<p>以下将 find 结果执行 <code>echo</code> 打印：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-exec<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\;</span>
</span></code></pre></div>
<p>结束分号（<code>;</code>）如果不加反斜杠转义的话，将会报错：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-exec<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="p">;</span>
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a>find:<span class="w"> </span>-exec:<span class="w"> </span>no<span class="w"> </span>terminating<span class="w"> </span><span class="s2">&quot;;&quot;</span><span class="w"> </span>or<span class="w"> </span><span class="s2">&quot;+&quot;</span>
</span></code></pre></div>
<p>为什么分号（<code>;</code>）需要转义呢？因为 Bash Shell 中使用空格或分号（<strong><code>;</code></strong>）连接无相关性的连续命令，即分号本身是一个 control operator。  </p>
<p>查找当前目录中的所有名为 <code>DerivedData</code> 的文件夹，并执行 <code>du -hs</code> 统计输出各个文件夹的磁盘占用大小。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span>-name<span class="w"> </span>DerivedData<span class="w"> </span>-exec<span class="w"> </span>du<span class="w"> </span>-hs<span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\;</span>
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a>385M<span class="w">    </span>./Classes/base/WXBaseUtil/DerivedData
</span><span id="__span-52-3"><a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a><span class="w"> </span>22M<span class="w">    </span>./Frameworks/WX/PublicProtocolFiles/DerivedData
</span><span id="__span-52-4"><a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a><span class="w"> </span>17G<span class="w">    </span>./DerivedData
</span></code></pre></div>
<p>排除 <code>./ten/mars</code> 目录：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-name<span class="w"> </span>./ten/mars<span class="w"> </span>-prune<span class="w"> </span><span class="se">\)</span><span class="w"> </span>-o<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span>-name<span class="w"> </span>DerivedData<span class="w"> </span><span class="se">\)</span><span class="w"> </span>-exec<span class="w"> </span>du<span class="w"> </span>-hs<span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\;</span>
</span></code></pre></div>
<p>以下示例查找 <code>OfflineFile</code> 目录下所有的 cpp 文件，并将查找到的文件名存储到 <code>all_cpp_files.txt</code> 中。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a>$<span class="w"> </span>find<span class="w"> </span>OfflineFile<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.cpp&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>all_cpp_files.txt
</span></code></pre></div>
<p>这里使用 <code>&gt;</code> 操作符将来自 find 的数据（CPP代码）重定向到 all_cpp_codes.cpp 文件。<br />
没有使用 <code>&gt;&gt;</code>（追加）是因为 find 命令的全部输出就只有一个数据流（stdin），而只有当多个数据流被追加到单个文件中时才有必要使用 <code>&gt;&gt;</code>。</p>
<p>若要将查找到的所有cpp文件拼接写入一个文件 <code>all_cpp_codes.cpp</code>，则可借助 <code>-exec cat</code> 打开查看文件内容并重定向实现拼接：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a>$<span class="w"> </span>find<span class="w"> </span>OfflineFile<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.cpp&quot;</span><span class="w"> </span>-exec<span class="w"> </span>cat<span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\;</span><span class="w"> </span>&gt;<span class="w"> </span>all_cpp_codes.cpp
</span></code></pre></div>
<p>下面对查找到的所有文件名为 <code>JceObjectV2.h</code> 的文件（包括软链替身），进一步执行 <code>ls -F</code> 列举打印各文件属性，以便区分哪些是文件哪些是软链：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;JceObjectV2.h&#39;</span><span class="w"> </span><span class="se">\(</span><span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-o<span class="w"> </span>-type<span class="w"> </span>l<span class="w"> </span><span class="se">\)</span><span class="w"> </span>-exec<span class="w"> </span>ls<span class="w"> </span>-F<span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\;</span>
</span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a>./Classes/extern/Analytics/BuglyOA/BuglyCocoa/BuglyCocoa/JceProtocol/CocoaJce/JceObjectV2.h*
</span><span id="__span-56-3"><a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a>./Classes/module/WaterMarkCamera/3rd/WirelessUnifiedProtocol/Serializable/JceObjectV2.h*
</span><span id="__span-56-4"><a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a>./Pods/CocoaJCE/Include/JceObjectV2.h*
</span><span id="__span-56-5"><a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a>./Pods/Headers/Private/CocoaJCE/JceObjectV2.h@
</span><span id="__span-56-6"><a id="__codelineno-56-6" name="__codelineno-56-6" href="#__codelineno-56-6"></a>./Pods/Headers/Public/CocoaJCE/JceObjectV2.h@
</span></code></pre></div>
<h4 id="_1">+<a class="headerlink" href="#_1" title="Permanent link">#</a></h4>
<p>有时候并不希望对每个文件都执行一次命令，而是希望使用<strong>文件列表</strong>作为命令参数，这样就可以少运行几次命令了。<br />
此种场景下，可以在 exec 中使用 <code>+</code> 来代替 <code>;</code> 达到预期效果。</p>
<p>以下man page中的示例删除 <code>/usr/ports/packages</code> 目录下所有的软链（源文件）：</p>
<blockquote>
<p><code>-L</code> 替代旧的 <code>-follow</code>。</p>
</blockquote>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="c1"># Delete all broken symbolic links in /usr/ports/packages.</span>
</span><span id="__span-57-2"><a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a>$<span class="w"> </span>find<span class="w"> </span>-L<span class="w"> </span>/usr/ports/packages<span class="w"> </span>-type<span class="w"> </span>l<span class="w"> </span>-exec<span class="w"> </span>rm<span class="w"> </span>--<span class="w"> </span><span class="o">{}</span><span class="w"> </span>+
</span></code></pre></div>
<p>以下示例中，查找当前目录下大小超过1M的文件，将结果汇聚为列表一次性传递给 <code>du -csh</code> 查看所占磁盘容量，进而管传给 sort 降序排列。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-size<span class="w"> </span>+1M<span class="w"> </span>-exec<span class="w"> </span>du<span class="w"> </span>-csh<span class="w"> </span>--<span class="w"> </span><span class="o">{}</span><span class="w"> </span>+<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-rh
</span></code></pre></div>
<p>以下示例中，<code>-exec utility [argument ...] ;</code> 结果正确，但是报错 No such file or directory：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a>$<span class="w"> </span>find<span class="w"> </span>testDir1<span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;__MACOSX&quot;</span><span class="w"> </span>-exec<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\;</span>
</span></code></pre></div>
<p>改为 <code>-exec utility [argument ...] {} +</code> 格式，则运行正常，不再报错：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a>$<span class="w"> </span>find<span class="w"> </span>testDir1<span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;__MACOSX&quot;</span><span class="w"> </span>-exec<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>--<span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\+</span>
</span></code></pre></div>
<h3 id="xargs">xargs<a class="headerlink" href="#xargs" title="Permanent link">#</a></h3>
<p>xargs 和 find 算是一对好基友，两者结合使用可以让任务变得更轻松。</p>
<p>以下是各大平台的 xargs 在线手册：</p>
<ul>
<li>unix/POSIX - <a href="https://pubs.opengroup.org/onlinepubs/9699919799/utilities/xargs.html">xargs</a>  </li>
<li>FreeBSD/Darwin - <a href="https://www.freebsd.org/cgi/man.cgi?query=xargs">xargs</a>  </li>
<li>linux - <a href="http://man7.org/linux/man-pages/man1/xargs.1.html">xargs(1)</a>  </li>
<li>debian - <a href="https://manpages.debian.org/buster/findutils/xargs.1.en.html">xargs(1)</a>  </li>
<li>ubuntu - <a href="https://manpages.ubuntu.com/manpages/jammy/en/man1/xargs.1.html">xargs(1)</a>  </li>
</ul>
<p>以下是各大平台对 xargs 的定义：</p>
<ul>
<li>unix/POSIX：xargs - construct argument lists and invoke utility  </li>
<li>FreeBSD/Darwin：xargs -- construct argument list(s) and execute utility  </li>
<li>linux/debian/ubuntu：xargs - build and execute command lines from standard input  </li>
</ul>
<h4 id="usage">usage<a class="headerlink" href="#usage" title="Permanent link">#</a></h4>
<p><code>find -exec utility [argument ...] {} +</code> 可以改为基于 <code>find | xargs</code> 的等效实现。  </p>
<p>上述查找当前目录中的所有名为 <code>DerivedData</code> 的文件夹并执行 <code>du -hs</code> 输出大小的示例，也可改为基于 xargs 的等效实现。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span>-name<span class="w"> </span>DerivedData<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>du<span class="w"> </span>-hs
</span></code></pre></div>
<p>上面查找拼接 all_cpp_codes 示例，也可借助 ls-grep 及 xargs 等效实现：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="c1"># 需要先 cd 到 OfflineFile 目录</span>
</span><span id="__span-62-2"><a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a><span class="c1"># cat 找到的所有 cpp 文件，都重定向到 all 文件，相当于拼接</span>
</span><span id="__span-62-3"><a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a>$<span class="w"> </span>ls<span class="w"> </span>-R<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s1">&#39;.*\.cpp$&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>cat<span class="w"> </span>&gt;<span class="w"> </span>all_cpp_codes.cpp
</span><span id="__span-62-4"><a id="__codelineno-62-4" name="__codelineno-62-4" href="#__codelineno-62-4"></a><span class="c1"># or</span>
</span><span id="__span-62-5"><a id="__codelineno-62-5" name="__codelineno-62-5" href="#__codelineno-62-5"></a>$<span class="w"> </span>find<span class="w"> </span>OfflineFile<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.cpp&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>cat<span class="w"> </span>&gt;<span class="w"> </span>all_cpp_codes.cpp
</span></code></pre></div>
<p>上面查找文件 <code>JceObjectV2.h</code> 并执行 <code>ls -F</code> 列举文件类型的 xargs 等效实现如下：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;JceObjectV2.h&#39;</span><span class="w"> </span><span class="se">\(</span><span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-o<span class="w"> </span>-type<span class="w"> </span>l<span class="w"> </span><span class="se">\)</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>ls<span class="w"> </span>-F
</span></code></pre></div>
<p>上面查找当前目录下大小超过1M的文件，并将文件列表管传 <code>du -csh</code> 查看所占磁盘容量，进而管传给 sort 降序排列，改为基于 xargs 的等效实现如下：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="c1"># 注意：如果文件路径中子目录存在空格，例如 Visual Studio，则会报错！</span>
</span><span id="__span-64-2"><a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-size<span class="w"> </span>+1M<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>du<span class="w"> </span>-csh<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-rh
</span></code></pre></div>
<p>上面统计过 <code>OfflineFile</code> 文件夹下所有参与编译的文件（Compile Sources）数量。<br />
进一步思考，如何统计该子工程目录下所有参与编译的代码文件的代码行数呢？<br />
借助 <code>xargs</code> 对每个文件执行 <code>wc -l</code> 行数统计即可。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a>$<span class="w"> </span>find<span class="w"> </span>OfflineFile<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.c&quot;</span><span class="w"> </span>-o<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.cpp&quot;</span><span class="w"> </span>-o<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.m&quot;</span><span class="w"> </span>-o<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.mm&quot;</span><span class="w"> </span><span class="se">\)</span><span class="w"> </span>-print0<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-0<span class="w"> </span>wc<span class="w"> </span>-l
</span><span id="__span-65-2"><a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a>
</span><span id="__span-65-3"><a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a><span class="w">   </span><span class="m">98021</span><span class="w"> </span>total
</span></code></pre></div>
<p>当然，以上统计代码行数，包括了注释和空行部分，更专业的统计工具参考 <a href="https://dwheeler.com/sloccount/">SLOCCount</a> 和 <a href="https://github.com/AlDanial/cloc/">cloc</a>。</p>
<h4 id="-t">-t<a class="headerlink" href="#-t" title="Permanent link">#</a></h4>
<p>xargs 的 <code>-t</code> 选项允许每次执行 xargs 后面的命令之前，先在 stderr 上打印出扩展开的真实命令。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;xcuserdata&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-t<span class="w"> </span>rm<span class="w"> </span>-rf
</span><span id="__span-66-2"><a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a>rm<span class="w"> </span>-rf<span class="w"> </span>./EmptyApplication.xcodeproj/xcuserdata<span class="w"> </span>./EmptyApplication.xcodeproj/project.xcworkspace/xcuserdata
</span><span id="__span-66-3"><a id="__codelineno-66-3" name="__codelineno-66-3" href="#__codelineno-66-3"></a>
</span><span id="__span-66-4"><a id="__codelineno-66-4" name="__codelineno-66-4" href="#__codelineno-66-4"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.txt&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-t<span class="w"> </span>ls<span class="w"> </span>-1lhFA
</span><span id="__span-66-5"><a id="__codelineno-66-5" name="__codelineno-66-5" href="#__codelineno-66-5"></a>ls<span class="w"> </span>-1lhFA<span class="w"> </span>./detail2.txt<span class="w"> </span>./detail.txt<span class="w"> </span>./data0.txt<span class="w"> </span>./data1.txt<span class="w"> </span>./data3.txt<span class="w"> </span>./data2.txt<span class="w"> </span>./data6.txt<span class="w"> </span>./data.txt
</span><span id="__span-66-6"><a id="__codelineno-66-6" name="__codelineno-66-6" href="#__codelineno-66-6"></a>...
</span></code></pre></div>
<p>以上 -t 调试输出，也验证了 xargs 同 <code>find -exec utility [argument ...] {} +</code> 的等效性。</p>
<h4 id="-0">-0<a class="headerlink" href="#-0" title="Permanent link">#</a></h4>
<p>xargs 默认是以空白字元作为分割符，如果有一些档名或者是其他意义的名词内含有空白字元的时候，xargs 可能会误判分割导致参数错误。</p>
<blockquote>
<p>linux 下支持 <code>-d delim</code> 选项，macOS Shell 不支持。</p>
</blockquote>
<p>我们没法预测分隔 find 命令输出结果的定界符究竟是什么（<code>\n</code> 或者空格）。<br />
很多文件名中都可能会包含空格符（' '），因此 xargs 很可能会误认为它们是定界符。</p>
<p>当前目录下有3个文件，其中 <code>hello world.txt</code> 文件名包含空格：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a>$<span class="w"> </span>ls<span class="w"> </span>-1
</span><span id="__span-67-2"><a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a>hello
</span><span id="__span-67-3"><a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a>hello<span class="w"> </span>world.txt
</span><span id="__span-67-4"><a id="__codelineno-67-4" name="__codelineno-67-4" href="#__codelineno-67-4"></a>world.TXT
</span><span id="__span-67-5"><a id="__codelineno-67-5" name="__codelineno-67-5" href="#__codelineno-67-5"></a>
</span><span id="__span-67-6"><a id="__codelineno-67-6" name="__codelineno-67-6" href="#__codelineno-67-6"></a>$<span class="w"> </span>tree<span class="w"> </span>-L<span class="w"> </span><span class="m">1</span>
</span><span id="__span-67-7"><a id="__codelineno-67-7" name="__codelineno-67-7" href="#__codelineno-67-7"></a>.
</span><span id="__span-67-8"><a id="__codelineno-67-8" name="__codelineno-67-8" href="#__codelineno-67-8"></a>├──<span class="w"> </span>hello
</span><span id="__span-67-9"><a id="__codelineno-67-9" name="__codelineno-67-9" href="#__codelineno-67-9"></a>├──<span class="w"> </span>hello<span class="se">\ </span>world.txt
</span><span id="__span-67-10"><a id="__codelineno-67-10" name="__codelineno-67-10" href="#__codelineno-67-10"></a>└──<span class="w"> </span>world.TXT
</span></code></pre></div>
<p>将 ls 结果重定向给 xargs 进行 echo 回显，指定 <code>-n 1</code> 每次取1个参数：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a>$<span class="w"> </span>ls<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-n<span class="w"> </span><span class="m">1</span>
</span><span id="__span-68-2"><a id="__codelineno-68-2" name="__codelineno-68-2" href="#__codelineno-68-2"></a>hello
</span><span id="__span-68-3"><a id="__codelineno-68-3" name="__codelineno-68-3" href="#__codelineno-68-3"></a>hello
</span><span id="__span-68-4"><a id="__codelineno-68-4" name="__codelineno-68-4" href="#__codelineno-68-4"></a>world.txt
</span><span id="__span-68-5"><a id="__codelineno-68-5" name="__codelineno-68-5" href="#__codelineno-68-5"></a>world.TXT
</span></code></pre></div>
<p>第2个文件名 <code>hello world.txt</code> 包含空格，被空格错误地分割为两个文件参数。<br />
为 xargs 添加 <code>-0</code> 参数，指定 NUL 字符（<code>\0</code>）作为分隔符，则输出符合预期。  </p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-69-1"><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a>$<span class="w"> </span>ls<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-0<span class="w"> </span>-n<span class="w"> </span><span class="m">1</span>
</span><span id="__span-69-2"><a id="__codelineno-69-2" name="__codelineno-69-2" href="#__codelineno-69-2"></a>hello
</span><span id="__span-69-3"><a id="__codelineno-69-3" name="__codelineno-69-3" href="#__codelineno-69-3"></a>hello<span class="w"> </span>world.txt
</span><span id="__span-69-4"><a id="__codelineno-69-4" name="__codelineno-69-4" href="#__codelineno-69-4"></a>world.TXT
</span></code></pre></div>
<p>接下来我们结合一个具体的例子，来分析一下 <code>-0</code> 选项的作用。<br />
假设testDir目录结构如下，其中部分子目名称中带有空格：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-70-1"><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a>$<span class="w"> </span>tree<span class="w"> </span>-a
</span><span id="__span-70-2"><a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a>.
</span><span id="__span-70-3"><a id="__codelineno-70-3" name="__codelineno-70-3" href="#__codelineno-70-3"></a>├──<span class="w"> </span>testDir1
</span><span id="__span-70-4"><a id="__codelineno-70-4" name="__codelineno-70-4" href="#__codelineno-70-4"></a>├──<span class="w"> </span>testDir2
</span><span id="__span-70-5"><a id="__codelineno-70-5" name="__codelineno-70-5" href="#__codelineno-70-5"></a>│<span class="w">   </span>├──<span class="w"> </span>testDir<span class="w"> </span><span class="m">21</span>
</span><span id="__span-70-6"><a id="__codelineno-70-6" name="__codelineno-70-6" href="#__codelineno-70-6"></a>│<span class="w">   </span>│<span class="w">   </span>├──<span class="w"> </span>testDir211
</span><span id="__span-70-7"><a id="__codelineno-70-7" name="__codelineno-70-7" href="#__codelineno-70-7"></a>│<span class="w">   </span>│<span class="w">   </span>│<span class="w">   </span>└──<span class="w"> </span>.DS_Store
</span><span id="__span-70-8"><a id="__codelineno-70-8" name="__codelineno-70-8" href="#__codelineno-70-8"></a>│<span class="w">   </span>│<span class="w">   </span>├──<span class="w"> </span>testDir212
</span><span id="__span-70-9"><a id="__codelineno-70-9" name="__codelineno-70-9" href="#__codelineno-70-9"></a>│<span class="w">   </span>│<span class="w">   </span>│<span class="w">   </span>└──<span class="w"> </span>__MACOSX
</span><span id="__span-70-10"><a id="__codelineno-70-10" name="__codelineno-70-10" href="#__codelineno-70-10"></a>│<span class="w">   </span>│<span class="w">   </span>└──<span class="w"> </span>testDir213
</span><span id="__span-70-11"><a id="__codelineno-70-11" name="__codelineno-70-11" href="#__codelineno-70-11"></a>│<span class="w">   </span>└──<span class="w"> </span>testDir23
</span><span id="__span-70-12"><a id="__codelineno-70-12" name="__codelineno-70-12" href="#__codelineno-70-12"></a>│<span class="w">       </span>├──<span class="w"> </span>hello<span class="w"> </span>world.txt
</span><span id="__span-70-13"><a id="__codelineno-70-13" name="__codelineno-70-13" href="#__codelineno-70-13"></a>│<span class="w">       </span>└──<span class="w"> </span>test.txt
</span><span id="__span-70-14"><a id="__codelineno-70-14" name="__codelineno-70-14" href="#__codelineno-70-14"></a>└──<span class="w"> </span>testDir3
</span><span id="__span-70-15"><a id="__codelineno-70-15" name="__codelineno-70-15" href="#__codelineno-70-15"></a><span class="w">    </span>├──<span class="w"> </span>testDir<span class="w"> </span><span class="m">31</span>
</span><span id="__span-70-16"><a id="__codelineno-70-16" name="__codelineno-70-16" href="#__codelineno-70-16"></a><span class="w">    </span>│<span class="w">   </span>└──<span class="w"> </span>.DS_Store
</span><span id="__span-70-17"><a id="__codelineno-70-17" name="__codelineno-70-17" href="#__codelineno-70-17"></a><span class="w">    </span>├──<span class="w"> </span>testDir<span class="w"> </span><span class="m">32</span>
</span><span id="__span-70-18"><a id="__codelineno-70-18" name="__codelineno-70-18" href="#__codelineno-70-18"></a><span class="w">    </span>│<span class="w">   </span>├──<span class="w"> </span>testDir321
</span><span id="__span-70-19"><a id="__codelineno-70-19" name="__codelineno-70-19" href="#__codelineno-70-19"></a><span class="w">    </span>│<span class="w">   </span>│<span class="w">   </span>└──<span class="w"> </span>__MACOSX
</span><span id="__span-70-20"><a id="__codelineno-70-20" name="__codelineno-70-20" href="#__codelineno-70-20"></a><span class="w">    </span>│<span class="w">   </span>│<span class="w">   </span>└──<span class="w"> </span>.DS_Store
</span><span id="__span-70-21"><a id="__codelineno-70-21" name="__codelineno-70-21" href="#__codelineno-70-21"></a><span class="w">    </span>│<span class="w">   </span>└──<span class="w"> </span>testDir323
</span><span id="__span-70-22"><a id="__codelineno-70-22" name="__codelineno-70-22" href="#__codelineno-70-22"></a><span class="w">    </span>│<span class="w">       </span>├──<span class="w"> </span>testDir3231
</span><span id="__span-70-23"><a id="__codelineno-70-23" name="__codelineno-70-23" href="#__codelineno-70-23"></a><span class="w">    </span>│<span class="w">       </span>└──<span class="w"> </span>testDir3232
</span><span id="__span-70-24"><a id="__codelineno-70-24" name="__codelineno-70-24" href="#__codelineno-70-24"></a><span class="w">    </span>└──<span class="w"> </span>testDir33
</span></code></pre></div>
<p>尝试执行 find | xargs，空格被截断并报错 No such file or directory：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-71-1"><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;.DS_Store&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-t<span class="w"> </span>ls<span class="w"> </span>-1
</span><span id="__span-71-2"><a id="__codelineno-71-2" name="__codelineno-71-2" href="#__codelineno-71-2"></a>ls<span class="w"> </span>-1<span class="w"> </span>./testDir3/testDir<span class="w"> </span><span class="m">32</span>/testDir322/.DS_Store<span class="w"> </span>./testDir3/testDir<span class="w"> </span><span class="m">31</span>/.DS_Store<span class="w"> </span>./testDir2/testDir<span class="w"> </span><span class="m">21</span>/testDir211/.DS_Store
</span><span id="__span-71-3"><a id="__codelineno-71-3" name="__codelineno-71-3" href="#__codelineno-71-3"></a>ls:<span class="w"> </span>./testDir2/testDir:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
</span><span id="__span-71-4"><a id="__codelineno-71-4" name="__codelineno-71-4" href="#__codelineno-71-4"></a>ls:<span class="w"> </span>./testDir3/testDir:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
</span><span id="__span-71-5"><a id="__codelineno-71-5" name="__codelineno-71-5" href="#__codelineno-71-5"></a>ls:<span class="w"> </span>./testDir3/testDir:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
</span><span id="__span-71-6"><a id="__codelineno-71-6" name="__codelineno-71-6" href="#__codelineno-71-6"></a>ls:<span class="w"> </span><span class="m">21</span>/testDir211/.DS_Store:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
</span><span id="__span-71-7"><a id="__codelineno-71-7" name="__codelineno-71-7" href="#__codelineno-71-7"></a>ls:<span class="w"> </span><span class="m">31</span>/.DS_Store:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
</span><span id="__span-71-8"><a id="__codelineno-71-8" name="__codelineno-71-8" href="#__codelineno-71-8"></a>ls:<span class="w"> </span><span class="m">32</span>/testDir322/.DS_Store:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
</span></code></pre></div>
<p>从 xargs -t 的调试输出看，ls 后面的参数中空格没有转义，导致被错误切割成了多个参数。</p>
<p>find 命令默认对匹配结果执行打印操作（<code>-print</code>），以换行符 <code>\n</code> 作为分隔符对输出的结果行（条目）进行分隔。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-72-1"><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;.DS_Store&quot;</span>
</span><span id="__span-72-2"><a id="__codelineno-72-2" name="__codelineno-72-2" href="#__codelineno-72-2"></a>./testDir3/testDir<span class="w"> </span><span class="m">32</span>/testDir322/.DS_Store
</span><span id="__span-72-3"><a id="__codelineno-72-3" name="__codelineno-72-3" href="#__codelineno-72-3"></a>./testDir3/testDir<span class="w"> </span><span class="m">31</span>/.DS_Store
</span><span id="__span-72-4"><a id="__codelineno-72-4" name="__codelineno-72-4" href="#__codelineno-72-4"></a>./testDir2/testDir<span class="w"> </span><span class="m">21</span>/testDir211/.DS_Store
</span></code></pre></div>
<p>改为 <code>-print0</code> 指明使用 <code>\0</code> 作为输出结果分隔符，则输出看起来是一行，实际上每个 .DS_Store 后有一个字符 NUL（<code>\0</code>）。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-73-1"><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;.DS_Store&quot;</span><span class="w"> </span>-print0
</span><span id="__span-73-2"><a id="__codelineno-73-2" name="__codelineno-73-2" href="#__codelineno-73-2"></a>./testDir3/testDir<span class="w"> </span><span class="m">32</span>/testDir322/.DS_Store./testDir3/testDir<span class="w"> </span><span class="m">31</span>/.DS_Store./testDir2/testDir<span class="w"> </span><span class="m">21</span>/testDir211/.DS_Store%
</span></code></pre></div>
<p>此时，再进一步管传给 xargs，结合-t调试输出，分析如下：</p>
<ol>
<li>
<p>xargs 接受到的参数按照空白字元切割应该为四段：</p>
<ul>
<li>./testDir3/testDir  </li>
<li>32/testDir322/.DS_Store./testDir3/testDir  </li>
<li>31/.DS_Store./testDir2/testDir  </li>
<li>21/testDir211/.DS_Store  </li>
</ul>
</li>
<li>
<p>由于每个.DS_Store后面隐藏了一个NUL字符（<code>\0</code>），ls再按照C语言析取字符串参数时会截断：</p>
<ul>
<li>./testDir3/testDir  </li>
<li>32/testDir322/.DS_Store  </li>
<li>31/.DS_Store  </li>
<li>21/testDir211/.DS_Store  </li>
</ul>
</li>
</ol>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-74-1"><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;.DS_Store&quot;</span><span class="w"> </span>-print0<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-t<span class="w"> </span>ls<span class="w"> </span>-1
</span><span id="__span-74-2"><a id="__codelineno-74-2" name="__codelineno-74-2" href="#__codelineno-74-2"></a>ls<span class="w"> </span>-1<span class="w"> </span>./testDir3/testDir<span class="w"> </span><span class="m">32</span>/testDir322/.DS_Store<span class="w"> </span><span class="m">31</span>/.DS_Store<span class="w"> </span><span class="m">21</span>/testDir211/.DS_Store
</span><span id="__span-74-3"><a id="__codelineno-74-3" name="__codelineno-74-3" href="#__codelineno-74-3"></a>ls:<span class="w"> </span>./testDir3/testDir:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
</span><span id="__span-74-4"><a id="__codelineno-74-4" name="__codelineno-74-4" href="#__codelineno-74-4"></a>ls:<span class="w"> </span><span class="m">21</span>/testDir211/.DS_Store:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
</span><span id="__span-74-5"><a id="__codelineno-74-5" name="__codelineno-74-5" href="#__codelineno-74-5"></a>ls:<span class="w"> </span><span class="m">31</span>/.DS_Store:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
</span><span id="__span-74-6"><a id="__codelineno-74-6" name="__codelineno-74-6" href="#__codelineno-74-6"></a>ls:<span class="w"> </span><span class="m">32</span>/testDir322/.DS_Store:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
</span></code></pre></div>
<p>接下来，我们给 xargs 加上 -0 选项，按照 find -print0 一致的切割方式读取管传参数，则符合预期：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-75-1"><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;.DS_Store&quot;</span><span class="w"> </span>-print0<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-t0<span class="w"> </span>ls<span class="w"> </span>-1
</span><span id="__span-75-2"><a id="__codelineno-75-2" name="__codelineno-75-2" href="#__codelineno-75-2"></a>ls<span class="w"> </span>-1<span class="w"> </span>./testDir3/testDir<span class="w"> </span><span class="m">32</span>/testDir322/.DS_Store<span class="w"> </span>./testDir3/testDir<span class="w"> </span><span class="m">31</span>/.DS_Store<span class="w"> </span>./testDir2/testDir<span class="w"> </span><span class="m">21</span>/testDir211/.DS_Store
</span><span id="__span-75-3"><a id="__codelineno-75-3" name="__codelineno-75-3" href="#__codelineno-75-3"></a>./testDir2/testDir<span class="w"> </span><span class="m">21</span>/testDir211/.DS_Store
</span><span id="__span-75-4"><a id="__codelineno-75-4" name="__codelineno-75-4" href="#__codelineno-75-4"></a>./testDir3/testDir<span class="w"> </span><span class="m">31</span>/.DS_Store
</span><span id="__span-75-5"><a id="__codelineno-75-5" name="__codelineno-75-5" href="#__codelineno-75-5"></a>./testDir3/testDir<span class="w"> </span><span class="m">32</span>/testDir322/.DS_Store
</span></code></pre></div>
<p>之前的例子中，如果文件路径中子目录存在空格（例如 Visual Studio），都会报错！</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-76-1"><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.txt&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>rm<span class="w"> </span>-f
</span><span id="__span-76-2"><a id="__codelineno-76-2" name="__codelineno-76-2" href="#__codelineno-76-2"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-size<span class="w"> </span>+1M<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>du<span class="w"> </span>-csh<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-rh
</span></code></pre></div>
<p><code>find -print0</code> 搭配 <code>xargs -0</code> 使用，则可安全处理可能包含空格导致的路径问题：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-77-1"><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.txt&quot;</span><span class="w"> </span>-print0<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-0<span class="w"> </span>rm<span class="w"> </span>-f
</span><span id="__span-77-2"><a id="__codelineno-77-2" name="__codelineno-77-2" href="#__codelineno-77-2"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-size<span class="w"> </span>+1M<span class="w"> </span>-print0<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-0<span class="w"> </span>du<span class="w"> </span>-csh<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-rh
</span></code></pre></div>
<p>为安全起见，建议后续都配套采用 <code>find -print0 | xargs -0</code> 解析模式。</p>
<h3 id="demos">demos<a class="headerlink" href="#demos" title="Permanent link">#</a></h3>
<h4 id="exclude_dir">exclude dir<a class="headerlink" href="#exclude_dir" title="Permanent link">#</a></h4>
<p>需求：find 查找 / 四级以内目录下的的所有 conf 文件，排除 /etc/fonts/ 和路径包含 tmpfiles.d 的目录，如下：</p>
<ul>
<li>./etc/fonts/  </li>
<li>./etc/tmpfiles.d/  </li>
<li>./usr/lib/tmpfiles.d/  </li>
</ul>
<p><a href="https://www.baeldung.com/linux/find-exclude-paths">Exclude Certain Paths With the find Command</a>  </p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-78-1"><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a><span class="c1"># 2. Using the -prune Option</span>
</span><span id="__span-78-2"><a id="__codelineno-78-2" name="__codelineno-78-2" href="#__codelineno-78-2"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-path<span class="w"> </span>./jpeg<span class="w"> </span>-prune<span class="w"> </span>-o<span class="w"> </span>-path<span class="w"> </span>./mp3<span class="w"> </span>-prune<span class="w"> </span><span class="se">\)</span><span class="w"> </span>-o<span class="w"> </span>-print
</span><span id="__span-78-3"><a id="__codelineno-78-3" name="__codelineno-78-3" href="#__codelineno-78-3"></a><span class="c1"># 3,4. Using the -not/! Operator; </span>
</span><span id="__span-78-4"><a id="__codelineno-78-4" name="__codelineno-78-4" href="#__codelineno-78-4"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-not<span class="w"> </span>-path<span class="w"> </span><span class="s1">&#39;*/mp3/*&#39;</span>
</span></code></pre></div>
<p><a href="https://stackoverflow.com/questions/4210042/how-do-i-exclude-a-directory-when-using-find">linux - How do I exclude a directory when using <code>find</code>? - Stack Overflow</a></p>
<p>Use the -prune primary. For example, if you want to exclude ./misc:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-79-1"><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-path<span class="w"> </span>./misc<span class="w"> </span>-prune<span class="w"> </span>-o<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;*.txt&#39;</span><span class="w"> </span>-print
</span></code></pre></div>
<p><a href="https://www.cyberciti.biz/faq/find-command-exclude-ignore-files/">Find command Exclude or Ignore Files (e.g. Ignore All Hidden .dot Files )</a></p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-80-1"><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a><span class="c1"># find all *.txt files in the current directory but exclude ./Movies/, ./Downloads/, and ./Music/ folders:</span>
</span><span id="__span-80-2"><a id="__codelineno-80-2" name="__codelineno-80-2" href="#__codelineno-80-2"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.txt&quot;</span><span class="w"> </span>!<span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;./Movies/*&quot;</span><span class="w"> </span>!<span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;./Downloads/*&quot;</span><span class="w"> </span>!<span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;./Music/*&quot;</span><span class="w"> </span>
</span></code></pre></div>
<p>To exclude multiple directories, OR them between parentheses.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-81-1"><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-path<span class="w"> </span>./dir1<span class="w"> </span>-o<span class="w"> </span>-path<span class="w"> </span>./dir2<span class="w"> </span>-o<span class="w"> </span>-path<span class="w"> </span>./dir3<span class="w"> </span><span class="se">\)</span><span class="w"> </span>-prune<span class="w"> </span>-o<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;*.txt&#39;</span><span class="w"> </span>-print
</span></code></pre></div>
<p>And, to exclude directories with a specific name at any level, use the -name primary instead of -path.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-82-1"><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span>-name<span class="w"> </span>node_modules<span class="w"> </span>-prune<span class="w"> </span>-o<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;*.json&#39;</span><span class="w"> </span>-print
</span></code></pre></div>
<p>实测：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-83-1"><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a><span class="c1"># 仅忽略了 /etc/fonts/*/*，还是打印 /etc/fonts/conf.avail,/etc/fonts/fonts.conf,/etc/fonts/conf.d</span>
</span><span id="__span-83-2"><a id="__codelineno-83-2" name="__codelineno-83-2" href="#__codelineno-83-2"></a>$<span class="w"> </span>find<span class="w"> </span>/<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;/etc/fonts/*&quot;</span><span class="w"> </span>-prune<span class="w"> </span>-o<span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;*/tmpfiles.d/*&quot;</span><span class="w"> </span>-prune<span class="w"> </span><span class="se">\)</span><span class="w"> </span>-o<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.conf&quot;</span><span class="w"> </span>-maxdepth<span class="w"> </span><span class="m">4</span>
</span><span id="__span-83-3"><a id="__codelineno-83-3" name="__codelineno-83-3" href="#__codelineno-83-3"></a>$<span class="w"> </span>find<span class="w"> </span>/<span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;/etc/fonts/*&quot;</span><span class="w"> </span>-o<span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;*/tmpfiles.d/*&quot;</span><span class="w"> </span><span class="se">\)</span><span class="w"> </span>-prune<span class="w"> </span>-o<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.conf&quot;</span><span class="w"> </span>-maxdepth<span class="w"> </span><span class="m">4</span>
</span><span id="__span-83-4"><a id="__codelineno-83-4" name="__codelineno-83-4" href="#__codelineno-83-4"></a><span class="c1"># 找到了路径匹配了两个目录，且后缀为conf的文件，与预期相反的结果</span>
</span><span id="__span-83-5"><a id="__codelineno-83-5" name="__codelineno-83-5" href="#__codelineno-83-5"></a>$<span class="w"> </span>find<span class="w"> </span>/<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;/etc/fonts/*&quot;</span><span class="w"> </span>-prune<span class="w"> </span>-o<span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;*/tmpfiles.d/*&quot;</span><span class="w"> </span>-prune<span class="w"> </span><span class="se">\)</span><span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.conf&quot;</span><span class="w"> </span>-maxdepth<span class="w"> </span><span class="m">4</span>
</span><span id="__span-83-6"><a id="__codelineno-83-6" name="__codelineno-83-6" href="#__codelineno-83-6"></a>$<span class="w"> </span>find<span class="w"> </span>/<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;/etc/fonts/*&quot;</span><span class="w"> </span>-o<span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;*/tmpfiles.d/*&quot;</span><span class="w"> </span><span class="se">\)</span><span class="w"> </span>-prune<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.conf&quot;</span><span class="w"> </span>-maxdepth<span class="w"> </span><span class="m">4</span>
</span><span id="__span-83-7"><a id="__codelineno-83-7" name="__codelineno-83-7" href="#__codelineno-83-7"></a><span class="c1"># 符合预期！</span>
</span><span id="__span-83-8"><a id="__codelineno-83-8" name="__codelineno-83-8" href="#__codelineno-83-8"></a>$<span class="w"> </span>find<span class="w"> </span>/<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.conf&quot;</span><span class="w"> </span>-not<span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;/etc/fonts/*&quot;</span><span class="w"> </span>!<span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;*/tmpfiles.d/*&quot;</span><span class="w"> </span>-maxdepth<span class="w"> </span><span class="m">4</span>
</span></code></pre></div>
<p><a href="https://stackoverflow.com/questions/4210042/how-to-exclude-a-directory-in-find-command">How to exclude a directory in find . command</a>  </p>
<p>https://stackoverflow.com/a/15736463</p>
<p>If -prune doesn't work for you, this will:</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-84-1"><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a>$<span class="w"> </span>find<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.js&quot;</span><span class="w"> </span>-not<span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;./directory/*&quot;</span>
</span></code></pre></div>
<p>https://stackoverflow.com/a/4210072</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-85-1"><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a><span class="c1"># Use the -prune primary. For example, if you want to exclude ./misc:</span>
</span><span id="__span-85-2"><a id="__codelineno-85-2" name="__codelineno-85-2" href="#__codelineno-85-2"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-path<span class="w"> </span>./misc<span class="w"> </span>-prune<span class="w"> </span>-o<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;*.txt&#39;</span><span class="w"> </span>-print
</span><span id="__span-85-3"><a id="__codelineno-85-3" name="__codelineno-85-3" href="#__codelineno-85-3"></a>
</span><span id="__span-85-4"><a id="__codelineno-85-4" name="__codelineno-85-4" href="#__codelineno-85-4"></a><span class="c1"># To exclude multiple directories, OR them between parentheses.</span>
</span><span id="__span-85-5"><a id="__codelineno-85-5" name="__codelineno-85-5" href="#__codelineno-85-5"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-path<span class="w"> </span>./dir1<span class="w"> </span>-o<span class="w"> </span>-path<span class="w"> </span>./dir2<span class="w"> </span>-o<span class="w"> </span>-path<span class="w"> </span>./dir3<span class="w"> </span><span class="se">\)</span><span class="w"> </span>-prune<span class="w"> </span>-o<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;*.txt&#39;</span><span class="w"> </span>-print
</span><span id="__span-85-6"><a id="__codelineno-85-6" name="__codelineno-85-6" href="#__codelineno-85-6"></a>
</span><span id="__span-85-7"><a id="__codelineno-85-7" name="__codelineno-85-7" href="#__codelineno-85-7"></a><span class="c1"># And, to exclude directories with a specific name at any level, use the -name primary instead of -path.</span>
</span><span id="__span-85-8"><a id="__codelineno-85-8" name="__codelineno-85-8" href="#__codelineno-85-8"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span>-name<span class="w"> </span>node_modules<span class="w"> </span>-prune<span class="w"> </span>-o<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;*.json&#39;</span><span class="w"> </span>-print
</span><span id="__span-85-9"><a id="__codelineno-85-9" name="__codelineno-85-9" href="#__codelineno-85-9"></a>
</span><span id="__span-85-10"><a id="__codelineno-85-10" name="__codelineno-85-10" href="#__codelineno-85-10"></a><span class="c1"># From ~/ on my macOS cleans it up nicely ?</span>
</span><span id="__span-85-11"><a id="__codelineno-85-11" name="__codelineno-85-11" href="#__codelineno-85-11"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;./Library/*&quot;</span><span class="w"> </span>-o<span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;./.Trash&quot;</span><span class="w"> </span><span class="se">\)</span><span class="w"> </span>-prune<span class="w"> </span>-o<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;.DS_Store&#39;</span><span class="w"> </span>-print0<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-0<span class="w"> </span>rm
</span></code></pre></div>
<p>https://stackoverflow.com/a/16595367</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-86-1"><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a><span class="c1"># I find the following easier to reason about than other proposed solutions:</span>
</span><span id="__span-86-2"><a id="__codelineno-86-2" name="__codelineno-86-2" href="#__codelineno-86-2"></a>$<span class="w"> </span>find<span class="w"> </span>build<span class="w"> </span>-not<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-path<span class="w"> </span>build/external<span class="w"> </span>-prune<span class="w"> </span><span class="se">\)</span><span class="w"> </span>-name<span class="w"> </span><span class="se">\*</span>.js
</span><span id="__span-86-3"><a id="__codelineno-86-3" name="__codelineno-86-3" href="#__codelineno-86-3"></a><span class="c1"># you can also exclude multiple paths</span>
</span><span id="__span-86-4"><a id="__codelineno-86-4" name="__codelineno-86-4" href="#__codelineno-86-4"></a>$<span class="w"> </span>find<span class="w"> </span>build<span class="w"> </span>-not<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-path<span class="w"> </span>build/external<span class="w"> </span>-prune<span class="w"> </span><span class="se">\)</span><span class="w"> </span>-not<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-path<span class="w"> </span>build/blog<span class="w"> </span>-prune<span class="w"> </span><span class="se">\)</span><span class="w"> </span>-name<span class="w"> </span><span class="se">\*</span>.js
</span></code></pre></div>
<p>https://stackoverflow.com/a/4210234</p>
<p>I prefer the -not notation ... it's more readable:</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-87-1"><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;*.js&#39;</span><span class="w"> </span>-and<span class="w"> </span>-not<span class="w"> </span>-path<span class="w"> </span>directory
</span></code></pre></div>
<p>https://stackoverflow.com/a/49296451</p>
<p>This is the only one that worked for me.</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-88-1"><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a><span class="c1"># Searching for &quot;MyFile&quot; excluding &quot;Directory&quot;.</span>
</span><span id="__span-88-2"><a id="__codelineno-88-2" name="__codelineno-88-2" href="#__codelineno-88-2"></a><span class="c1"># Give emphasis to the stars * .</span>
</span><span id="__span-88-3"><a id="__codelineno-88-3" name="__codelineno-88-3" href="#__codelineno-88-3"></a><span class="c1"># works on macOS</span>
</span><span id="__span-88-4"><a id="__codelineno-88-4" name="__codelineno-88-4" href="#__codelineno-88-4"></a>$<span class="w"> </span>find<span class="w"> </span>/<span class="w"> </span>-name<span class="w"> </span>MyFile<span class="w"> </span>!<span class="w"> </span>-path<span class="w"> </span><span class="s1">&#39;*/Directory/*&#39;</span>
</span><span id="__span-88-5"><a id="__codelineno-88-5" name="__codelineno-88-5" href="#__codelineno-88-5"></a><span class="c1"># locate native package.json</span>
</span><span id="__span-88-6"><a id="__codelineno-88-6" name="__codelineno-88-6" href="#__codelineno-88-6"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span>package.json<span class="w"> </span>!<span class="w"> </span>-path<span class="w"> </span><span class="s1">&#39;*/node_modules/*&#39;</span>
</span></code></pre></div>
<p>另外，find / 还会有大量访问权限受限的错误提示：<code>find: ‘/lost+found’: Permission denied</code>。</p>
<p><a href="https://stackoverflow.com/questions/762348/how-can-i-exclude-all-permission-denied-messages-from-find">How can I exclude all "permission denied" messages from "find"?</a></p>
<p>所以最终的答案如下：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-89-1"><a id="__codelineno-89-1" name="__codelineno-89-1" href="#__codelineno-89-1"></a>$<span class="w"> </span>find<span class="w"> </span>/<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.conf&quot;</span><span class="w"> </span>-not<span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;/etc/fonts/*&quot;</span><span class="w"> </span>!<span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;*/tmpfiles.d/*&quot;</span><span class="w"> </span>-maxdepth<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">2</span>&gt;/dev/null
</span><span id="__span-89-2"><a id="__codelineno-89-2" name="__codelineno-89-2" href="#__codelineno-89-2"></a>$<span class="w"> </span>find<span class="w"> </span>/<span class="w"> </span>-not<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;/etc/fonts/*&quot;</span><span class="w"> </span>-prune<span class="w"> </span><span class="se">\)</span><span class="w"> </span>-not<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;*/tmpfiles.d/*&quot;</span><span class="w"> </span>-prune<span class="w"> </span><span class="se">\)</span><span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.conf&quot;</span><span class="w"> </span>-maxdepth<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">2</span>&gt;/dev/null
</span><span id="__span-89-3"><a id="__codelineno-89-3" name="__codelineno-89-3" href="#__codelineno-89-3"></a>$<span class="w"> </span>find<span class="w"> </span>nodejs/src<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*banner.vue&quot;</span><span class="w"> </span>-not<span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;nodejs/src/node_modules/*&quot;</span><span class="w"> </span>-not<span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;nodejs/src/dist/*&quot;</span><span class="w"> </span><span class="m">2</span>&gt;/dev/null
</span></code></pre></div>
<h4 id="delete_file">delete file<a class="headerlink" href="#delete_file" title="Permanent link">#</a></h4>
<p><code>-delete</code> 操作可以用来删除 find 匹配出来的结果文件（夹）。</p>
<p>递归查找当前目录及其子目录下所有的 <code>.o</code>/<code>.DS_Store</code> 文件，然后执行 <code>-delete</code> 删除操作。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-90-1"><a id="__codelineno-90-1" name="__codelineno-90-1" href="#__codelineno-90-1"></a><span class="c1"># 末尾可追加 -print 打印删除的文件</span>
</span><span id="__span-90-2"><a id="__codelineno-90-2" name="__codelineno-90-2" href="#__codelineno-90-2"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.o&quot;</span><span class="w"> </span>-delete
</span><span id="__span-90-3"><a id="__codelineno-90-3" name="__codelineno-90-3" href="#__codelineno-90-3"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;.DS_Store&quot;</span><span class="w"> </span>-delete
</span></code></pre></div>
<blockquote>
<p>默认执行 <code>-print</code> 打印查找结果；<br />
可显式指定 <code>-type f</code> 只查找文件类型；  </p>
</blockquote>
<p>还可针对结果执行 <code>-exec rm</code> 或重定向给 xargs 作为参数执行 <code>rm</code> 命令。<br />
以下示例清除 macOS 文件夹下自动生成的 <code>.DS_Store</code> 文件：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-91-1"><a id="__codelineno-91-1" name="__codelineno-91-1" href="#__codelineno-91-1"></a><span class="c1"># 运行正常（末尾可追加 -print 打印删除的文件）</span>
</span><span id="__span-91-2"><a id="__codelineno-91-2" name="__codelineno-91-2" href="#__codelineno-91-2"></a>find<span class="w"> </span>testDir1<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;.DS_Store&quot;</span><span class="w"> </span>-exec<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\;</span>
</span><span id="__span-91-3"><a id="__codelineno-91-3" name="__codelineno-91-3" href="#__codelineno-91-3"></a><span class="c1"># 运行正常（末尾可追加 -print 打印删除的文件）</span>
</span><span id="__span-91-4"><a id="__codelineno-91-4" name="__codelineno-91-4" href="#__codelineno-91-4"></a>find<span class="w"> </span>testDir1<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;.DS_Store&quot;</span><span class="w"> </span>-exec<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>--<span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\+</span>
</span><span id="__span-91-5"><a id="__codelineno-91-5" name="__codelineno-91-5" href="#__codelineno-91-5"></a><span class="c1"># 运行正常</span>
</span><span id="__span-91-6"><a id="__codelineno-91-6" name="__codelineno-91-6" href="#__codelineno-91-6"></a>find<span class="w"> </span>testDir1<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;.DS_Store&quot;</span><span class="w"> </span>-print0<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-0<span class="w"> </span>rm<span class="w"> </span>-rf
</span></code></pre></div>
<p>以下示例清除 visual studio 工程 sln/vcproj 下的 <code>*.user</code> 文件：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-92-1"><a id="__codelineno-92-1" name="__codelineno-92-1" href="#__codelineno-92-1"></a><span class="c1"># delete file: *.user</span>
</span><span id="__span-92-2"><a id="__codelineno-92-2" name="__codelineno-92-2" href="#__codelineno-92-2"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;delete files: *.user&quot;</span>
</span><span id="__span-92-3"><a id="__codelineno-92-3" name="__codelineno-92-3" href="#__codelineno-92-3"></a><span class="c1">#find . -name &quot;*.user&quot; -delete</span>
</span><span id="__span-92-4"><a id="__codelineno-92-4" name="__codelineno-92-4" href="#__codelineno-92-4"></a><span class="c1">#find . -name &quot;*.user&quot; -exec rm {} \;</span>
</span><span id="__span-92-5"><a id="__codelineno-92-5" name="__codelineno-92-5" href="#__codelineno-92-5"></a>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.user&quot;</span><span class="w"> </span>-print0<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-0<span class="w"> </span>rm<span class="w"> </span>-f
</span></code></pre></div>
<h4 id="delete_folder">delete folder<a class="headerlink" href="#delete_folder" title="Permanent link">#</a></h4>
<p>一般 git 仓库的会配置忽略一些临时目录或文件，例如 __MACOSX、.DS_Store 等。<br />
find 查找当前目录及其子目录下所有的 <code>__MACOSX</code> 目录，然后通过 <code>-delete</code> 删除之。</p>
<p>但是，-delete 删除目录时底层调用的应该是 rmdir，只能删除空目录，无法删除非空目录。<br />
此时，可考虑将 find 结果管传给 xargs 作为参数进一步传递给 <code>rm -rf</code> 执行递归删除。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-93-1"><a id="__codelineno-93-1" name="__codelineno-93-1" href="#__codelineno-93-1"></a><span class="c1"># 结果正确，报错 No such file or directory</span>
</span><span id="__span-93-2"><a id="__codelineno-93-2" name="__codelineno-93-2" href="#__codelineno-93-2"></a>$<span class="w"> </span>find<span class="w"> </span>testDir1<span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;__MACOSX&quot;</span><span class="w"> </span>-exec<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\;</span>
</span><span id="__span-93-3"><a id="__codelineno-93-3" name="__codelineno-93-3" href="#__codelineno-93-3"></a><span class="c1"># 运行正常（末尾可追加 -print 打印删除的文件夹）</span>
</span><span id="__span-93-4"><a id="__codelineno-93-4" name="__codelineno-93-4" href="#__codelineno-93-4"></a>$<span class="w"> </span>find<span class="w"> </span>testDir1<span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;__MACOSX&quot;</span><span class="w"> </span>-exec<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>--<span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\+</span>
</span><span id="__span-93-5"><a id="__codelineno-93-5" name="__codelineno-93-5" href="#__codelineno-93-5"></a><span class="c1"># 运行正常</span>
</span><span id="__span-93-6"><a id="__codelineno-93-6" name="__codelineno-93-6" href="#__codelineno-93-6"></a>$<span class="w"> </span>find<span class="w"> </span>testDir1<span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;__MACOSX&quot;</span><span class="w"> </span>-print0<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-0<span class="w"> </span>rm<span class="w"> </span>-rf
</span></code></pre></div>
<p>以下示例，查找当前目录下的 __MACOSX 子目录和隐藏文件 .DS_Store，并予以删除：</p>
<blockquote>
<p><strong>注意</strong>：一定要添加括号表达式，否则 -o 后面部分进行了逻辑结合，运行结果非预期！</p>
</blockquote>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-94-1"><a id="__codelineno-94-1" name="__codelineno-94-1" href="#__codelineno-94-1"></a><span class="c1"># 结果正确，报错 No such file or directory</span>
</span><span id="__span-94-2"><a id="__codelineno-94-2" name="__codelineno-94-2" href="#__codelineno-94-2"></a>$<span class="w"> </span>find<span class="w"> </span>testDir1<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;__MACOSX&quot;</span><span class="w"> </span>-o<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;.DS_Store&quot;</span><span class="w"> </span><span class="se">\)</span><span class="w"> </span>-exec<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\;</span>
</span><span id="__span-94-3"><a id="__codelineno-94-3" name="__codelineno-94-3" href="#__codelineno-94-3"></a><span class="c1"># 运行正常（末尾可追加 -print 打印删除的文件夹）</span>
</span><span id="__span-94-4"><a id="__codelineno-94-4" name="__codelineno-94-4" href="#__codelineno-94-4"></a>$<span class="w"> </span>find<span class="w"> </span>testDir1<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;__MACOSX&quot;</span><span class="w"> </span>-o<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;.DS_Store&quot;</span><span class="w"> </span><span class="se">\)</span><span class="w"> </span>-exec<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>--<span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\+</span>
</span><span id="__span-94-5"><a id="__codelineno-94-5" name="__codelineno-94-5" href="#__codelineno-94-5"></a><span class="c1"># 运行正常</span>
</span><span id="__span-94-6"><a id="__codelineno-94-6" name="__codelineno-94-6" href="#__codelineno-94-6"></a>$<span class="w"> </span>find<span class="w"> </span>testDir1<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;__MACOSX&quot;</span><span class="w"> </span>-o<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;.DS_Store&quot;</span><span class="w"> </span><span class="se">\)</span><span class="w"> </span>-print0<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-0<span class="w"> </span>rm<span class="w"> </span>-rf
</span></code></pre></div>
<hr />
<p>以下示例清除指定目录下的文件夹（rm -rf递归强制删除）：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-95-1"><a id="__codelineno-95-1" name="__codelineno-95-1" href="#__codelineno-95-1"></a>find<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$targetDir</span><span class="s2">&quot;</span><span class="w">  </span>-maxdepth<span class="w"> </span><span class="m">1</span><span class="w"> </span>!<span class="w"> </span>-path<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$targetDir</span><span class="s2">&quot;</span><span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span>-print0<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-0<span class="w"> </span>rm<span class="w"> </span>-rf
</span></code></pre></div>
<p>以下示例清除 visual studio 工程 sln/vcproj 下编译生成的 <code>Debug</code> 文件夹：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-96-1"><a id="__codelineno-96-1" name="__codelineno-96-1" href="#__codelineno-96-1"></a><span class="c1"># delete folder: Debug</span>
</span><span id="__span-96-2"><a id="__codelineno-96-2" name="__codelineno-96-2" href="#__codelineno-96-2"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;delete folder: Debug&quot;</span>
</span><span id="__span-96-3"><a id="__codelineno-96-3" name="__codelineno-96-3" href="#__codelineno-96-3"></a>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;debug&quot;</span><span class="w"> </span>-print0<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-0<span class="w"> </span>rm<span class="w"> </span>-rf
</span></code></pre></div>
<p>以下示例清除 xcodeproj 目录下的 <code>xcuserdata</code> 文件夹：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-97-1"><a id="__codelineno-97-1" name="__codelineno-97-1" href="#__codelineno-97-1"></a><span class="c1"># delete folder: xcuserdata</span>
</span><span id="__span-97-2"><a id="__codelineno-97-2" name="__codelineno-97-2" href="#__codelineno-97-2"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;delete folder: xcuserdata&quot;</span>
</span><span id="__span-97-3"><a id="__codelineno-97-3" name="__codelineno-97-3" href="#__codelineno-97-3"></a>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;xcuserdata&quot;</span><span class="w"> </span>-print0<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-0<span class="w"> </span>rm<span class="w"> </span>-rf
</span></code></pre></div>
<p>以下示例清除 python 运行过程中生成的 <code>__pycache__</code> 文件夹：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-98-1"><a id="__codelineno-98-1" name="__codelineno-98-1" href="#__codelineno-98-1"></a><span class="c1"># delete folder: __pycache__</span>
</span><span id="__span-98-2"><a id="__codelineno-98-2" name="__codelineno-98-2" href="#__codelineno-98-2"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;delete folder: __pycache__&quot;</span>
</span><span id="__span-98-3"><a id="__codelineno-98-3" name="__codelineno-98-3" href="#__codelineno-98-3"></a>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;__pycache__&quot;</span><span class="w"> </span>-print0<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-0<span class="w"> </span>rm<span class="w"> </span>-rf
</span></code></pre></div>
<h4 id="format_files">format files<a class="headerlink" href="#format_files" title="Permanent link">#</a></h4>
<p><code>clang-format</code> 貌似只接受单个文件路径作为格式化目标参数。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-99-1"><a id="__codelineno-99-1" name="__codelineno-99-1" href="#__codelineno-99-1"></a>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/Projects/mars
</span><span id="__span-99-2"><a id="__codelineno-99-2" name="__codelineno-99-2" href="#__codelineno-99-2"></a>$<span class="w"> </span>clang-format<span class="w"> </span>-style<span class="o">=</span>file<span class="w"> </span>-i<span class="w"> </span>mars/comm/messagequeue/message_queue.cc
</span></code></pre></div>
<p>如果想批量格式化某个子目录下的所有代码文件，可以在终端执行以下命令：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-100-1"><a id="__codelineno-100-1" name="__codelineno-100-1" href="#__codelineno-100-1"></a>$<span class="w"> </span><span class="c1"># 设置要格式化的子目录</span>
</span><span id="__span-100-2"><a id="__codelineno-100-2" name="__codelineno-100-2" href="#__codelineno-100-2"></a>$<span class="w"> </span><span class="nv">subdir</span><span class="o">=</span><span class="s2">&quot;mars/comm/messagequeue/&quot;</span>
</span></code></pre></div>
<p>find 递归查找并 more 滚动预览或统计 subdir 下将要格式化的代码文件：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-101-1"><a id="__codelineno-101-1" name="__codelineno-101-1" href="#__codelineno-101-1"></a><span class="c1"># 或管传 | wc -l 统计数量</span>
</span><span id="__span-101-2"><a id="__codelineno-101-2" name="__codelineno-101-2" href="#__codelineno-101-2"></a>$<span class="w"> </span>find<span class="w"> </span><span class="nv">$subdir</span><span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.h&quot;</span><span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.hpp&quot;</span><span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.c&quot;</span><span class="w"> </span>-o<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.cpp&quot;</span><span class="w"> </span>-o<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.m&quot;</span><span class="w"> </span>-o<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.mm&quot;</span><span class="w"> </span><span class="se">\)</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>more
</span></code></pre></div>
<p>将 find 结果重定向给 xargs 传参给 clang-format 执行格式化：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-102-1"><a id="__codelineno-102-1" name="__codelineno-102-1" href="#__codelineno-102-1"></a>$<span class="w"> </span>find<span class="w"> </span><span class="nv">$subdir</span><span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.h&quot;</span><span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.hpp&quot;</span><span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.c&quot;</span><span class="w"> </span>-o<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.cpp&quot;</span><span class="w"> </span>-o<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.m&quot;</span><span class="w"> </span>-o<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.mm&quot;</span><span class="w"> </span><span class="se">\)</span><span class="w"> </span>-print0<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-0<span class="w"> </span>clang-format<span class="w"> </span>--verbose<span class="w"> </span>-style<span class="o">=</span>file<span class="w"> </span>-i
</span></code></pre></div>
<p>find 的 path 参数可接受多个目录：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-103-1"><a id="__codelineno-103-1" name="__codelineno-103-1" href="#__codelineno-103-1"></a>$<span class="w"> </span><span class="nv">subdir1</span><span class="o">=</span><span class="s2">&quot;mars/comm/messagequeue/&quot;</span>
</span><span id="__span-103-2"><a id="__codelineno-103-2" name="__codelineno-103-2" href="#__codelineno-103-2"></a>$<span class="w"> </span><span class="nv">subdir2</span><span class="o">=</span><span class="s2">&quot;mars/comm/coroutine/&quot;</span>
</span><span id="__span-103-3"><a id="__codelineno-103-3" name="__codelineno-103-3" href="#__codelineno-103-3"></a>$<span class="w"> </span>find<span class="w"> </span><span class="nv">$subdir1</span><span class="w"> </span><span class="nv">$subdir2</span><span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span><span class="se">\(</span><span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.h&quot;</span><span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.hpp&quot;</span><span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.c&quot;</span><span class="w"> </span>-o<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.cpp&quot;</span><span class="w"> </span>-o<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.m&quot;</span><span class="w"> </span>-o<span class="w"> </span>-iname<span class="w"> </span><span class="s2">&quot;*.mm&quot;</span><span class="w"> </span><span class="se">\)</span><span class="w"> </span>-print0<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-0<span class="w"> </span>clang-format<span class="w"> </span>--verbose<span class="w"> </span>-style<span class="o">=</span>file<span class="w"> </span>-i
</span></code></pre></div>
<h4 id="copy_files">copy files<a class="headerlink" href="#copy_files" title="Permanent link">#</a></h4>
<p>下面示例将所有的.mp3文件移入目录 targetDir：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-104-1"><a id="__codelineno-104-1" name="__codelineno-104-1" href="#__codelineno-104-1"></a>$<span class="w"> </span>find<span class="w"> </span><span class="nv">$dirPath</span><span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.mp3&quot;</span><span class="w"> </span>-exec<span class="w"> </span>mv<span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="nv">$targetDir</span><span class="w"> </span><span class="se">\;</span>
</span></code></pre></div>
<p>下面示例将10天前的.txt文件备份到目录 targetDir：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-105-1"><a id="__codelineno-105-1" name="__codelineno-105-1" href="#__codelineno-105-1"></a>$<span class="w"> </span>find<span class="w"> </span><span class="nv">$dirPath</span><span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-mtime<span class="w"> </span>+10<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.txt&quot;</span><span class="w"> </span>-exec<span class="w"> </span>cp<span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="nv">$targetDir</span><span class="w"> </span><span class="se">\;</span>
</span></code></pre></div>
<p>考虑这么一个需求场景：在Xcode工程的构建目录下，查找所有文件夹下的 <code>.d</code> 文件，然后拷贝到 <code>~/Downloads/dependencies</code> 目录下。</p>
<p>除了上面的 find -exec 实现方案外，基于while循环的子shell的表达实现如下：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-106-1"><a id="__codelineno-106-1" name="__codelineno-106-1" href="#__codelineno-106-1"></a>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>DerivedData/Mars/Build/Intermediates.noindex
</span><span id="__span-106-2"><a id="__codelineno-106-2" name="__codelineno-106-2" href="#__codelineno-106-2"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.d&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="o">(</span><span class="k">while</span><span class="w"> </span><span class="nb">read</span><span class="w"> </span>line<span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w"> </span>cp<span class="w"> </span><span class="nv">$line</span><span class="w"> </span>~/Downloads/dependencies<span class="p">;</span><span class="w"> </span><span class="k">done</span><span class="o">)</span>
</span></code></pre></div>
<p>实际运行展开如下：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-107-1"><a id="__codelineno-107-1" name="__codelineno-107-1" href="#__codelineno-107-1"></a>cp<span class="w"> </span>-v<span class="w"> </span>file1.d<span class="w"> </span>~/Downloads/dependencies
</span><span id="__span-107-2"><a id="__codelineno-107-2" name="__codelineno-107-2" href="#__codelineno-107-2"></a>cp<span class="w"> </span>-v<span class="w"> </span>file2.d<span class="w"> </span>~/Downloads/dependencies
</span><span id="__span-107-3"><a id="__codelineno-107-3" name="__codelineno-107-3" href="#__codelineno-107-3"></a>...
</span></code></pre></div>
<p>到目前为止的 utility 用例场景，都是直接为特定的命令（例如 echo,cat,du,ls,rm）提供命令行参数，这些参数都直接源于 stdin，只是借助重定向 xargs 实现管接。</p>
<p>但在本案例中，cp 命令的拷贝目标文件夹（<code>target_directory</code>）是固定不变的，拷贝源参（<code>source_file</code>）则需要 find | xargs 提供。</p>
<p>此时可考虑借助 xargs 的 <code>-I</code> 选项，指定替换字符串为 <code>replstr</code>，将从 stdin 读取到的参数，替换掉 utility 命令中的占位参数（placeholder） <code>replstr</code>。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-108-1"><a id="__codelineno-108-1" name="__codelineno-108-1" href="#__codelineno-108-1"></a><span class="w">     </span>-I<span class="w"> </span>replstr
</span><span id="__span-108-2"><a id="__codelineno-108-2" name="__codelineno-108-2" href="#__codelineno-108-2"></a><span class="w">         </span>Execute<span class="w"> </span>utility<span class="w"> </span><span class="k">for</span><span class="w"> </span>each<span class="w"> </span>input<span class="w"> </span>line,<span class="w"> </span>replacing<span class="w"> </span>one<span class="w"> </span>or<span class="w"> </span>more<span class="w"> </span>occur-
</span><span id="__span-108-3"><a id="__codelineno-108-3" name="__codelineno-108-3" href="#__codelineno-108-3"></a><span class="w">         </span>rences<span class="w"> </span>of<span class="w"> </span>replstr<span class="w"> </span><span class="k">in</span><span class="w"> </span>up<span class="w"> </span>to<span class="w"> </span>replacements<span class="w"> </span><span class="o">(</span>or<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="k">if</span><span class="w"> </span>no<span class="w"> </span>-R<span class="w"> </span>flag<span class="w"> </span>is
</span><span id="__span-108-4"><a id="__codelineno-108-4" name="__codelineno-108-4" href="#__codelineno-108-4"></a><span class="w">         </span>specified<span class="o">)</span><span class="w"> </span>arguments<span class="w"> </span>to<span class="w"> </span>utility<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>entire<span class="w"> </span>line<span class="w"> </span>of<span class="w"> </span>input.
</span></code></pre></div>
<p>基于 xargs 的更加简洁高效的等效表达如下：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-109-1"><a id="__codelineno-109-1" name="__codelineno-109-1" href="#__codelineno-109-1"></a><span class="c1"># replstr = {}</span>
</span><span id="__span-109-2"><a id="__codelineno-109-2" name="__codelineno-109-2" href="#__codelineno-109-2"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.d&quot;</span><span class="w"> </span>-print0<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-0<span class="w"> </span>-I<span class="w"> </span><span class="o">{}</span><span class="w"> </span>cp<span class="w"> </span><span class="o">{}</span><span class="w"> </span>~/Downloads/dependencies
</span></code></pre></div>
<p>使用 <code>-I</code> 的时候，命令以循环的方式执行。如果有3个参数（即 find 出了3个.d文件），那么命令就会连同 <code>{}</code> 一起被执行3次。<br />
在每一次的 cp 命令执行中，source_file 参数占位符 <code>{}</code> 都会被替换为 xargs 传递的相应参数作为拷贝源。</p>
<hr />
<p>为方便调试及理解，可以给 xargs 带上 <code>-t</code> 选项，查看循环执行的cp命令展开。再配合 cp 的 <code>-v</code> 选项，可以看到拷贝流程。<br />
这样，命令行执行输出就更明了了：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-110-1"><a id="__codelineno-110-1" name="__codelineno-110-1" href="#__codelineno-110-1"></a><span class="c1"># replstr = srcd</span>
</span><span id="__span-110-2"><a id="__codelineno-110-2" name="__codelineno-110-2" href="#__codelineno-110-2"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.d&quot;</span><span class="w"> </span>-print0<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-0t<span class="w"> </span>-I<span class="w"> </span>srcd<span class="w"> </span>cp<span class="w"> </span>-v<span class="w"> </span>srcd<span class="w"> </span>~/Downloads/dependencies
</span><span id="__span-110-3"><a id="__codelineno-110-3" name="__codelineno-110-3" href="#__codelineno-110-3"></a>cp<span class="w"> </span>-v<span class="w"> </span>./cDACoreOperateCallBack.d<span class="w"> </span>/Users/faner/Downloads/dependencies
</span><span id="__span-110-4"><a id="__codelineno-110-4" name="__codelineno-110-4" href="#__codelineno-110-4"></a>./cDACoreOperateCallBack.d<span class="w"> </span>-&gt;<span class="w"> </span>/Users/faner/Downloads/dependencies/cDACoreOperateCallBack.d
</span><span id="__span-110-5"><a id="__codelineno-110-5" name="__codelineno-110-5" href="#__codelineno-110-5"></a>cp<span class="w"> </span>-v<span class="w"> </span>./cDACoreListenerCallBack.d<span class="w"> </span>/Users/faner/Downloads/dependencies
</span><span id="__span-110-6"><a id="__codelineno-110-6" name="__codelineno-110-6" href="#__codelineno-110-6"></a>./cDACoreListenerCallBack.d<span class="w"> </span>-&gt;<span class="w"> </span>/Users/faner/Downloads/dependencies/cDACoreListenerCallBack.d
</span><span id="__span-110-7"><a id="__codelineno-110-7" name="__codelineno-110-7" href="#__codelineno-110-7"></a>...
</span></code></pre></div>
<blockquote>
<p>思考：xargs 如何一次性传递多个参数给后面的 utility 命令呢？这涉及到 <code>xargs -n</code> 分段划批和 Bash Shell 命令参数列表。</p>
</blockquote>
<h4 id="edit_files">edit files<a class="headerlink" href="#edit_files" title="Permanent link">#</a></h4>
<p>经常需要将某个目录中的所有符合条件的文件内的一部分文本进行替换，例如在网站的源文件目录中替换一个URI。</p>
<p>场景：遍历项目目录下的所有.cpp文件，并将每个.cpp文件中的 Copyright 替换成 Copyleft。</p>
<p>可以使用find命令的 <code>-exec</code> 选项执行 sed 命令对每个查找到的文件执行查找替换：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-111-1"><a id="__codelineno-111-1" name="__codelineno-111-1" href="#__codelineno-111-1"></a><span class="c1"># 为每个查找到的文件调用一次sed</span>
</span><span id="__span-111-2"><a id="__codelineno-111-2" name="__codelineno-111-2" href="#__codelineno-111-2"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.cpp&quot;</span><span class="w"> </span>-exec<span class="w"> </span>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="s1">&#39;s/Copyright/Copyleft/g&#39;</span><span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\;</span>
</span><span id="__span-111-3"><a id="__codelineno-111-3" name="__codelineno-111-3" href="#__codelineno-111-3"></a><span class="c1"># 或者将多个文件名一并传递给sed</span>
</span><span id="__span-111-4"><a id="__codelineno-111-4" name="__codelineno-111-4" href="#__codelineno-111-4"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.cpp&quot;</span><span class="w"> </span>-exec<span class="w"> </span>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="s1">&#39;s/Copyright/Copyleft/g&#39;</span><span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\+</span>
</span></code></pre></div>
<p>当然，也可以对find结果重定向给 <code>| xargs -I{}</code> 作为参数调用 sed 编辑替换：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-112-1"><a id="__codelineno-112-1" name="__codelineno-112-1" href="#__codelineno-112-1"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.cpp&quot;</span><span class="w"> </span>-print0<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-0<span class="w"> </span>-I<span class="o">{}</span><span class="w"> </span>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="s1">&#39;s/Copyright/Copyleft/g&#39;</span><span class="w"> </span><span class="o">{}</span>
</span></code></pre></div>
<p>思考：如果头部没有包含 Copyright 或 Copyleft，如何在头部补插一条标准的版权声明呢？</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-113-1"><a id="__codelineno-113-1" name="__codelineno-113-1" href="#__codelineno-113-1"></a><span class="c1"># replstr = file</span>
</span><span id="__span-113-2"><a id="__codelineno-113-2" name="__codelineno-113-2" href="#__codelineno-113-2"></a>$<span class="w"> </span>find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.cpp&quot;</span><span class="w"> </span>-print0<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-0<span class="w"> </span>-I<span class="w"> </span>file<span class="w"> </span>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="s1">&#39;1i\</span>
</span><span id="__span-113-3"><a id="__codelineno-113-3" name="__codelineno-113-3" href="#__codelineno-113-3"></a><span class="s1">// Tencent is pleased to support the open source community by making Mars available.\</span>
</span><span id="__span-113-4"><a id="__codelineno-113-4" name="__codelineno-113-4" href="#__codelineno-113-4"></a><span class="s1">// Copyright (C) 2016 THL A29 Limited, a Tencent company. All rights reserved.\</span>
</span><span id="__span-113-5"><a id="__codelineno-113-5" name="__codelineno-113-5" href="#__codelineno-113-5"></a>
</span><span id="__span-113-6"><a id="__codelineno-113-6" name="__codelineno-113-6" href="#__codelineno-113-6"></a><span class="s1">&#39;</span><span class="w"> </span>file
</span></code></pre></div>
<h4 id="dos2unix">dos2unix<a class="headerlink" href="#dos2unix" title="Permanent link">#</a></h4>
<p>在 vim 下执行 <code>:%s/\r//g</code> 可将DOS文件中的回车符 <code>^M</code> 替换为空（即删除）。</p>
<p>dos2unix 批量替换方案：<code>find ./ -type f print0 | xargs -0 sed -i 's/^M$//'</code>。  </p>







  
  



  


  



  <h2 id="__comments">评论</h2>
  <!-- Insert generated snippet here -->
  <script src="https://giscus.app/client.js"
    data-repo="fan2/mkdocs"
    data-repo-id="R_kgDOLltxSg"
    data-category="Announcements"
    data-category-id="DIC_kwDOLltxSs4CeURH"
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="1"
    data-input-position="top"
    data-theme="preferred_color_scheme"
    data-lang="zh-CN"
    data-loading="lazy"
    crossorigin="anonymous"
    async>
  </script>

  <!-- Synchronize Giscus theme with palette -->
  <script>
    var giscus = document.querySelector("script[src*=giscus]")

    // Set palette on initial load
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate"
        ? "transparent_dark"
        : "light"

      // Instruct Giscus to set theme
      giscus.setAttribute("data-theme", theme) 
    }

    // Register event handlers after documented loaded
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate"
            ? "transparent_dark"
            : "light"

          // Instruct Giscus to change theme
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>

      
    </article>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
        
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../linux-cmd-ps-kill/" class="md-footer__link md-footer__link--prev" aria-label="上一页: Linux Command - ps, kill">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                Linux Command - ps, kill
              </div>
            </div>
          </a>
        
        
          
          <a href="../linux-cmd-split-merge/" class="md-footer__link md-footer__link--next" aria-label="下一页: Linux Command - file split &amp; merge">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                Linux Command - file split & merge
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024- Cliff Fan
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["toc.follow", "header.autohide", "navigation.tabs", "navigation.top", "navigation.footer", "navigation.tracking", "content.code.copy", "content.code.select", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.bd41221c.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://vercount.one/js"></script>
      
    
  </body>
</html>