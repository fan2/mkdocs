
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="在别处或在路上">
      
      
        <meta name="author" content="Cliff Fan">
      
      
        <link rel="canonical" href="https://duetorun.com/blog/20240318/rclone-access-webdav/">
      
      
        <link rel="prev" href="../ubuntu-install-nginx-full-config-webdav/">
      
      
        <link rel="next" href="../nginx-control/">
      
      
      <link rel="icon" href="../../../assets/hold_yourself.jpg">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.15">
    
    
      
        <title>使用rclone访问操作WebDav云盘并配置crontab定时自动同步 - ElseWhere</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-XGW41EGL31"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-XGW41EGL31",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-XGW41EGL31",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#install" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="ElseWhere" class="md-header__button md-logo" aria-label="ElseWhere" data-md-component="logo">
      
  <img src="../../../assets/hold_yourself.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ElseWhere
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              使用rclone访问操作WebDav云盘并配置crontab定时自动同步
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8v2m9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.71-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../about/" class="md-tabs__link">
        
  
    
  
  About

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  Blog

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../link/" class="md-tabs__link">
        
  
    
  
  Link

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="ElseWhere" class="md-nav__button md-logo" aria-label="ElseWhere" data-md-component="logo">
      
  <img src="../../../assets/hold_yourself.jpg" alt="logo">

    </a>
    ElseWhere
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Blog
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      <a href="../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Archive
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2024/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2024
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2022/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2022
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2019/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2019
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2018/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2018
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2017/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2017
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2015/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2015
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Categories
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/command/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    command
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/editor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    editor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/excerpt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    excerpt
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/git/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    git
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/linux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    linux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/macos/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    macOS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/markdown/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    markdown
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/material/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    material
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/mkdocs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mkdocs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/nginx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nginx
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/samba/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    samba
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/shell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    shell
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/ubuntu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ubuntu
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/vim/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vim
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/webdav/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    webDAV
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/wiki/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    wiki
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/zsh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    zsh
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../link/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Link
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#install" class="md-nav__link">
    <span class="md-ellipsis">
      install
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docs" class="md-nav__link">
    <span class="md-ellipsis">
      docs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#config" class="md-nav__link">
    <span class="md-ellipsis">
      config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#config_webdav" class="md-nav__link">
    <span class="md-ellipsis">
      config webdav
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#config_show" class="md-nav__link">
    <span class="md-ellipsis">
      config show
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ls" class="md-nav__link">
    <span class="md-ellipsis">
      ls
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mkdir" class="md-nav__link">
    <span class="md-ellipsis">
      mkdir
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#copy" class="md-nav__link">
    <span class="md-ellipsis">
      copy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="copy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#upload_from_local" class="md-nav__link">
    <span class="md-ellipsis">
      upload from local
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#download_from_remote" class="md-nav__link">
    <span class="md-ellipsis">
      download from remote
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server-side_copy" class="md-nav__link">
    <span class="md-ellipsis">
      server-side copy
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#move" class="md-nav__link">
    <span class="md-ellipsis">
      move
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deletermdirpurge" class="md-nav__link">
    <span class="md-ellipsis">
      delete/rmdir/purge
    </span>
  </a>
  
    <nav class="md-nav" aria-label="delete/rmdir/purge">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#delete" class="md-nav__link">
    <span class="md-ellipsis">
      delete
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rmdir" class="md-nav__link">
    <span class="md-ellipsis">
      rmdir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#purge" class="md-nav__link">
    <span class="md-ellipsis">
      purge
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#syncbisync" class="md-nav__link">
    <span class="md-ellipsis">
      sync/bisync
    </span>
  </a>
  
    <nav class="md-nav" aria-label="sync/bisync">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sync" class="md-nav__link">
    <span class="md-ellipsis">
      sync
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bisync" class="md-nav__link">
    <span class="md-ellipsis">
      bisync
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crontab" class="md-nav__link">
    <span class="md-ellipsis">
      crontab
    </span>
  </a>
  
    <nav class="md-nav" aria-label="crontab">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ubuntu" class="md-nav__link">
    <span class="md-ellipsis">
      ubuntu
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#macos" class="md-nav__link">
    <span class="md-ellipsis">
      macOS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check_logs" class="md-nav__link">
    <span class="md-ellipsis">
      check logs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#refs" class="md-nav__link">
    <span class="md-ellipsis">
      refs
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content md-content--post" data-md-component="content">
    <div class="md-sidebar md-sidebar--post" data-md-component="sidebar" data-md-type="navigation">
      <div class="md-sidebar__scrollwrap">
        <div class="md-sidebar__inner md-post">
          <nav class="md-nav md-nav--primary">
            <div class="md-post__back">
              <div class="md-nav__title md-nav__container">
                <a href="../../" class="md-nav__link">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
                  <span class="md-ellipsis">
                    回到主页
                  </span>
                </a>
              </div>
            </div>
            
              <div class="md-post__authors md-typeset">
                
                  <div class="md-profile md-post__profile">
                    <span class="md-author md-author--long">
                      <img src="https://duetorun.com/assets/carve_yourself.jpg" alt="Cliff Fan">
                    </span>
                    <span class="md-profile__description">
                      <strong>
                        
                          Cliff Fan
                        
                      </strong>
                      <br>
                      Just do IT
                    </span>
                  </div>
                
              </div>
            
            <ul class="md-post__meta md-nav__list">
              <li class="md-nav__item md-nav__item--section">
                <div class="md-post__title">
                  <span class="md-ellipsis">
                    元数据
                  </span>
                </div>
                <nav class="md-nav">
                  <ul class="md-nav__list">
                    <li class="md-nav__item">
                      <div class="md-nav__link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5v-5Z"/></svg>
                        <time datetime="2024-03-18 15:30:00" class="md-ellipsis">2024年3月18日</time>
                      </div>
                    </li>
                    
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15 13h1.5v2.82l2.44 1.41-.75 1.3L15 16.69V13m4-5H5v11h4.67c-.43-.91-.67-1.93-.67-3a7 7 0 0 1 7-7c1.07 0 2.09.24 3 .67V8M5 21a2 2 0 0 1-2-2V5c0-1.11.89-2 2-2h1V1h2v2h8V1h2v2h1a2 2 0 0 1 2 2v6.1c1.24 1.26 2 2.99 2 4.9a7 7 0 0 1-7 7c-1.91 0-3.64-.76-4.9-2H5m11-9.85A4.85 4.85 0 0 0 11.15 16c0 2.68 2.17 4.85 4.85 4.85A4.85 4.85 0 0 0 20.85 16c0-2.68-2.17-4.85-4.85-4.85Z"/></svg>
                          <time datetime="2024-04-11 12:00:00" class="md-ellipsis">2024年4月11日</time>
                        </div>
                      </li>
                    
                    
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 3v15h3V3H9m3 2 4 13 3-1-4-13-3 1M5 5v13h3V5H5M3 19v2h18v-2H3Z"/></svg>
                          <span class="md-ellipsis">
                            分类于
                            
                              <a href="../../category/macos/">macOS</a>, 
                              <a href="../../category/ubuntu/">ubuntu</a>, 
                              <a href="../../category/webdav/">webDAV</a></span>
                        </div>
                      </li>
                    
                    
                      
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10 10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67-.75 1.23L11 13V7h1.5Z"/></svg>
                          <span class="md-ellipsis">
                            
                              需要 22 分钟阅读时间
                            
                          </span>
                        </div>
                      </li>
                    
                    <!-- Add by Cliff.Fan, 29Mar24. -->
                    <li class="md-nav__item">
                      <div class="md-nav__link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m19 1-5 5v11l5-4.5V1m2 4v13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6c-1.45-1.1-3.55-1.5-5.5-1.5-1.95 0-4.05.4-5.5 1.5v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1M10 18.41C8.75 18.09 7.5 18 6.5 18c-1.06 0-2.32.19-3.5.5V7.13c.91-.4 2.14-.63 3.5-.63 1.36 0 2.59.23 3.5.63v11.28Z"/></svg>
                        <span class="md-ellipsis" id="busuanzi_container_page_pv">
                          阅读量：<span id="busuanzi_value_page_pv">N/A</span>
                        </span>
                      </div>
                    </li>
                  </ul>
                </nav>
              </li>
            </ul>
          </nav>
          
        </div>
      </div>
    </div>
    <article class="md-content__inner md-typeset">
      
        
  
  

<nav class="md-tags" >
  
    
    
    
      <span class="md-tag">webDAV</span>
    
  
    
    
    
      <span class="md-tag">rclone</span>
    
  
</nav>



  <h1>使用rclone访问操作WebDav云盘并配置crontab定时自动同步</h1>

<p>在 <a href="../../20240317/cmd-mount-webdav/">使用命令行挂载操作WebDav云盘</a> 中梳理了 macOS/Linux 下调用 mount 命令挂载 WebDAV 云盘到本地的基本操作，并且示例了如何使用 curl 命令行访问操作 WebDAV 云盘。</p>
<p>本文让我们来看一看如何使用强大的 <a href="https://rclone.org/">rclone</a> 命令行工具配置挂载 WebDAV 云盘，并对标 curl 梳理 rclone 访问操控 webDAV 云盘的常用命令。</p>
<p>最后，在 macOS/ubuntu 下使用 cron 配置定时任务（crontab），实现本地与云盘之间同步备份自动化。</p>
<!-- more -->

<div class="admonition note">
<p class="admonition-title">rclone works like a charm!</p>
<p><a href="https://rclone.org/">rclone</a>: Rclone syncs your files to cloud storage</p>
<p>Users call rclone "The Swiss army knife of cloud storage", and "Technology indistinguishable from magic".</p>
</div>
<p>Rclone has powerful cloud equivalents to the unix commands <code>rsync</code>, <code>cp</code>, <code>mv</code>, <code>mount</code>, <code>ls</code>, <code>ncdu</code>, <code>tree</code>, <code>rm</code>, and <code>cat</code>. Rclone's familiar syntax includes shell pipeline support, and <code>--dry-run</code> protection. It is used at the command line, in scripts or via its API.</p>
<p>Rclone mounts any local, cloud or virtual filesystem as a disk on Windows, macOS, linux and FreeBSD, and also serves these over SFTP, HTTP, WebDAV, FTP and DLNA.</p>
<p>Rclone is mature, open-source software originally inspired by rsync and written in <a href="https://golang.org/">Go</a>.</p>
<h2 id="install">install<a class="headerlink" href="#install" title="Permanent link">#</a></h2>
<p>macOS 下使用包管理器 <code>brew</code> 搜索安装 rclone；ubuntu 下使用包管理器 <code>apt</code> 搜索安装 rclone。</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">macOS</label><label for="__tabbed_1_2">ubuntu</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<ul>
<li><code>brew search rclone</code>: 搜索 rclone 包</li>
<li><code>brew info rclone</code>: 显示 rclone 包信息</li>
<li><code>brew install rclone</code>: 安装 rclone</li>
</ul>
</div>
<div class="tabbed-block">
<ul>
<li><code>apt search rclone</code>: 搜索 rclone 相关包</li>
<li><code>apt list rclone</code>: 搜索匹配包名 rclone</li>
<li><code>apt show rclone</code>: 显示 rclone 包详细信息</li>
<li><code>[sudo] apt install rclone</code>: 安装 rclone</li>
</ul>
</div>
</div>
</div>
<p>安装完成后，执行 <code>rclone version</code> 查看版本信息：</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">macOS</label><label for="__tabbed_2_2">ubuntu</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>version
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>rclone<span class="w"> </span>v1.66.0
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>-<span class="w"> </span>os/version:<span class="w"> </span>darwin<span class="w"> </span><span class="m">14</span>.5<span class="w"> </span><span class="o">(</span><span class="m">64</span><span class="w"> </span>bit<span class="o">)</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>-<span class="w"> </span>os/kernel:<span class="w"> </span><span class="m">23</span>.5.0<span class="w"> </span><span class="o">(</span>x86_64<span class="o">)</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>-<span class="w"> </span>os/type:<span class="w"> </span>darwin
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>-<span class="w"> </span>os/arch:<span class="w"> </span>amd64
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>-<span class="w"> </span>go/version:<span class="w"> </span>go1.22.1
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>-<span class="w"> </span>go/linking:<span class="w"> </span>dynamic
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>-<span class="w"> </span>go/tags:<span class="w"> </span>none
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>version
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>rclone<span class="w"> </span>v1.53.3-DEV
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>-<span class="w"> </span>os/arch:<span class="w"> </span>linux/arm64
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>-<span class="w"> </span>go<span class="w"> </span>version:<span class="w"> </span>go1.18.1
</span></code></pre></div>
</div>
</div>
</div>
<p>执行 <code>rclone config paths</code>、<code>rclone config show</code> 查看配置信息。</p>
<h2 id="docs">docs<a class="headerlink" href="#docs" title="Permanent link">#</a></h2>
<p><a href="https://rclone.org/overview/#optional-features">Overview of cloud storage systems</a></p>
<ul>
<li><a href="https://rclone.org/local/">Local Filesystem</a></li>
<li><a href="https://rclone.org/webdav/">WebDAV</a></li>
</ul>
<p><a href="https://rclone.org/commands/">Commands Index</a></p>
<ul>
<li>This is an index of all commands in rclone. Run <code>rclone command --help</code> to see the help for that command.</li>
</ul>
<p><a href="https://rclone.org/commands/rclone_mount/">rclone mount</a> / <a href="https://rclone.org/commands/rclone_nfsmount/">nfsmount</a></p>
<p><a href="https://rclone.org/commands/rclone_serve/">rclone serve</a> - <a href="https://rclone.org/commands/rclone_serve_webdav/">webdav</a></p>
<p><a href="https://rclone.org/rc/">Remote Control / API</a> - <a href="https://rclone.org/gui/">GUI</a></p>
<p><a href="https://rclone.org/docs/">Usage</a>: <a href="https://rclone.org/filtering/">Filtering</a>, <a href="https://rclone.org/flags/">Flags</a></p>
<h2 id="config">config<a class="headerlink" href="#config" title="Permanent link">#</a></h2>
<p>在命令行输入 <code>rclone config</code> 进入交互式配置会话。</p>
<h3 id="config_webdav">config webdav<a class="headerlink" href="#config_webdav" title="Permanent link">#</a></h3>
<p>以下使用 <code>rclone config</code> 交互式配置 webDAV 服务，其中高亮行是交互输入。</p>
<details class="note">
<summary>rclone config webdav</summary>
<div class="language-Shell highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">  1</a></span>
<span class="normal"><a href="#__codelineno-2-2">  2</a></span>
<span class="normal"><a href="#__codelineno-2-3">  3</a></span>
<span class="normal"><a href="#__codelineno-2-4">  4</a></span>
<span class="normal"><a href="#__codelineno-2-5">  5</a></span>
<span class="normal"><a href="#__codelineno-2-6">  6</a></span>
<span class="normal"><a href="#__codelineno-2-7">  7</a></span>
<span class="normal"><a href="#__codelineno-2-8">  8</a></span>
<span class="normal"><a href="#__codelineno-2-9">  9</a></span>
<span class="normal"><a href="#__codelineno-2-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-2-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-2-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-2-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-2-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-2-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-2-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-2-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-2-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-2-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-2-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-2-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-2-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-2-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-2-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-2-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-2-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-2-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-2-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-2-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-2-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-2-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-2-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-2-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-2-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-2-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-2-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-2-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-2-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-2-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-2-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-2-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-2-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-2-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-2-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-2-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-2-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-2-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-2-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-2-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-2-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-2-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-2-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-2-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-2-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-2-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-2-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-2-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-2-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-2-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-2-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-2-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-2-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-2-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-2-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-2-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-2-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-2-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-2-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-2-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-2-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-2-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-2-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-2-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-2-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-2-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-2-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-2-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-2-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-2-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-2-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-2-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-2-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-2-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-2-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-2-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-2-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-2-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-2-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-2-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-2-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-2-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-2-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-2-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-2-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-2-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-2-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-2-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-2-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-2-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-2-100">100</a></span>
<span class="normal"><a href="#__codelineno-2-101">101</a></span>
<span class="normal"><a href="#__codelineno-2-102">102</a></span>
<span class="normal"><a href="#__codelineno-2-103">103</a></span>
<span class="normal"><a href="#__codelineno-2-104">104</a></span>
<span class="normal"><a href="#__codelineno-2-105">105</a></span>
<span class="normal"><a href="#__codelineno-2-106">106</a></span>
<span class="normal"><a href="#__codelineno-2-107">107</a></span>
<span class="normal"><a href="#__codelineno-2-108">108</a></span>
<span class="normal"><a href="#__codelineno-2-109">109</a></span>
<span class="normal"><a href="#__codelineno-2-110">110</a></span>
<span class="normal"><a href="#__codelineno-2-111">111</a></span>
<span class="normal"><a href="#__codelineno-2-112">112</a></span>
<span class="normal"><a href="#__codelineno-2-113">113</a></span>
<span class="normal"><a href="#__codelineno-2-114">114</a></span>
<span class="normal"><a href="#__codelineno-2-115">115</a></span>
<span class="normal"><a href="#__codelineno-2-116">116</a></span>
<span class="normal"><a href="#__codelineno-2-117">117</a></span>
<span class="normal"><a href="#__codelineno-2-118">118</a></span>
<span class="normal"><a href="#__codelineno-2-119">119</a></span>
<span class="normal"><a href="#__codelineno-2-120">120</a></span>
<span class="normal"><a href="#__codelineno-2-121">121</a></span>
<span class="normal"><a href="#__codelineno-2-122">122</a></span>
<span class="normal"><a href="#__codelineno-2-123">123</a></span>
<span class="normal"><a href="#__codelineno-2-124">124</a></span>
<span class="normal"><a href="#__codelineno-2-125">125</a></span>
<span class="normal"><a href="#__codelineno-2-126">126</a></span>
<span class="normal"><a href="#__codelineno-2-127">127</a></span>
<span class="normal"><a href="#__codelineno-2-128">128</a></span>
<span class="normal"><a href="#__codelineno-2-129">129</a></span>
<span class="normal"><a href="#__codelineno-2-130">130</a></span>
<span class="normal"><a href="#__codelineno-2-131">131</a></span>
<span class="normal"><a href="#__codelineno-2-132">132</a></span>
<span class="normal"><a href="#__codelineno-2-133">133</a></span>
<span class="normal"><a href="#__codelineno-2-134">134</a></span>
<span class="normal"><a href="#__codelineno-2-135">135</a></span>
<span class="normal"><a href="#__codelineno-2-136">136</a></span>
<span class="normal"><a href="#__codelineno-2-137">137</a></span>
<span class="normal"><a href="#__codelineno-2-138">138</a></span>
<span class="normal"><a href="#__codelineno-2-139">139</a></span>
<span class="normal"><a href="#__codelineno-2-140">140</a></span>
<span class="normal"><a href="#__codelineno-2-141">141</a></span>
<span class="normal"><a href="#__codelineno-2-142">142</a></span>
<span class="normal"><a href="#__codelineno-2-143">143</a></span>
<span class="normal"><a href="#__codelineno-2-144">144</a></span>
<span class="normal"><a href="#__codelineno-2-145">145</a></span>
<span class="normal"><a href="#__codelineno-2-146">146</a></span>
<span class="normal"><a href="#__codelineno-2-147">147</a></span>
<span class="normal"><a href="#__codelineno-2-148">148</a></span>
<span class="normal"><a href="#__codelineno-2-149">149</a></span>
<span class="normal"><a href="#__codelineno-2-150">150</a></span>
<span class="normal"><a href="#__codelineno-2-151">151</a></span>
<span class="normal"><a href="#__codelineno-2-152">152</a></span>
<span class="normal"><a href="#__codelineno-2-153">153</a></span>
<span class="normal"><a href="#__codelineno-2-154">154</a></span>
<span class="normal"><a href="#__codelineno-2-155">155</a></span>
<span class="normal"><a href="#__codelineno-2-156">156</a></span>
<span class="normal"><a href="#__codelineno-2-157">157</a></span>
<span class="normal"><a href="#__codelineno-2-158">158</a></span>
<span class="normal"><a href="#__codelineno-2-159">159</a></span>
<span class="normal"><a href="#__codelineno-2-160">160</a></span>
<span class="normal"><a href="#__codelineno-2-161">161</a></span>
<span class="normal"><a href="#__codelineno-2-162">162</a></span>
<span class="normal"><a href="#__codelineno-2-163">163</a></span>
<span class="normal"><a href="#__codelineno-2-164">164</a></span>
<span class="normal"><a href="#__codelineno-2-165">165</a></span>
<span class="normal"><a href="#__codelineno-2-166">166</a></span>
<span class="normal"><a href="#__codelineno-2-167">167</a></span>
<span class="normal"><a href="#__codelineno-2-168">168</a></span>
<span class="normal"><a href="#__codelineno-2-169">169</a></span>
<span class="normal"><a href="#__codelineno-2-170">170</a></span>
<span class="normal"><a href="#__codelineno-2-171">171</a></span>
<span class="normal"><a href="#__codelineno-2-172">172</a></span>
<span class="normal"><a href="#__codelineno-2-173">173</a></span>
<span class="normal"><a href="#__codelineno-2-174">174</a></span>
<span class="normal"><a href="#__codelineno-2-175">175</a></span>
<span class="normal"><a href="#__codelineno-2-176">176</a></span>
<span class="normal"><a href="#__codelineno-2-177">177</a></span>
<span class="normal"><a href="#__codelineno-2-178">178</a></span>
<span class="normal"><a href="#__codelineno-2-179">179</a></span>
<span class="normal"><a href="#__codelineno-2-180">180</a></span>
<span class="normal"><a href="#__codelineno-2-181">181</a></span>
<span class="normal"><a href="#__codelineno-2-182">182</a></span>
<span class="normal"><a href="#__codelineno-2-183">183</a></span>
<span class="normal"><a href="#__codelineno-2-184">184</a></span>
<span class="normal"><a href="#__codelineno-2-185">185</a></span>
<span class="normal"><a href="#__codelineno-2-186">186</a></span>
<span class="normal"><a href="#__codelineno-2-187">187</a></span>
<span class="normal"><a href="#__codelineno-2-188">188</a></span>
<span class="normal"><a href="#__codelineno-2-189">189</a></span>
<span class="normal"><a href="#__codelineno-2-190">190</a></span>
<span class="normal"><a href="#__codelineno-2-191">191</a></span>
<span class="normal"><a href="#__codelineno-2-192">192</a></span>
<span class="normal"><a href="#__codelineno-2-193">193</a></span>
<span class="normal"><a href="#__codelineno-2-194">194</a></span>
<span class="normal"><a href="#__codelineno-2-195">195</a></span>
<span class="normal"><a href="#__codelineno-2-196">196</a></span>
<span class="normal"><a href="#__codelineno-2-197">197</a></span>
<span class="normal"><a href="#__codelineno-2-198">198</a></span>
<span class="normal"><a href="#__codelineno-2-199">199</a></span>
<span class="normal"><a href="#__codelineno-2-200">200</a></span>
<span class="normal"><a href="#__codelineno-2-201">201</a></span>
<span class="normal"><a href="#__codelineno-2-202">202</a></span>
<span class="normal"><a href="#__codelineno-2-203">203</a></span>
<span class="normal"><a href="#__codelineno-2-204">204</a></span>
<span class="normal"><a href="#__codelineno-2-205">205</a></span>
<span class="normal"><a href="#__codelineno-2-206">206</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>config
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2"></a>No<span class="w"> </span>remotes<span class="w"> </span>found,<span class="w"> </span>make<span class="w"> </span>a<span class="w"> </span>new<span class="w"> </span>one?
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3"></a>n<span class="o">)</span><span class="w"> </span>New<span class="w"> </span>remote
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4"></a>s<span class="o">)</span><span class="w"> </span>Set<span class="w"> </span>configuration<span class="w"> </span>password
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5"></a>q<span class="o">)</span><span class="w"> </span>Quit<span class="w"> </span>config
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="hll">n/s/q&gt;<span class="w"> </span>n
</span></span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7"></a>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8"></a>Enter<span class="w"> </span>name<span class="w"> </span><span class="k">for</span><span class="w"> </span>new<span class="w"> </span>remote.
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="hll">name&gt;<span class="w"> </span>webdav@rpi4b
</span></span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10"></a>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11"></a>Option<span class="w"> </span>Storage.
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12"></a>Type<span class="w"> </span>of<span class="w"> </span>storage<span class="w"> </span>to<span class="w"> </span>configure.
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13"></a>Choose<span class="w"> </span>a<span class="w"> </span>number<span class="w"> </span>from<span class="w"> </span>below,<span class="w"> </span>or<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="k">in</span><span class="w"> </span>your<span class="w"> </span>own<span class="w"> </span>value.
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="m">1</span><span class="w"> </span>/<span class="w"> </span>1Fichier
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="se">\ </span><span class="o">(</span>fichier<span class="o">)</span>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16"></a><span class="m">2</span><span class="w"> </span>/<span class="w"> </span>Akamai<span class="w"> </span>NetStorage
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17"></a><span class="se">\ </span><span class="o">(</span>netstorage<span class="o">)</span>
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18"></a><span class="m">3</span><span class="w"> </span>/<span class="w"> </span>Alias<span class="w"> </span><span class="k">for</span><span class="w"> </span>an<span class="w"> </span>existing<span class="w"> </span>remote
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19"></a><span class="se">\ </span><span class="o">(</span><span class="nb">alias</span><span class="o">)</span>
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20"></a><span class="m">4</span><span class="w"> </span>/<span class="w"> </span>Amazon<span class="w"> </span>S3<span class="w"> </span>Compliant<span class="w"> </span>Storage<span class="w"> </span>Providers<span class="w"> </span>including<span class="w"> </span>AWS,<span class="w"> </span>Alibaba,<span class="w"> </span>ArvanCloud,<span class="w"> </span>Ceph,<span class="w"> </span>ChinaMobile,<span class="w"> </span>Cloudflare,<span class="w"> </span>DigitalOcean,<span class="w"> </span>Dreamhost,<span class="w"> </span>GCS,<span class="w"> </span>HuaweiOBS,<span class="w"> </span>IBMCOS,<span class="w"> </span>IDrive,<span class="w"> </span>IONOS,<span class="w"> </span>LyveCloud,<span class="w"> </span>Leviia,<span class="w"> </span>Liara,<span class="w"> </span>Linode,<span class="w"> </span>Minio,<span class="w"> </span>Netease,<span class="w"> </span>Petabox,<span class="w"> </span>RackCorp,<span class="w"> </span>Rclone,<span class="w"> </span>Scaleway,<span class="w"> </span>SeaweedFS,<span class="w"> </span>StackPath,<span class="w"> </span>Storj,<span class="w"> </span>Synology,<span class="w"> </span>TencentCOS,<span class="w"> </span>Wasabi,<span class="w"> </span>Qiniu<span class="w"> </span>and<span class="w"> </span>others
</span><span id="__span-2-21"><a id="__codelineno-2-21" name="__codelineno-2-21"></a><span class="se">\ </span><span class="o">(</span>s3<span class="o">)</span>
</span><span id="__span-2-22"><a id="__codelineno-2-22" name="__codelineno-2-22"></a><span class="m">5</span><span class="w"> </span>/<span class="w"> </span>Backblaze<span class="w"> </span>B2
</span><span id="__span-2-23"><a id="__codelineno-2-23" name="__codelineno-2-23"></a><span class="se">\ </span><span class="o">(</span>b2<span class="o">)</span>
</span><span id="__span-2-24"><a id="__codelineno-2-24" name="__codelineno-2-24"></a><span class="m">6</span><span class="w"> </span>/<span class="w"> </span>Better<span class="w"> </span>checksums<span class="w"> </span><span class="k">for</span><span class="w"> </span>other<span class="w"> </span>remotes
</span><span id="__span-2-25"><a id="__codelineno-2-25" name="__codelineno-2-25"></a><span class="se">\ </span><span class="o">(</span>hasher<span class="o">)</span>
</span><span id="__span-2-26"><a id="__codelineno-2-26" name="__codelineno-2-26"></a><span class="m">7</span><span class="w"> </span>/<span class="w"> </span>Box
</span><span id="__span-2-27"><a id="__codelineno-2-27" name="__codelineno-2-27"></a><span class="se">\ </span><span class="o">(</span>box<span class="o">)</span>
</span><span id="__span-2-28"><a id="__codelineno-2-28" name="__codelineno-2-28"></a><span class="m">8</span><span class="w"> </span>/<span class="w"> </span>Cache<span class="w"> </span>a<span class="w"> </span>remote
</span><span id="__span-2-29"><a id="__codelineno-2-29" name="__codelineno-2-29"></a><span class="se">\ </span><span class="o">(</span>cache<span class="o">)</span>
</span><span id="__span-2-30"><a id="__codelineno-2-30" name="__codelineno-2-30"></a><span class="m">9</span><span class="w"> </span>/<span class="w"> </span>Citrix<span class="w"> </span>Sharefile
</span><span id="__span-2-31"><a id="__codelineno-2-31" name="__codelineno-2-31"></a><span class="se">\ </span><span class="o">(</span>sharefile<span class="o">)</span>
</span><span id="__span-2-32"><a id="__codelineno-2-32" name="__codelineno-2-32"></a><span class="m">10</span><span class="w"> </span>/<span class="w"> </span>Combine<span class="w"> </span>several<span class="w"> </span>remotes<span class="w"> </span>into<span class="w"> </span>one
</span><span id="__span-2-33"><a id="__codelineno-2-33" name="__codelineno-2-33"></a><span class="se">\ </span><span class="o">(</span>combine<span class="o">)</span>
</span><span id="__span-2-34"><a id="__codelineno-2-34" name="__codelineno-2-34"></a><span class="m">11</span><span class="w"> </span>/<span class="w"> </span>Compress<span class="w"> </span>a<span class="w"> </span>remote
</span><span id="__span-2-35"><a id="__codelineno-2-35" name="__codelineno-2-35"></a><span class="se">\ </span><span class="o">(</span>compress<span class="o">)</span>
</span><span id="__span-2-36"><a id="__codelineno-2-36" name="__codelineno-2-36"></a><span class="m">12</span><span class="w"> </span>/<span class="w"> </span>Dropbox
</span><span id="__span-2-37"><a id="__codelineno-2-37" name="__codelineno-2-37"></a><span class="se">\ </span><span class="o">(</span>dropbox<span class="o">)</span>
</span><span id="__span-2-38"><a id="__codelineno-2-38" name="__codelineno-2-38"></a><span class="m">13</span><span class="w"> </span>/<span class="w"> </span>Encrypt/Decrypt<span class="w"> </span>a<span class="w"> </span>remote
</span><span id="__span-2-39"><a id="__codelineno-2-39" name="__codelineno-2-39"></a><span class="se">\ </span><span class="o">(</span>crypt<span class="o">)</span>
</span><span id="__span-2-40"><a id="__codelineno-2-40" name="__codelineno-2-40"></a><span class="m">14</span><span class="w"> </span>/<span class="w"> </span>Enterprise<span class="w"> </span>File<span class="w"> </span>Fabric
</span><span id="__span-2-41"><a id="__codelineno-2-41" name="__codelineno-2-41"></a><span class="se">\ </span><span class="o">(</span>filefabric<span class="o">)</span>
</span><span id="__span-2-42"><a id="__codelineno-2-42" name="__codelineno-2-42"></a><span class="m">15</span><span class="w"> </span>/<span class="w"> </span>FTP
</span><span id="__span-2-43"><a id="__codelineno-2-43" name="__codelineno-2-43"></a><span class="se">\ </span><span class="o">(</span>ftp<span class="o">)</span>
</span><span id="__span-2-44"><a id="__codelineno-2-44" name="__codelineno-2-44"></a><span class="m">16</span><span class="w"> </span>/<span class="w"> </span>Google<span class="w"> </span>Cloud<span class="w"> </span>Storage<span class="w"> </span><span class="o">(</span>this<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>Google<span class="w"> </span>Drive<span class="o">)</span>
</span><span id="__span-2-45"><a id="__codelineno-2-45" name="__codelineno-2-45"></a><span class="se">\ </span><span class="o">(</span>google<span class="w"> </span>cloud<span class="w"> </span>storage<span class="o">)</span>
</span><span id="__span-2-46"><a id="__codelineno-2-46" name="__codelineno-2-46"></a><span class="m">17</span><span class="w"> </span>/<span class="w"> </span>Google<span class="w"> </span>Drive
</span><span id="__span-2-47"><a id="__codelineno-2-47" name="__codelineno-2-47"></a><span class="se">\ </span><span class="o">(</span>drive<span class="o">)</span>
</span><span id="__span-2-48"><a id="__codelineno-2-48" name="__codelineno-2-48"></a><span class="m">18</span><span class="w"> </span>/<span class="w"> </span>Google<span class="w"> </span>Photos
</span><span id="__span-2-49"><a id="__codelineno-2-49" name="__codelineno-2-49"></a><span class="se">\ </span><span class="o">(</span>google<span class="w"> </span>photos<span class="o">)</span>
</span><span id="__span-2-50"><a id="__codelineno-2-50" name="__codelineno-2-50"></a><span class="m">19</span><span class="w"> </span>/<span class="w"> </span>HTTP
</span><span id="__span-2-51"><a id="__codelineno-2-51" name="__codelineno-2-51"></a><span class="se">\ </span><span class="o">(</span>http<span class="o">)</span>
</span><span id="__span-2-52"><a id="__codelineno-2-52" name="__codelineno-2-52"></a><span class="m">20</span><span class="w"> </span>/<span class="w"> </span>Hadoop<span class="w"> </span>distributed<span class="w"> </span>file<span class="w"> </span>system
</span><span id="__span-2-53"><a id="__codelineno-2-53" name="__codelineno-2-53"></a><span class="se">\ </span><span class="o">(</span>hdfs<span class="o">)</span>
</span><span id="__span-2-54"><a id="__codelineno-2-54" name="__codelineno-2-54"></a><span class="m">21</span><span class="w"> </span>/<span class="w"> </span>HiDrive
</span><span id="__span-2-55"><a id="__codelineno-2-55" name="__codelineno-2-55"></a><span class="se">\ </span><span class="o">(</span>hidrive<span class="o">)</span>
</span><span id="__span-2-56"><a id="__codelineno-2-56" name="__codelineno-2-56"></a><span class="m">22</span><span class="w"> </span>/<span class="w"> </span>ImageKit.io
</span><span id="__span-2-57"><a id="__codelineno-2-57" name="__codelineno-2-57"></a><span class="se">\ </span><span class="o">(</span>imagekit<span class="o">)</span>
</span><span id="__span-2-58"><a id="__codelineno-2-58" name="__codelineno-2-58"></a><span class="m">23</span><span class="w"> </span>/<span class="w"> </span>In<span class="w"> </span>memory<span class="w"> </span>object<span class="w"> </span>storage<span class="w"> </span>system.
</span><span id="__span-2-59"><a id="__codelineno-2-59" name="__codelineno-2-59"></a><span class="se">\ </span><span class="o">(</span>memory<span class="o">)</span>
</span><span id="__span-2-60"><a id="__codelineno-2-60" name="__codelineno-2-60"></a><span class="m">24</span><span class="w"> </span>/<span class="w"> </span>Internet<span class="w"> </span>Archive
</span><span id="__span-2-61"><a id="__codelineno-2-61" name="__codelineno-2-61"></a><span class="se">\ </span><span class="o">(</span>internetarchive<span class="o">)</span>
</span><span id="__span-2-62"><a id="__codelineno-2-62" name="__codelineno-2-62"></a><span class="m">25</span><span class="w"> </span>/<span class="w"> </span>Jottacloud
</span><span id="__span-2-63"><a id="__codelineno-2-63" name="__codelineno-2-63"></a><span class="se">\ </span><span class="o">(</span>jottacloud<span class="o">)</span>
</span><span id="__span-2-64"><a id="__codelineno-2-64" name="__codelineno-2-64"></a><span class="m">26</span><span class="w"> </span>/<span class="w"> </span>Koofr,<span class="w"> </span>Digi<span class="w"> </span>Storage<span class="w"> </span>and<span class="w"> </span>other<span class="w"> </span>Koofr-compatible<span class="w"> </span>storage<span class="w"> </span>providers
</span><span id="__span-2-65"><a id="__codelineno-2-65" name="__codelineno-2-65"></a><span class="se">\ </span><span class="o">(</span>koofr<span class="o">)</span>
</span><span id="__span-2-66"><a id="__codelineno-2-66" name="__codelineno-2-66"></a><span class="m">27</span><span class="w"> </span>/<span class="w"> </span>Linkbox
</span><span id="__span-2-67"><a id="__codelineno-2-67" name="__codelineno-2-67"></a><span class="se">\ </span><span class="o">(</span>linkbox<span class="o">)</span>
</span><span id="__span-2-68"><a id="__codelineno-2-68" name="__codelineno-2-68"></a><span class="m">28</span><span class="w"> </span>/<span class="w"> </span>Local<span class="w"> </span>Disk
</span><span id="__span-2-69"><a id="__codelineno-2-69" name="__codelineno-2-69"></a><span class="se">\ </span><span class="o">(</span><span class="nb">local</span><span class="o">)</span>
</span><span id="__span-2-70"><a id="__codelineno-2-70" name="__codelineno-2-70"></a><span class="m">29</span><span class="w"> </span>/<span class="w"> </span>Mail.ru<span class="w"> </span>Cloud
</span><span id="__span-2-71"><a id="__codelineno-2-71" name="__codelineno-2-71"></a><span class="se">\ </span><span class="o">(</span>mailru<span class="o">)</span>
</span><span id="__span-2-72"><a id="__codelineno-2-72" name="__codelineno-2-72"></a><span class="m">30</span><span class="w"> </span>/<span class="w"> </span>Mega
</span><span id="__span-2-73"><a id="__codelineno-2-73" name="__codelineno-2-73"></a><span class="se">\ </span><span class="o">(</span>mega<span class="o">)</span>
</span><span id="__span-2-74"><a id="__codelineno-2-74" name="__codelineno-2-74"></a><span class="m">31</span><span class="w"> </span>/<span class="w"> </span>Microsoft<span class="w"> </span>Azure<span class="w"> </span>Blob<span class="w"> </span>Storage
</span><span id="__span-2-75"><a id="__codelineno-2-75" name="__codelineno-2-75"></a><span class="se">\ </span><span class="o">(</span>azureblob<span class="o">)</span>
</span><span id="__span-2-76"><a id="__codelineno-2-76" name="__codelineno-2-76"></a><span class="m">32</span><span class="w"> </span>/<span class="w"> </span>Microsoft<span class="w"> </span>Azure<span class="w"> </span>Files
</span><span id="__span-2-77"><a id="__codelineno-2-77" name="__codelineno-2-77"></a><span class="se">\ </span><span class="o">(</span>azurefiles<span class="o">)</span>
</span><span id="__span-2-78"><a id="__codelineno-2-78" name="__codelineno-2-78"></a><span class="m">33</span><span class="w"> </span>/<span class="w"> </span>Microsoft<span class="w"> </span>OneDrive
</span><span id="__span-2-79"><a id="__codelineno-2-79" name="__codelineno-2-79"></a><span class="se">\ </span><span class="o">(</span>onedrive<span class="o">)</span>
</span><span id="__span-2-80"><a id="__codelineno-2-80" name="__codelineno-2-80"></a><span class="m">34</span><span class="w"> </span>/<span class="w"> </span>OpenDrive
</span><span id="__span-2-81"><a id="__codelineno-2-81" name="__codelineno-2-81"></a><span class="se">\ </span><span class="o">(</span>opendrive<span class="o">)</span>
</span><span id="__span-2-82"><a id="__codelineno-2-82" name="__codelineno-2-82"></a><span class="m">35</span><span class="w"> </span>/<span class="w"> </span>OpenStack<span class="w"> </span>Swift<span class="w"> </span><span class="o">(</span>Rackspace<span class="w"> </span>Cloud<span class="w"> </span>Files,<span class="w"> </span>Blomp<span class="w"> </span>Cloud<span class="w"> </span>Storage,<span class="w"> </span>Memset<span class="w"> </span>Memstore,<span class="w"> </span>OVH<span class="o">)</span>
</span><span id="__span-2-83"><a id="__codelineno-2-83" name="__codelineno-2-83"></a><span class="se">\ </span><span class="o">(</span>swift<span class="o">)</span>
</span><span id="__span-2-84"><a id="__codelineno-2-84" name="__codelineno-2-84"></a><span class="m">36</span><span class="w"> </span>/<span class="w"> </span>Oracle<span class="w"> </span>Cloud<span class="w"> </span>Infrastructure<span class="w"> </span>Object<span class="w"> </span>Storage
</span><span id="__span-2-85"><a id="__codelineno-2-85" name="__codelineno-2-85"></a><span class="se">\ </span><span class="o">(</span>oracleobjectstorage<span class="o">)</span>
</span><span id="__span-2-86"><a id="__codelineno-2-86" name="__codelineno-2-86"></a><span class="m">37</span><span class="w"> </span>/<span class="w"> </span>Pcloud
</span><span id="__span-2-87"><a id="__codelineno-2-87" name="__codelineno-2-87"></a><span class="se">\ </span><span class="o">(</span>pcloud<span class="o">)</span>
</span><span id="__span-2-88"><a id="__codelineno-2-88" name="__codelineno-2-88"></a><span class="m">38</span><span class="w"> </span>/<span class="w"> </span>PikPak
</span><span id="__span-2-89"><a id="__codelineno-2-89" name="__codelineno-2-89"></a><span class="se">\ </span><span class="o">(</span>pikpak<span class="o">)</span>
</span><span id="__span-2-90"><a id="__codelineno-2-90" name="__codelineno-2-90"></a><span class="m">39</span><span class="w"> </span>/<span class="w"> </span>Proton<span class="w"> </span>Drive
</span><span id="__span-2-91"><a id="__codelineno-2-91" name="__codelineno-2-91"></a><span class="se">\ </span><span class="o">(</span>protondrive<span class="o">)</span>
</span><span id="__span-2-92"><a id="__codelineno-2-92" name="__codelineno-2-92"></a><span class="m">40</span><span class="w"> </span>/<span class="w"> </span>Put.io
</span><span id="__span-2-93"><a id="__codelineno-2-93" name="__codelineno-2-93"></a><span class="se">\ </span><span class="o">(</span>putio<span class="o">)</span>
</span><span id="__span-2-94"><a id="__codelineno-2-94" name="__codelineno-2-94"></a><span class="m">41</span><span class="w"> </span>/<span class="w"> </span>QingCloud<span class="w"> </span>Object<span class="w"> </span>Storage
</span><span id="__span-2-95"><a id="__codelineno-2-95" name="__codelineno-2-95"></a><span class="se">\ </span><span class="o">(</span>qingstor<span class="o">)</span>
</span><span id="__span-2-96"><a id="__codelineno-2-96" name="__codelineno-2-96"></a><span class="m">42</span><span class="w"> </span>/<span class="w"> </span>Quatrix<span class="w"> </span>by<span class="w"> </span>Maytech
</span><span id="__span-2-97"><a id="__codelineno-2-97" name="__codelineno-2-97"></a><span class="se">\ </span><span class="o">(</span>quatrix<span class="o">)</span>
</span><span id="__span-2-98"><a id="__codelineno-2-98" name="__codelineno-2-98"></a><span class="m">43</span><span class="w"> </span>/<span class="w"> </span>SMB<span class="w"> </span>/<span class="w"> </span>CIFS
</span><span id="__span-2-99"><a id="__codelineno-2-99" name="__codelineno-2-99"></a><span class="se">\ </span><span class="o">(</span>smb<span class="o">)</span>
</span><span id="__span-2-100"><a id="__codelineno-2-100" name="__codelineno-2-100"></a><span class="m">44</span><span class="w"> </span>/<span class="w"> </span>SSH/SFTP
</span><span id="__span-2-101"><a id="__codelineno-2-101" name="__codelineno-2-101"></a><span class="se">\ </span><span class="o">(</span>sftp<span class="o">)</span>
</span><span id="__span-2-102"><a id="__codelineno-2-102" name="__codelineno-2-102"></a><span class="m">45</span><span class="w"> </span>/<span class="w"> </span>Sia<span class="w"> </span>Decentralized<span class="w"> </span>Cloud
</span><span id="__span-2-103"><a id="__codelineno-2-103" name="__codelineno-2-103"></a><span class="se">\ </span><span class="o">(</span>sia<span class="o">)</span>
</span><span id="__span-2-104"><a id="__codelineno-2-104" name="__codelineno-2-104"></a><span class="m">46</span><span class="w"> </span>/<span class="w"> </span>Storj<span class="w"> </span>Decentralized<span class="w"> </span>Cloud<span class="w"> </span>Storage
</span><span id="__span-2-105"><a id="__codelineno-2-105" name="__codelineno-2-105"></a><span class="se">\ </span><span class="o">(</span>storj<span class="o">)</span>
</span><span id="__span-2-106"><a id="__codelineno-2-106" name="__codelineno-2-106"></a><span class="m">47</span><span class="w"> </span>/<span class="w"> </span>Sugarsync
</span><span id="__span-2-107"><a id="__codelineno-2-107" name="__codelineno-2-107"></a><span class="se">\ </span><span class="o">(</span>sugarsync<span class="o">)</span>
</span><span id="__span-2-108"><a id="__codelineno-2-108" name="__codelineno-2-108"></a><span class="m">48</span><span class="w"> </span>/<span class="w"> </span>Transparently<span class="w"> </span>chunk/split<span class="w"> </span>large<span class="w"> </span>files
</span><span id="__span-2-109"><a id="__codelineno-2-109" name="__codelineno-2-109"></a><span class="se">\ </span><span class="o">(</span>chunker<span class="o">)</span>
</span><span id="__span-2-110"><a id="__codelineno-2-110" name="__codelineno-2-110"></a><span class="m">49</span><span class="w"> </span>/<span class="w"> </span>Union<span class="w"> </span>merges<span class="w"> </span>the<span class="w"> </span>contents<span class="w"> </span>of<span class="w"> </span>several<span class="w"> </span>upstream<span class="w"> </span>fs
</span><span id="__span-2-111"><a id="__codelineno-2-111" name="__codelineno-2-111"></a><span class="se">\ </span><span class="o">(</span>union<span class="o">)</span>
</span><span id="__span-2-112"><a id="__codelineno-2-112" name="__codelineno-2-112"></a><span class="m">50</span><span class="w"> </span>/<span class="w"> </span>Uptobox
</span><span id="__span-2-113"><a id="__codelineno-2-113" name="__codelineno-2-113"></a><span class="se">\ </span><span class="o">(</span>uptobox<span class="o">)</span>
</span><span id="__span-2-114"><a id="__codelineno-2-114" name="__codelineno-2-114"></a><span class="m">51</span><span class="w"> </span>/<span class="w"> </span>WebDAV
</span><span id="__span-2-115"><a id="__codelineno-2-115" name="__codelineno-2-115"></a><span class="se">\ </span><span class="o">(</span>webdav<span class="o">)</span>
</span><span id="__span-2-116"><a id="__codelineno-2-116" name="__codelineno-2-116"></a><span class="m">52</span><span class="w"> </span>/<span class="w"> </span>Yandex<span class="w"> </span>Disk
</span><span id="__span-2-117"><a id="__codelineno-2-117" name="__codelineno-2-117"></a><span class="se">\ </span><span class="o">(</span>yandex<span class="o">)</span>
</span><span id="__span-2-118"><a id="__codelineno-2-118" name="__codelineno-2-118"></a><span class="m">53</span><span class="w"> </span>/<span class="w"> </span>Zoho
</span><span id="__span-2-119"><a id="__codelineno-2-119" name="__codelineno-2-119"></a><span class="se">\ </span><span class="o">(</span>zoho<span class="o">)</span>
</span><span id="__span-2-120"><a id="__codelineno-2-120" name="__codelineno-2-120"></a><span class="m">54</span><span class="w"> </span>/<span class="w"> </span>premiumize.me
</span><span id="__span-2-121"><a id="__codelineno-2-121" name="__codelineno-2-121"></a><span class="se">\ </span><span class="o">(</span>premiumizeme<span class="o">)</span>
</span><span id="__span-2-122"><a id="__codelineno-2-122" name="__codelineno-2-122"></a><span class="m">55</span><span class="w"> </span>/<span class="w"> </span>seafile
</span><span id="__span-2-123"><a id="__codelineno-2-123" name="__codelineno-2-123"></a><span class="se">\ </span><span class="o">(</span>seafile<span class="o">)</span>
</span><span id="__span-2-124"><a id="__codelineno-2-124" name="__codelineno-2-124"></a><span class="hll">Storage&gt;<span class="w"> </span><span class="m">51</span><span class="w"> </span><span class="c1"># 注释：或直接输入 webdav</span>
</span></span><span id="__span-2-125"><a id="__codelineno-2-125" name="__codelineno-2-125"></a>
</span><span id="__span-2-126"><a id="__codelineno-2-126" name="__codelineno-2-126"></a>Option<span class="w"> </span>url.
</span><span id="__span-2-127"><a id="__codelineno-2-127" name="__codelineno-2-127"></a>URL<span class="w"> </span>of<span class="w"> </span>http<span class="w"> </span>host<span class="w"> </span>to<span class="w"> </span>connect<span class="w"> </span>to.
</span><span id="__span-2-128"><a id="__codelineno-2-128" name="__codelineno-2-128"></a>E.g.<span class="w"> </span>https://example.com.
</span><span id="__span-2-129"><a id="__codelineno-2-129" name="__codelineno-2-129"></a>Enter<span class="w"> </span>a<span class="w"> </span>value.
</span><span id="__span-2-130"><a id="__codelineno-2-130" name="__codelineno-2-130"></a><span class="hll">url&gt;<span class="w"> </span>http://rpi4b-ubuntu.local:81/webdav/
</span></span><span id="__span-2-131"><a id="__codelineno-2-131" name="__codelineno-2-131"></a>
</span><span id="__span-2-132"><a id="__codelineno-2-132" name="__codelineno-2-132"></a>Option<span class="w"> </span>vendor.
</span><span id="__span-2-133"><a id="__codelineno-2-133" name="__codelineno-2-133"></a>Name<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>WebDAV<span class="w"> </span>site/service/software<span class="w"> </span>you<span class="w"> </span>are<span class="w"> </span>using.
</span><span id="__span-2-134"><a id="__codelineno-2-134" name="__codelineno-2-134"></a>Choose<span class="w"> </span>a<span class="w"> </span>number<span class="w"> </span>from<span class="w"> </span>below,<span class="w"> </span>or<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="k">in</span><span class="w"> </span>your<span class="w"> </span>own<span class="w"> </span>value.
</span><span id="__span-2-135"><a id="__codelineno-2-135" name="__codelineno-2-135"></a>Press<span class="w"> </span>Enter<span class="w"> </span>to<span class="w"> </span>leave<span class="w"> </span>empty.
</span><span id="__span-2-136"><a id="__codelineno-2-136" name="__codelineno-2-136"></a><span class="m">1</span><span class="w"> </span>/<span class="w"> </span>Fastmail<span class="w"> </span>Files
</span><span id="__span-2-137"><a id="__codelineno-2-137" name="__codelineno-2-137"></a><span class="se">\ </span><span class="o">(</span>fastmail<span class="o">)</span>
</span><span id="__span-2-138"><a id="__codelineno-2-138" name="__codelineno-2-138"></a><span class="m">2</span><span class="w"> </span>/<span class="w"> </span>Nextcloud
</span><span id="__span-2-139"><a id="__codelineno-2-139" name="__codelineno-2-139"></a><span class="se">\ </span><span class="o">(</span>nextcloud<span class="o">)</span>
</span><span id="__span-2-140"><a id="__codelineno-2-140" name="__codelineno-2-140"></a><span class="m">3</span><span class="w"> </span>/<span class="w"> </span>Owncloud
</span><span id="__span-2-141"><a id="__codelineno-2-141" name="__codelineno-2-141"></a><span class="se">\ </span><span class="o">(</span>owncloud<span class="o">)</span>
</span><span id="__span-2-142"><a id="__codelineno-2-142" name="__codelineno-2-142"></a><span class="m">4</span><span class="w"> </span>/<span class="w"> </span>Sharepoint<span class="w"> </span>Online,<span class="w"> </span>authenticated<span class="w"> </span>by<span class="w"> </span>Microsoft<span class="w"> </span>account
</span><span id="__span-2-143"><a id="__codelineno-2-143" name="__codelineno-2-143"></a><span class="se">\ </span><span class="o">(</span>sharepoint<span class="o">)</span>
</span><span id="__span-2-144"><a id="__codelineno-2-144" name="__codelineno-2-144"></a><span class="m">5</span><span class="w"> </span>/<span class="w"> </span>Sharepoint<span class="w"> </span>with<span class="w"> </span>NTLM<span class="w"> </span>authentication,<span class="w"> </span>usually<span class="w"> </span>self-hosted<span class="w"> </span>or<span class="w"> </span>on-premises
</span><span id="__span-2-145"><a id="__codelineno-2-145" name="__codelineno-2-145"></a><span class="se">\ </span><span class="o">(</span>sharepoint-ntlm<span class="o">)</span>
</span><span id="__span-2-146"><a id="__codelineno-2-146" name="__codelineno-2-146"></a><span class="m">6</span><span class="w"> </span>/<span class="w"> </span>rclone<span class="w"> </span>WebDAV<span class="w"> </span>server<span class="w"> </span>to<span class="w"> </span>serve<span class="w"> </span>a<span class="w"> </span>remote<span class="w"> </span>over<span class="w"> </span>HTTP<span class="w"> </span>via<span class="w"> </span>the<span class="w"> </span>WebDAV<span class="w"> </span>protocol
</span><span id="__span-2-147"><a id="__codelineno-2-147" name="__codelineno-2-147"></a><span class="se">\ </span><span class="o">(</span>rclone<span class="o">)</span>
</span><span id="__span-2-148"><a id="__codelineno-2-148" name="__codelineno-2-148"></a><span class="m">7</span><span class="w"> </span>/<span class="w"> </span>Other<span class="w"> </span>site/service<span class="w"> </span>or<span class="w"> </span>software
</span><span id="__span-2-149"><a id="__codelineno-2-149" name="__codelineno-2-149"></a><span class="se">\ </span><span class="o">(</span>other<span class="o">)</span>
</span><span id="__span-2-150"><a id="__codelineno-2-150" name="__codelineno-2-150"></a><span class="hll">vendor&gt;<span class="w"> </span><span class="m">7</span>
</span></span><span id="__span-2-151"><a id="__codelineno-2-151" name="__codelineno-2-151"></a>
</span><span id="__span-2-152"><a id="__codelineno-2-152" name="__codelineno-2-152"></a>Option<span class="w"> </span>user.
</span><span id="__span-2-153"><a id="__codelineno-2-153" name="__codelineno-2-153"></a>User<span class="w"> </span>name.
</span><span id="__span-2-154"><a id="__codelineno-2-154" name="__codelineno-2-154"></a>In<span class="w"> </span><span class="k">case</span><span class="w"> </span>NTLM<span class="w"> </span>authentication<span class="w"> </span>is<span class="w"> </span>used,<span class="w"> </span>the<span class="w"> </span>username<span class="w"> </span>should<span class="w"> </span>be<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>format<span class="w"> </span><span class="s1">&#39;Domain\User&#39;</span>.
</span><span id="__span-2-155"><a id="__codelineno-2-155" name="__codelineno-2-155"></a>Enter<span class="w"> </span>a<span class="w"> </span>value.<span class="w"> </span>Press<span class="w"> </span>Enter<span class="w"> </span>to<span class="w"> </span>leave<span class="w"> </span>empty.
</span><span id="__span-2-156"><a id="__codelineno-2-156" name="__codelineno-2-156"></a><span class="hll">user&gt;<span class="w"> </span>xman
</span></span><span id="__span-2-157"><a id="__codelineno-2-157" name="__codelineno-2-157"></a>
</span><span id="__span-2-158"><a id="__codelineno-2-158" name="__codelineno-2-158"></a>Option<span class="w"> </span>pass.
</span><span id="__span-2-159"><a id="__codelineno-2-159" name="__codelineno-2-159"></a>Password.
</span><span id="__span-2-160"><a id="__codelineno-2-160" name="__codelineno-2-160"></a>Choose<span class="w"> </span>an<span class="w"> </span>alternative<span class="w"> </span>below.<span class="w"> </span>Press<span class="w"> </span>Enter<span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>default<span class="w"> </span><span class="o">(</span>n<span class="o">)</span>.
</span><span id="__span-2-161"><a id="__codelineno-2-161" name="__codelineno-2-161"></a>y<span class="o">)</span><span class="w"> </span>Yes,<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="k">in</span><span class="w"> </span>my<span class="w"> </span>own<span class="w"> </span>password
</span><span id="__span-2-162"><a id="__codelineno-2-162" name="__codelineno-2-162"></a>g<span class="o">)</span><span class="w"> </span>Generate<span class="w"> </span>random<span class="w"> </span>password
</span><span id="__span-2-163"><a id="__codelineno-2-163" name="__codelineno-2-163"></a>n<span class="o">)</span><span class="w"> </span>No,<span class="w"> </span>leave<span class="w"> </span>this<span class="w"> </span>optional<span class="w"> </span>password<span class="w"> </span>blank<span class="w"> </span><span class="o">(</span>default<span class="o">)</span>
</span><span id="__span-2-164"><a id="__codelineno-2-164" name="__codelineno-2-164"></a><span class="hll">y/g/n&gt;<span class="w"> </span>y
</span></span><span id="__span-2-165"><a id="__codelineno-2-165" name="__codelineno-2-165"></a>Enter<span class="w"> </span>the<span class="w"> </span>password:
</span><span id="__span-2-166"><a id="__codelineno-2-166" name="__codelineno-2-166"></a><span class="hll">password:
</span></span><span id="__span-2-167"><a id="__codelineno-2-167" name="__codelineno-2-167"></a>Confirm<span class="w"> </span>the<span class="w"> </span>password:
</span><span id="__span-2-168"><a id="__codelineno-2-168" name="__codelineno-2-168"></a><span class="hll">password:
</span></span><span id="__span-2-169"><a id="__codelineno-2-169" name="__codelineno-2-169"></a>
</span><span id="__span-2-170"><a id="__codelineno-2-170" name="__codelineno-2-170"></a>Option<span class="w"> </span>bearer_token.
</span><span id="__span-2-171"><a id="__codelineno-2-171" name="__codelineno-2-171"></a>Bearer<span class="w"> </span>token<span class="w"> </span>instead<span class="w"> </span>of<span class="w"> </span>user/pass<span class="w"> </span><span class="o">(</span>e.g.<span class="w"> </span>a<span class="w"> </span>Macaroon<span class="o">)</span>.
</span><span id="__span-2-172"><a id="__codelineno-2-172" name="__codelineno-2-172"></a>Enter<span class="w"> </span>a<span class="w"> </span>value.<span class="w"> </span>Press<span class="w"> </span>Enter<span class="w"> </span>to<span class="w"> </span>leave<span class="w"> </span>empty.
</span><span id="__span-2-173"><a id="__codelineno-2-173" name="__codelineno-2-173"></a><span class="hll">bearer_token&gt;<span class="w"> </span><span class="c1"># 注释：这里暂时直接回车忽略</span>
</span></span><span id="__span-2-174"><a id="__codelineno-2-174" name="__codelineno-2-174"></a>
</span><span id="__span-2-175"><a id="__codelineno-2-175" name="__codelineno-2-175"></a>Edit<span class="w"> </span>advanced<span class="w"> </span>config?
</span><span id="__span-2-176"><a id="__codelineno-2-176" name="__codelineno-2-176"></a>y<span class="o">)</span><span class="w"> </span>Yes
</span><span id="__span-2-177"><a id="__codelineno-2-177" name="__codelineno-2-177"></a>n<span class="o">)</span><span class="w"> </span>No<span class="w"> </span><span class="o">(</span>default<span class="o">)</span>
</span><span id="__span-2-178"><a id="__codelineno-2-178" name="__codelineno-2-178"></a><span class="hll">y/n&gt;<span class="w"> </span>n
</span></span><span id="__span-2-179"><a id="__codelineno-2-179" name="__codelineno-2-179"></a>
</span><span id="__span-2-180"><a id="__codelineno-2-180" name="__codelineno-2-180"></a>Configuration<span class="w"> </span>complete.
</span><span id="__span-2-181"><a id="__codelineno-2-181" name="__codelineno-2-181"></a>Options:
</span><span id="__span-2-182"><a id="__codelineno-2-182" name="__codelineno-2-182"></a>-<span class="w"> </span>type:<span class="w"> </span>webdav
</span><span id="__span-2-183"><a id="__codelineno-2-183" name="__codelineno-2-183"></a>-<span class="w"> </span>url:<span class="w"> </span>http://rpi4b-ubuntu.local:81/webdav/
</span><span id="__span-2-184"><a id="__codelineno-2-184" name="__codelineno-2-184"></a>-<span class="w"> </span>vendor:<span class="w"> </span>other
</span><span id="__span-2-185"><a id="__codelineno-2-185" name="__codelineno-2-185"></a>-<span class="w"> </span>user:<span class="w"> </span>xman
</span><span id="__span-2-186"><a id="__codelineno-2-186" name="__codelineno-2-186"></a>-<span class="w"> </span>pass:<span class="w"> </span>***<span class="w"> </span>ENCRYPTED<span class="w"> </span>***
</span><span id="__span-2-187"><a id="__codelineno-2-187" name="__codelineno-2-187"></a>Keep<span class="w"> </span>this<span class="w"> </span><span class="s2">&quot;webdav@rpi4b&quot;</span><span class="w"> </span>remote?
</span><span id="__span-2-188"><a id="__codelineno-2-188" name="__codelineno-2-188"></a>y<span class="o">)</span><span class="w"> </span>Yes<span class="w"> </span>this<span class="w"> </span>is<span class="w"> </span>OK<span class="w"> </span><span class="o">(</span>default<span class="o">)</span>
</span><span id="__span-2-189"><a id="__codelineno-2-189" name="__codelineno-2-189"></a>e<span class="o">)</span><span class="w"> </span>Edit<span class="w"> </span>this<span class="w"> </span>remote
</span><span id="__span-2-190"><a id="__codelineno-2-190" name="__codelineno-2-190"></a>d<span class="o">)</span><span class="w"> </span>Delete<span class="w"> </span>this<span class="w"> </span>remote
</span><span id="__span-2-191"><a id="__codelineno-2-191" name="__codelineno-2-191"></a><span class="hll">y/e/d&gt;<span class="w"> </span>y
</span></span><span id="__span-2-192"><a id="__codelineno-2-192" name="__codelineno-2-192"></a>
</span><span id="__span-2-193"><a id="__codelineno-2-193" name="__codelineno-2-193"></a>Current<span class="w"> </span>remotes:
</span><span id="__span-2-194"><a id="__codelineno-2-194" name="__codelineno-2-194"></a>
</span><span id="__span-2-195"><a id="__codelineno-2-195" name="__codelineno-2-195"></a>Name<span class="w">                 </span><span class="nv">Type</span>
</span><span id="__span-2-196"><a id="__codelineno-2-196" name="__codelineno-2-196"></a><span class="o">====</span><span class="w">                 </span><span class="o">====</span>
</span><span id="__span-2-197"><a id="__codelineno-2-197" name="__codelineno-2-197"></a>webdav@rpi4b<span class="w">         </span>webdav
</span><span id="__span-2-198"><a id="__codelineno-2-198" name="__codelineno-2-198"></a>
</span><span id="__span-2-199"><a id="__codelineno-2-199" name="__codelineno-2-199"></a>e<span class="o">)</span><span class="w"> </span>Edit<span class="w"> </span>existing<span class="w"> </span>remote
</span><span id="__span-2-200"><a id="__codelineno-2-200" name="__codelineno-2-200"></a>n<span class="o">)</span><span class="w"> </span>New<span class="w"> </span>remote
</span><span id="__span-2-201"><a id="__codelineno-2-201" name="__codelineno-2-201"></a>d<span class="o">)</span><span class="w"> </span>Delete<span class="w"> </span>remote
</span><span id="__span-2-202"><a id="__codelineno-2-202" name="__codelineno-2-202"></a>r<span class="o">)</span><span class="w"> </span>Rename<span class="w"> </span>remote
</span><span id="__span-2-203"><a id="__codelineno-2-203" name="__codelineno-2-203"></a>c<span class="o">)</span><span class="w"> </span>Copy<span class="w"> </span>remote
</span><span id="__span-2-204"><a id="__codelineno-2-204" name="__codelineno-2-204"></a>s<span class="o">)</span><span class="w"> </span>Set<span class="w"> </span>configuration<span class="w"> </span>password
</span><span id="__span-2-205"><a id="__codelineno-2-205" name="__codelineno-2-205"></a>q<span class="o">)</span><span class="w"> </span>Quit<span class="w"> </span>config
</span><span id="__span-2-206"><a id="__codelineno-2-206" name="__codelineno-2-206"></a><span class="hll">e/n/d/r/c/s/q&gt;<span class="w"> </span>q
</span></span></code></pre></div></td></tr></table></div>
</details>
<p>这里示例配置 webDAV，也可选择配置本地磁盘（或外挂硬盘/SSD）或局域网 SMB 等 FS（File Sharing）服务。</p>
<ul>
<li>28 / Local Disk \ (local)</li>
<li>43 / SMB / CIFS \ (smb)</li>
</ul>
<p>如果中途不小心输错或后续想更改配置，可输入 <code>rclone config edit</code> 选择编辑已有的配置。</p>
<blockquote>
<p>⚠️：在 ubuntu 中，remote name 中不能包含 @ 符号，可改为 - 替代：webdav-rpi4b。</p>
</blockquote>
<h3 id="config_show">config show<a class="headerlink" href="#config_show" title="Permanent link">#</a></h3>
<p>rclone config 配置完成后，可调用相关命令 dump/show 相关配置信息：</p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://rclone.org/commands/rclone_config_paths/">rclone config paths</a></td>
<td>Show paths used for configuration, cache, temp etc.</td>
</tr>
<tr>
<td><a href="https://rclone.org/commands/rclone_config_file/">rclone config file</a></td>
<td>Show path of configuration file in use.</td>
</tr>
<tr>
<td><a href="https://rclone.org/commands/rclone_config_show/">rclone config show</a></td>
<td>Print (decrypted) config file, or the config for a single remote.</td>
</tr>
<tr>
<td><a href="https://rclone.org/commands/rclone_config_dump/">rclone config dump</a></td>
<td>Dump the config file as JSON.</td>
</tr>
<tr>
<td><a href="https://rclone.org/commands/rclone_listremotes/">rclone listremotes</a></td>
<td>List all the remotes in the config file and defined in environment variables.</td>
</tr>
</tbody>
</table>
<p>查看配置文件路径：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>config<span class="w"> </span>paths
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>Config<span class="w"> </span>file:<span class="w"> </span>/Users/faner/.config/rclone/rclone.conf
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>Cache<span class="w"> </span>dir:<span class="w">   </span>/Users/faner/Library/Caches/rclone
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>Temp<span class="w"> </span>dir:<span class="w">    </span>/var/folders/k6/7f8bh1ws4ygfg9pcq48w5tk00000gn/T
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>$<span class="w"> </span>rclone<span class="w"> </span>config<span class="w"> </span>file
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>Configuration<span class="w"> </span>file<span class="w"> </span>is<span class="w"> </span>stored<span class="w"> </span>at:
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>/Users/faner/.config/rclone/rclone.conf
</span></code></pre></div>
<p>查看配置文件中的配置：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>config<span class="w"> </span>show
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="o">[</span>webdav@rpi4b<span class="o">]</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="nb">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>webdav
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="nv">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>http://rpi4b-ubuntu.local:81/webdav/
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="nv">vendor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>other
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="nv">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>xman
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="nv">pass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>***<span class="w"> </span>ENCRYPTED<span class="w"> </span>***
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>$<span class="w"> </span>rclone<span class="w"> </span>config<span class="w"> </span>dump
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="o">{</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w">    </span><span class="s2">&quot;webdav@rpi4b&quot;</span>:<span class="w"> </span><span class="o">{</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="w">        </span><span class="s2">&quot;pass&quot;</span>:<span class="w"> </span><span class="s2">&quot;*** ENCRYPTED ***&quot;</span>,
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="w">        </span><span class="s2">&quot;type&quot;</span>:<span class="w"> </span><span class="s2">&quot;webdav&quot;</span>,
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="w">        </span><span class="s2">&quot;url&quot;</span>:<span class="w"> </span><span class="s2">&quot;http://rpi4b-ubuntu.local:81/webdav/&quot;</span>,
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="w">        </span><span class="s2">&quot;user&quot;</span>:<span class="w"> </span><span class="s2">&quot;xman&quot;</span>,
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="w">        </span><span class="s2">&quot;vendor&quot;</span>:<span class="w"> </span><span class="s2">&quot;other&quot;</span>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="o">}</span>%
</span></code></pre></div>
<p>列举配置文件中已配置的远端服务（名称）：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>listremotes
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>webdav@rpi4b:
</span></code></pre></div>
<h2 id="ls">ls<a class="headerlink" href="#ls" title="Permanent link">#</a></h2>
<p><code>ls</code> 系列命令语义同 bash shell 中的 <code>ls</code>，拉取远端目录（fetch remote:path）并显示列表（list）。</p>
<p><a href="https://rclone.org/commands/">Commands Index</a></p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://rclone.org/commands/rclone_ls/">rclone ls</a></td>
<td>List the objects in the path with size and path.</td>
</tr>
<tr>
<td><a href="https://rclone.org/commands/rclone_lsd/">rclone lsd</a></td>
<td>List all directories/containers/buckets in the path.</td>
</tr>
<tr>
<td><a href="https://rclone.org/commands/rclone_lsf/">rclone lsf</a></td>
<td>List directories and objects in remote:path formatted for parsing.</td>
</tr>
<tr>
<td><a href="https://rclone.org/commands/rclone_lsjson/">rclone lsjson</a></td>
<td>List directories and objects in the path in JSON format.</td>
</tr>
<tr>
<td><a href="https://rclone.org/commands/rclone_lsl/">rclone lsl</a></td>
<td>List the objects in path with modification time, size and path.</td>
</tr>
<tr>
<td><a href="https://rclone.org/commands/rclone_tree/">rclone tree</a></td>
<td>List the contents of the remote in a tree like fashion.</td>
</tr>
<tr>
<td><a href="https://rclone.org/commands/rclone_cat/">rclone cat</a></td>
<td>Concatenates any files and sends them to stdout.</td>
</tr>
</tbody>
</table>
<p>There are several related list commands:</p>
<ul>
<li><code>ls</code> to list size and path of objects only</li>
<li><code>lsl</code> to list modification time, size and path of objects only</li>
<li><code>lsd</code> to list directories only</li>
<li><code>lsf</code> to list objects and directories in easy to parse format</li>
<li><code>lsjson</code> to list objects and directories in JSON format</li>
</ul>
<p><code>ls</code>,<code>lsl</code>,<code>lsd</code> are designed to be human-readable. <code>lsf</code> is designed to be human and machine-readable. <code>lsjson</code> is designed to be machine-readable.</p>
<p>Note that <code>ls</code> and <code>lsl</code><strong> recurse</strong> by default - use <code>--max-depth 1</code> to stop the recursion.</p>
<p>The other list commands <code>lsd</code>,<code>lsf</code>,<code>lsjson</code> do not recurse by default - use <code>-R</code> to make them recurse.</p>
<p><code>ls</code> 命令递归列举根路径下的所有文件（大小和路径）：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>ls<span class="w"> </span>webdav@rpi4b:
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">      </span>...
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>$<span class="w"> </span>rclone<span class="w"> </span>tree<span class="w"> </span>webdav@rpi4b:
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">      </span>...
</span></code></pre></div>
<p><code>ls</code> 命令递归列举 <code>/mkdocs</code> 下的所有文件（大小和路径）：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>ls<span class="w"> </span>webdav@rpi4b:/mkdocs
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">      </span><span class="m">310</span><span class="w"> </span>hello-world-2.c
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">      </span><span class="m">310</span><span class="w"> </span>hello-world-3.c
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">      </span><span class="m">310</span><span class="w"> </span>hello-world-4.c
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">      </span><span class="m">279</span><span class="w"> </span>hello-world.c
</span></code></pre></div>
<p><code>lsl</code> 命令相比 <code>ls</code> 增加显示文件的修改时间（modification time）：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>lsl<span class="w"> </span>webdav@rpi4b:
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">      </span>...
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="c1"># /表示根路径，可省略</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>$<span class="w"> </span>rclone<span class="w"> </span>lsl<span class="w"> </span>webdav@rpi4b:/mkdocs
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">      </span><span class="m">310</span><span class="w"> </span><span class="m">2024</span>-04-01<span class="w"> </span><span class="m">18</span>:05:13.000000000<span class="w"> </span>hello-world-2.c
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">      </span><span class="m">310</span><span class="w"> </span><span class="m">2024</span>-04-01<span class="w"> </span><span class="m">18</span>:05:18.000000000<span class="w"> </span>hello-world-3.c
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">      </span><span class="m">310</span><span class="w"> </span><span class="m">2024</span>-04-01<span class="w"> </span><span class="m">18</span>:25:27.000000000<span class="w"> </span>hello-world-4.c
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">      </span><span class="m">279</span><span class="w"> </span><span class="m">2024</span>-04-01<span class="w"> </span><span class="m">18</span>:02:26.000000000<span class="w"> </span>hello-world.c
</span></code></pre></div>
<p><code>lsd</code> 命令显示指定路径（根目录）下的目录/容器/桶：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>lsd<span class="w"> </span>webdav@rpi4b:
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">          </span>-1<span class="w"> </span><span class="m">2024</span>-04-05<span class="w"> </span><span class="m">08</span>:34:31<span class="w">        </span>-1<span class="w"> </span>CS
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">          </span>-1<span class="w"> </span><span class="m">2024</span>-04-03<span class="w"> </span><span class="m">10</span>:53:51<span class="w">        </span>-1<span class="w"> </span>English_Docs
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">          </span>-1<span class="w"> </span><span class="m">2024</span>-03-25<span class="w"> </span><span class="m">10</span>:17:59<span class="w">        </span>-1<span class="w"> </span>The_Economist
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">          </span>-1<span class="w"> </span><span class="m">2024</span>-04-01<span class="w"> </span><span class="m">18</span>:25:31<span class="w">        </span>-1<span class="w"> </span>mkdocs
</span></code></pre></div>
<p><code>lsf</code> 命令以一种简单的方式列举目录（和文件）：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>lsf<span class="w"> </span>webdav@rpi4b:
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>CS/
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>English_Docs/
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>The_Economist/
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>mkdocs/
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="c1"># 过滤不显示 CS 和 mkdocs 目录</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>$<span class="w"> </span>rclone<span class="w"> </span>lsf<span class="w"> </span>webdav@rpi4b:<span class="w"> </span>--exclude<span class="w"> </span><span class="s2">&quot;{CS/**,mkdocs/**}&quot;</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>English_Docs/
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>The_Economist/
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>$<span class="w"> </span>rclone<span class="w"> </span>tree<span class="w"> </span>--max-depth<span class="w"> </span><span class="m">1</span><span class="w"> </span>webdav@rpi4b:
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>/
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>├──<span class="w"> </span>CS
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a>├──<span class="w"> </span>English_Docs
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>├──<span class="w"> </span>The_Economist
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a>└──<span class="w"> </span>mkdocs
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a>
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="m">0</span><span class="w"> </span>directories,<span class="w"> </span><span class="m">0</span><span class="w"> </span>files
</span></code></pre></div>
<p>关于过滤，参考 <a href="https://rclone.org/filtering/">Filtering</a> 选项参数。</p>
<ul>
<li><a href="https://forum.rclone.org/t/include-from-intersection-of-patterns/13455">Include-from intersection of patterns</a></li>
<li><a href="https://forum.rclone.org/t/how-to-specify-what-folders-to-sync-and-what-to-exclude-include-exclude-filter/21821">How to specify what folders to sync and what to exclude -- include, exclude, filter?</a></li>
<li><a href="https://forum.rclone.org/t/rclone-copy-using-regex-expression-using-include-multiple-expression-for-file-name/26846?page=2">Rclone copy using regex expression using include multiple expression for file name</a></li>
</ul>
<p><code>lsjson</code> 命令以 json 格式列举目录：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>lsjson<span class="w"> </span>webdav@rpi4b:
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="o">[</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="o">{</span><span class="s2">&quot;Path&quot;</span>:<span class="s2">&quot;CS&quot;</span>,<span class="s2">&quot;Name&quot;</span>:<span class="s2">&quot;CS&quot;</span>,<span class="s2">&quot;Size&quot;</span>:-1,<span class="s2">&quot;MimeType&quot;</span>:<span class="s2">&quot;inode/directory&quot;</span>,<span class="s2">&quot;ModTime&quot;</span>:<span class="s2">&quot;2024-04-05T00:34:31Z&quot;</span>,<span class="s2">&quot;IsDir&quot;</span>:true<span class="o">}</span>,
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="o">{</span><span class="s2">&quot;Path&quot;</span>:<span class="s2">&quot;English_Docs&quot;</span>,<span class="s2">&quot;Name&quot;</span>:<span class="s2">&quot;English_Docs&quot;</span>,<span class="s2">&quot;Size&quot;</span>:-1,<span class="s2">&quot;MimeType&quot;</span>:<span class="s2">&quot;inode/directory&quot;</span>,<span class="s2">&quot;ModTime&quot;</span>:<span class="s2">&quot;2024-04-03T02:53:51Z&quot;</span>,<span class="s2">&quot;IsDir&quot;</span>:true<span class="o">}</span>,
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="o">{</span><span class="s2">&quot;Path&quot;</span>:<span class="s2">&quot;The_Economist&quot;</span>,<span class="s2">&quot;Name&quot;</span>:<span class="s2">&quot;The_Economist&quot;</span>,<span class="s2">&quot;Size&quot;</span>:-1,<span class="s2">&quot;MimeType&quot;</span>:<span class="s2">&quot;inode/directory&quot;</span>,<span class="s2">&quot;ModTime&quot;</span>:<span class="s2">&quot;2024-03-25T02:17:59Z&quot;</span>,<span class="s2">&quot;IsDir&quot;</span>:true<span class="o">}</span>,
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="o">{</span><span class="s2">&quot;Path&quot;</span>:<span class="s2">&quot;mkdocs&quot;</span>,<span class="s2">&quot;Name&quot;</span>:<span class="s2">&quot;mkdocs&quot;</span>,<span class="s2">&quot;Size&quot;</span>:-1,<span class="s2">&quot;MimeType&quot;</span>:<span class="s2">&quot;inode/directory&quot;</span>,<span class="s2">&quot;ModTime&quot;</span>:<span class="s2">&quot;2024-04-01T10:25:31Z&quot;</span>,<span class="s2">&quot;IsDir&quot;</span>:true<span class="o">}</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="o">]</span>
</span></code></pre></div>
<h2 id="mkdir">mkdir<a class="headerlink" href="#mkdir" title="Permanent link">#</a></h2>
<p>语义同 bash shell 中的 <code>mkdir</code>，创建目录（remote:path）。</p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://rclone.org/commands/rclone_mkdir/">rclone mkdir</a></td>
<td>Make the path if it doesn't already exist.</td>
</tr>
</tbody>
</table>
<p>在根目录 /webdav 下新建文件夹 rcdir：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>lsf<span class="w"> </span>webdav@rpi4b:
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>CS/
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>English_Docs/
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>The_Economist/
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>mkdocs/
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>$<span class="w"> </span>rclone<span class="w"> </span>mkdir<span class="w"> </span>webdav@rpi4b:rcdir
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>$<span class="w"> </span>rclone<span class="w"> </span>lsf<span class="w"> </span>webdav@rpi4b:
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>CS/
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>English_Docs/
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>The_Economist/
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>mkdocs/
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>rcdir/
</span></code></pre></div>
<h2 id="copy">copy<a class="headerlink" href="#copy" title="Permanent link">#</a></h2>
<p>基本语义同 bash shell 中的 <code>cp</code>，支持端到端的文件（夹）复制。</p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://rclone.org/commands/rclone_copy/">rclone copy</a></td>
<td>Copy files from source to dest, skipping identical files.</td>
</tr>
<tr>
<td><a href="https://rclone.org/commands/rclone_copyto/">rclone copyto</a></td>
<td>Copy files from source to dest, skipping identical files.</td>
</tr>
<tr>
<td><a href="https://rclone.org/commands/rclone_copyurl/">rclone copyurl</a></td>
<td>Copy the contents of the URL supplied content to dest:path.</td>
</tr>
</tbody>
</table>
<p><strong>copy</strong>:</p>
<ol>
<li>If dest:path doesn't exist, it is created and the source:path contents go there.</li>
<li>To copy single files, use the <a href="https://rclone.org/commands/rclone_copyto/">copyto</a> command instead.</li>
</ol>
<p><strong>copyto</strong>:</p>
<ol>
<li>If source:path is a file or directory then it copies it to a file or directory <em>named</em> dest:path.</li>
<li>This can be used to upload single files to other than their current name.</li>
<li>If the source is a directory then it acts exactly like the <a href="https://rclone.org/commands/rclone_copy/">copy</a> command.</li>
</ol>
<h3 id="upload_from_local">upload from local<a class="headerlink" href="#upload_from_local" title="Permanent link">#</a></h3>
<p>将当前目录下文件夹 mkdocs/script/ 中的所有文件复制到 test/script 目录下：</p>
<ul>
<li>如果目标目录不存在，会逐级创建目录（mkdir -p test/script）。</li>
</ul>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>copy<span class="w"> </span>mkdocs/script/<span class="w"> </span>webdav@rpi4b:test/script
</span></code></pre></div>
<p>将当前目录下的文件 test.txt 拷贝上传（copy upload）到目录 rcdir 下：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>copy<span class="w"> </span>test.txt<span class="w"> </span>webdav@rpi4b:rcdir
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>$<span class="w"> </span>rclone<span class="w"> </span>lsf<span class="w"> </span>webdav@rpi4b:rcdir
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>test.txt
</span></code></pre></div>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="c1"># 仅拷贝 srcpath 中 5s 之内有变动的文件</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>$<span class="w"> </span>rclone<span class="w"> </span>copy<span class="w"> </span>-v<span class="w"> </span>~/Downloads/testdir<span class="w"> </span>webdav@mbpa2991:testdir<span class="w"> </span>--max-age<span class="w"> </span><span class="m">5</span>
</span></code></pre></div>
<p><strong>注意</strong>：如果使用 copyto 命令，会将 rcdir 视作文件：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="c1"># 将当前目录下的 test.txt 文件复制为远端文件 rcdir</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>$<span class="w"> </span>rclone<span class="w"> </span>copyto<span class="w"> </span>test.txt<span class="w"> </span>webdav@rpi4b:rcdir
</span></code></pre></div>
<p>使用 copyto 命令，dstpath 部分指定上传后的目标文件名。<br />
例如，将 test.txt 上传为 rcdir/test2.txt：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>copyto<span class="w"> </span>test.txt<span class="w"> </span>webdav@rpi4b:rcdir/test2.txt
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>$<span class="w"> </span>rclone<span class="w"> </span>lsf<span class="w"> </span>webdav@rpi4b:rcdir
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>test.txt
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>test2.txt
</span></code></pre></div>
<p><strong>注意</strong>：如果使用 copy 命令，会将 test2.txt 视作目录：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="c1"># 将当前目录下的 test.txt 文件复制到远端目录 rcdir/test2.txt/ 下</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>$<span class="w"> </span>rclone<span class="w"> </span>copy<span class="w"> </span>test.txt<span class="w"> </span>webdav@rpi4b:rcdir/test2.txt
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>$<span class="w"> </span>rclone<span class="w"> </span>lsf<span class="w"> </span>webdav@rpi4b:rcdir
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>test.txt
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>test2.txt/
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>$<span class="w"> </span>rclone<span class="w"> </span>lsf<span class="w"> </span>webdav@rpi4b:rcdir/test2.txt
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>test.txt
</span></code></pre></div>
<h3 id="download_from_remote">download from remote<a class="headerlink" href="#download_from_remote" title="Permanent link">#</a></h3>
<p>将 rcdir 目录下的所有文件下载到当前目录（pwd）：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>copy<span class="w"> </span>webdav@rpi4b:rcdir<span class="w"> </span>.
</span></code></pre></div>
<p>将 rcdir 目录下的所有文件下载到当前目录的 rcdir 文件夹下：</p>
<ul>
<li>如果当前目录下不存在 rcdir 文件夹，则自动创建。</li>
</ul>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>copy<span class="w"> </span>webdav@rpi4b:rcdir<span class="w"> </span>./rcdir
</span></code></pre></div>
<p>将远端文件 rcdir/test2.txt 拷贝下载到当前目录（pwd）下：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>copy<span class="w"> </span>webdav@rpi4b:rcdir/test2.txt<span class="w"> </span>.
</span></code></pre></div>
<p>将远端文件夹 English/恋词考研英语-全真题源报刊7000词/ 拷贝到 Documents 同名目录：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>rclone<span class="w"> </span>copy<span class="w"> </span>webdav@rpi4b:English/恋词考研英语-全真题源报刊7000词/<span class="w"> </span>Documents/English/恋词考研英语-全真题源报刊7000词/
</span></code></pre></div>
<p>将远端文件 rcdir/test2.txt 拷贝下载到当前目录（pwd），并命名为 test3.txt：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>copyto<span class="w"> </span>webdav@rpi4b:rcdir/test2.txt<span class="w"> </span>./test3.txt
</span></code></pre></div>
<h3 id="server-side_copy">server-side copy<a class="headerlink" href="#server-side_copy" title="Permanent link">#</a></h3>
<p>server-side copy 复制文件夹：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>copy<span class="w"> </span>webdav@rpi4b:rcdir<span class="w"> </span>webdav@rpi4b:rcdir1
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>$<span class="w"> </span>rclone<span class="w"> </span>lsf<span class="w"> </span>webdav@rpi4b:
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>CS/
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>English_Docs/
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>The_Economist/
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>mkdocs/
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>rcdir/
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>rcdir1/
</span></code></pre></div>
<p>server-side copy 复制文件：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>copyto<span class="w"> </span>webdav@rpi4b:rcdir/test.txt<span class="w"> </span>webdav@rpi4b:rcdir/test3.txt
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>$<span class="w"> </span>rclone<span class="w"> </span>lsf<span class="w"> </span>webdav@rpi4b:rcdir
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>test.txt
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>test2.txt
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>test3.txt
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a>
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a>$<span class="w"> </span>rclone<span class="w"> </span>copyto<span class="w"> </span>webdav@rpi4b:rcdir/test.txt<span class="w"> </span>webdav@rpi4b:rcdir/test4.txt
</span><span id="__span-25-9"><a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a>
</span><span id="__span-25-10"><a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a>$<span class="w"> </span>rclone<span class="w"> </span>lsf<span class="w"> </span>webdav@rpi4b:rcdir
</span><span id="__span-25-11"><a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a>test.txt
</span><span id="__span-25-12"><a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a>test2.txt
</span><span id="__span-25-13"><a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a>test3.txt
</span><span id="__span-25-14"><a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a>test4.txt
</span></code></pre></div>
<h2 id="move">move<a class="headerlink" href="#move" title="Permanent link">#</a></h2>
<p>基本语义同 bash shell 中的 <code>mv</code>，支持端到端的文件（夹）移动。</p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://rclone.org/commands/rclone_move/">rclone move</a></td>
<td>Move files from source to dest.</td>
</tr>
<tr>
<td><a href="https://rclone.org/commands/rclone_moveto/">rclone moveto</a></td>
<td>Move file or directory from source to dest.</td>
</tr>
</tbody>
</table>
<p><strong>move</strong>:</p>
<ol>
<li>Moves the contents of the source directory to the destination directory.</li>
<li>To move single files, use the <a href="https://rclone.org/commands/rclone_moveto/">moveto</a> command instead.</li>
</ol>
<p><strong>moveto</strong>:</p>
<ol>
<li>If source:path is a file or directory then it moves it to a file or directory <em>named</em> dest:path.</li>
<li>This can be used to rename files or upload single files to other than their existing name.</li>
<li>If the source is a directory then it acts exactly like the <a href="https://rclone.org/commands/rclone_move/">move</a> command.</li>
</ol>
<div class="admonition note">
<p class="admonition-title">move vs. copy</p>
<p>在上面使用 <code>copy</code> 的场合，都可以替换为 <code>move</code>。<br />
区别在于 <code>copy</code> 是复制-粘贴，而 <code>move</code> 相当于剪切-粘贴。</p>
</div>
<p>server-side move：不同目录为移动，相同目录相当于重命名。</p>
<p>将文件 rcdir1/test4.txt 重命名 rcdir1/test3.txt：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>moveto<span class="w"> </span>webdav@rpi4b:rcdir1/test4.txt<span class="w"> </span>webdav@rpi4b:rcdir1/test3.txt
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>rclone<span class="w"> </span>lsf<span class="w"> </span>webdav@rpi4b:rcdir1
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>test.txt
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>test2.txt
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>test3.txt
</span></code></pre></div>
<p>将根目录下的 test 文件夹重命名为 test2：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>move<span class="w"> </span>webdav@rpi4b:test<span class="w"> </span>webdav@rpi4b:test2
</span></code></pre></div>
<p>将 rcdir/test4.txt 移动到 rcdir1 目录：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>move<span class="w"> </span>webdav@rpi4b:rcdir/test4.txt<span class="w"> </span>webdav@rpi4b:rcdir1
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>$<span class="w"> </span>rclone<span class="w"> </span>lsf<span class="w"> </span>webdav@rpi4b:rcdir
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>test.txt
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>test2.txt
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a>test3.txt
</span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a>
</span><span id="__span-28-8"><a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a>$<span class="w"> </span>rclone<span class="w"> </span>lsf<span class="w"> </span>webdav@rpi4b:rcdir1
</span><span id="__span-28-9"><a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a>test.txt
</span><span id="__span-28-10"><a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a>test2.txt
</span><span id="__span-28-11"><a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a>test4.txt
</span></code></pre></div>
<p>将 English 目录下的 mp3 和 pdf 文件（不递归子目录）移动到子文件夹 The_Economist 下：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>move<span class="w"> </span>--include<span class="w"> </span><span class="s2">&quot;/*.{mp3,pdf}&quot;</span><span class="w"> </span>webdav@rpi4b:English<span class="w"> </span>webdav@rpi4b:English/The_Economist<span class="w"> </span>--dry-run
</span></code></pre></div>
<h2 id="deletermdirpurge">delete/rmdir/purge<a class="headerlink" href="#deletermdirpurge" title="Permanent link">#</a></h2>
<h3 id="delete">delete<a class="headerlink" href="#delete" title="Permanent link">#</a></h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://rclone.org/commands/rclone_deletefile/">rclone deletefile</a></td>
<td>Remove a single file from remote.</td>
</tr>
<tr>
<td><a href="https://rclone.org/commands/rclone_delete/">rclone delete</a></td>
<td>Remove the files in path.</td>
</tr>
</tbody>
</table>
<p>deletefile 语义同 bash shell 中的 <code>rm -f file</code>；delete 语义同 bash shell 中的 <code>rm -rf folder</code>。</p>
<p>删除远端文件 rcdir1/test.txt：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>deletefile<span class="w"> </span>webdav@rpi4b:rcdir1/test.txt
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>$<span class="w"> </span>rclone<span class="w"> </span>lsf<span class="w"> </span>webdav@rpi4b:rcdir1
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>test2.txt
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>test3.txt
</span></code></pre></div>
<p>删除远端文件夹 rcdir1 下的所有文件：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>delete<span class="w"> </span>webdav@rpi4b:rcdir1
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>$<span class="w"> </span>rclone<span class="w"> </span>lsf<span class="w"> </span>webdav@rpi4b:rcdir1
</span></code></pre></div>
<h3 id="rmdir">rmdir<a class="headerlink" href="#rmdir" title="Permanent link">#</a></h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://rclone.org/commands/rclone_rmdir/">rclone rmdir</a></td>
<td>Remove the empty directory at path.</td>
</tr>
<tr>
<td><a href="https://rclone.org/commands/rclone_rmdirs/">rclone rmdirs</a></td>
<td>Remove empty directories under the path.</td>
</tr>
</tbody>
</table>
<p>再在根目录下创建个2文件夹 rcdir2、rcdir3</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>mkdir<span class="w"> </span>webdav@rpi4b:rcdir2
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>$<span class="w"> </span>rclone<span class="w"> </span>mkdir<span class="w"> </span>webdav@rpi4b:rcdir3
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>$<span class="w"> </span>rclone<span class="w"> </span>lsf<span class="w"> </span>webdav@rpi4b:
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>CS/
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a>English_Docs/
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>The_Economist/
</span><span id="__span-32-8"><a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a>mkdocs/
</span><span id="__span-32-9"><a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a>rcdir/
</span><span id="__span-32-10"><a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a>rcdir1/
</span><span id="__span-32-11"><a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a>rcdir2/
</span><span id="__span-32-12"><a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a>rcdir3/
</span></code></pre></div>
<p>使用 <code>rmdir</code> 命令移除根目录下的空文件夹 rcdir1：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>rmdir<span class="w"> </span>webdav@rpi4b:rcdir1
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>$<span class="w"> </span>rclone<span class="w"> </span>lsf<span class="w"> </span>webdav@rpi4b:
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>CS/
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>English_Docs/
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a>The_Economist/
</span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a>mkdocs/
</span><span id="__span-33-8"><a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a>rcdir/
</span><span id="__span-33-9"><a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a>rcdir2/
</span><span id="__span-33-10"><a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a>rcdir3/
</span></code></pre></div>
<p>使用 <code>rmdirs</code> 子命令一次性移除根目录下所有的空文件夹（rcdir2、rcdir3）：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>rmdirs<span class="w"> </span>webdav@rpi4b:
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a>rclone<span class="w"> </span>lsf<span class="w"> </span>webdav@rpi4b:
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a>CS/
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a>English_Docs/
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a>The_Economist/
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a>mkdocs/
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a>rcdir/
</span></code></pre></div>
<h3 id="purge">purge<a class="headerlink" href="#purge" title="Permanent link">#</a></h3>
<p>rmdir/rmdirs 命令只能删除空文件夹，如果想一步清理文件夹内容并删除文件夹，可以使用 <code>purge</code> 命令（≈ delete + rmdir）：</p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://rclone.org/commands/rclone_purge/">rclone purge</a></td>
<td>Remove the path and all of its contents.</td>
</tr>
</tbody>
</table>
<p>删除远端目录 rcdir/test2.txt 下的所有文件及文件夹：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>$<span class="w"> </span>rclone<span class="w"> </span>purge<span class="w"> </span>webdav@rpi4b:rcdir/test2.txt
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>rclone<span class="w"> </span>lsf<span class="w"> </span>webdav@rpi4b:rcdir
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>test.txt
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a>test1.txt
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a>test3.txt
</span></code></pre></div>
<h2 id="syncbisync">sync/bisync<a class="headerlink" href="#syncbisync" title="Permanent link">#</a></h2>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://rclone.org/commands/rclone_sync/">rclone sync</a></td>
<td>Make source and dest identical, modifying destination only.</td>
</tr>
<tr>
<td><a href="https://rclone.org/commands/rclone_bisync/">rclone bisync</a></td>
<td>Perform bidirectional synchronization between two paths.</td>
</tr>
</tbody>
</table>
<h3 id="sync">sync<a class="headerlink" href="#sync" title="Permanent link">#</a></h3>
<p>Sync the source to the destination, changing the destination only. Doesn't transfer files that are identical on source and destination, testing by size and modification time or MD5SUM. Destination is updated to match source, including deleting files if necessary (except duplicate objects, see below). If you don't want to delete files from destination, use the <a href="https://rclone.org/commands/rclone_copy/">copy</a> command instead.</p>
<p><strong>Important</strong>: Since this can cause data loss, test first with the <code>--dry-run</code> or the <code>--interactive</code>/<code>-i</code> flag.</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>rclone<span class="w"> </span>sync<span class="w"> </span>--interactive<span class="w"> </span>SOURCE<span class="w"> </span>remote:DESTINATION
</span></code></pre></div>
<p>Note that files in the destination won't be deleted if there were any errors at any point. Duplicate objects (files with the same name, on those providers that support it) are also not yet handled.</p>
<p>本地目录（文件夹）想和云盘同步时，可采用 <code>sync</code> 命令。</p>
<p>例1：将本地目录 <code>/usr/local/var/webdav/</code> 同步到 webDAV 云盘 webdav\@rpi4b:</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>rclone<span class="w"> </span>sync<span class="w"> </span>/usr/local/var/webdav/<span class="w"> </span>webdav@rpi4b:
</span></code></pre></div>
<p>例2：仅同步 srcpath 中 1h 之内有变动的文件：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>rclone<span class="w"> </span>sync<span class="w"> </span>-v<span class="w"> </span>~/Downloads/testdir<span class="w"> </span>webdav@mbpa2991:testdir<span class="w"> </span>--max-age<span class="w"> </span>1h
</span></code></pre></div>
<p>例3：将 ubuntu WebDAV 云盘 webdav\@rpi4b（除 C-C++/ 和 English/ 目录外）同步备份到外挂硬盘（/Volumes/WDHD/）下的文件夹 webdav@rpi4b：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="c1"># --exclude &quot;{C-C++/*, English/*}&quot;</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="c1"># 2-stderr 重定向到 1-stdout，管传给 tee 输出控制台并且保存（-a: append）到日志文件。</span>
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>$<span class="w"> </span>rclone<span class="w"> </span>sync<span class="w"> </span>-v<span class="w"> </span>webdav@rpi4b:<span class="w"> </span>/Volumes/WDHD/webdav@rpi4b<span class="w"> </span>--exclude<span class="w"> </span><span class="s2">&quot;C-C++/&quot;</span><span class="w"> </span>--exclude<span class="w"> </span><span class="s2">&quot;English/&quot;</span><span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>-a<span class="w"> </span>~/.config/rclone/rclone.log
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a>
</span><span id="__span-39-5"><a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a><span class="c1"># 补充备份 English 文件夹</span>
</span><span id="__span-39-6"><a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a>$<span class="w"> </span>rclone<span class="w"> </span>sync<span class="w"> </span>-v<span class="w"> </span>webdav@rpi4b:English<span class="w"> </span>/Volumes/WDHD/webdav@rpi4b/English<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>-a<span class="w"> </span>~/.config/rclone/rclone.log
</span><span id="__span-39-7"><a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a>
</span><span id="__span-39-8"><a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a><span class="c1"># 补充备份 C-C++ 文件夹</span>
</span><span id="__span-39-9"><a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a>$<span class="w"> </span>rclone<span class="w"> </span>sync<span class="w"> </span>-v<span class="w"> </span>webdav@rpi4b:C-C++<span class="w"> </span>/Volumes/WDHD/webdav@rpi4b/C-C++<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>-a<span class="w"> </span>~/.config/rclone/rclone.log
</span></code></pre></div>
<p>也可根据实际需求，选择只同步某些子文件夹。</p>
<div class="admonition note">
<p class="admonition-title">一种典型的单向同步工作流</p>
<ol>
<li>先将云盘某个目录 remote:dstpath 拷贝检出（类似 git clone check) 到本地文件夹 srcpath。</li>
<li>然后，以 srcpath 为工作目录进行本地文件编辑活动，包括新建、移动、删除等一系列操作。</li>
<li>编辑完毕，执行 <code>rclone sync srcpath dest:dstpath</code> 命令即可同步本地数据到服务端。</li>
</ol>
</div>
<h3 id="bisync">bisync<a class="headerlink" href="#bisync" title="Permanent link">#</a></h3>
<p>Perform bidirectional synchronization between two paths.</p>
<p><a href="https://rclone.org/bisync/">Bisync</a> provides a bidirectional cloud sync solution in rclone. It retains the Path1 and Path2 filesystem listings from the prior run. On each successive run it will:</p>
<ul>
<li>list files on Path1 and Path2, and check for changes on each side. Changes include <code>New</code>, <code>Newer</code>, <code>Older</code>, and <code>Deleted</code> files.</li>
<li>Propagate changes on Path1 to Path2, and vice-versa.</li>
</ul>
<p>Bisync is <strong>in beta</strong> and is considered an <strong>advanced command</strong>, so use with care. Make sure you have read and understood the entire <a href="https://rclone.org/bisync">manual</a> (especially the <a href="https://rclone.org/bisync/#limitations">Limitations</a> section) before using, or data loss can result. Questions can be asked in the <a href="https://forum.rclone.org/">Rclone Forum</a>.</p>
<p>See <a href="https://rclone.org/bisync/">full bisync description</a> for details.</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>rclone<span class="w"> </span>bisync<span class="w"> </span>remote1:path1<span class="w"> </span>remote2:path2<span class="w"> </span><span class="o">[</span>flags<span class="o">]</span>
</span></code></pre></div>
<p>假设配置了两个云盘：webdav@mbpa1398 和 webdav@rpi4b，彼此之间相当于备份。</p>
<p>在内网操作 webdav@mbpa1398，远程操作 webdav@rpi4b。</p>
<p>可采用 <code>bisync</code> 命令执行双向同步：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>rclone<span class="w"> </span>bisync<span class="w"> </span>webdav@mbpa1398:<span class="w"> </span>webdav@rpi4b:
</span></code></pre></div>
<p>假如某个文件基点为 file，在云盘 1 编辑为 file1，在云盘 2 编辑为 file2，双向同步时将以最后修改时间戳为准，没法自动合并？</p>
<ul>
<li><a href="https://github.com/rclone/rclone/issues/118">Two-way (bidirectional) synchronization</a></li>
<li><a href="https://forum.rclone.org/t/bisync-missed-syncing-changed-file-no-error-no-warning/41174">Bisync missed syncing changed file - no error, no warning</a></li>
<li><a href="https://forum.rclone.org/t/rclone-bisync-resync-discrepency-in-keeping-updated-modified-files/38495">rclone bisync --resync : discrepency in keeping updated/modified files</a></li>
</ul>
<p>一种可能的安全的工作流是，每次开始编辑（或编辑完）任何一个云盘，总是执行 bisync （先）双向同步，确保数据同步。</p>
<p>所以，最好以一个为主（编辑），另一个为辅（备份）。这样，相当于将主盘增量同步到备份盘。此时，退化为单向 sync：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>rclone<span class="w"> </span>sync<span class="w"> </span>webdav@mbpa1398:<span class="w"> </span>webdav@rpi4b:
</span></code></pre></div>
<h2 id="crontab">crontab<a class="headerlink" href="#crontab" title="Permanent link">#</a></h2>
<p><a href="https://rclone.org/bisync/">Bisync</a>: On Linux or Mac, consider setting up a crontab entry. <code>bisync</code> can safely run in concurrent cron jobs thanks to lock files it maintains.</p>
<p>可以通过 <a href="https://en.wikipedia.org/wiki/Cron">cron</a> / <a href="https://manpages.ubuntu.com/manpages/noble/en/man5/crontab.5.html">crontab - tables for driving bcron</a> 配置定时任务，每天自动执行同步。</p>
<p>参考 <a href="https://www.cherryservers.com/blog/how-to-use-cron-to-automate-linux-jobs-on-ubuntu-20-04">How to Use Cron to Automate Linux Jobs on Ubuntu 20.04</a> 和 <a href="https://askubuntu.com/questions/2368/how-do-i-set-up-a-cron-job">How do I set up a Cron job? - Ask Ubuntu</a>。</p>
<p>ubuntu 系统级别的 crontab 配置文件在 /etc/ 目录下（cron*）：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="c1"># ls -l /etc/cron*</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>$<span class="w"> </span>ls<span class="w"> </span>-l<span class="w"> </span>/etc<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>cron
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a>drwxr-xr-x<span class="w"> </span><span class="m">2</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">       </span><span class="m">4096</span><span class="w"> </span>Nov<span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">2022</span><span class="w"> </span>cron.d
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a>drwxr-xr-x<span class="w"> </span><span class="m">2</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">       </span><span class="m">4096</span><span class="w"> </span>Apr<span class="w">  </span><span class="m">7</span><span class="w"> </span><span class="m">05</span>:00<span class="w"> </span>cron.daily
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a>drwxr-xr-x<span class="w"> </span><span class="m">2</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">       </span><span class="m">4096</span><span class="w"> </span>Nov<span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">2022</span><span class="w"> </span>cron.hourly
</span><span id="__span-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a>drwxr-xr-x<span class="w"> </span><span class="m">2</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">       </span><span class="m">4096</span><span class="w"> </span>Nov<span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">2022</span><span class="w"> </span>cron.monthly
</span><span id="__span-43-7"><a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a>-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">       </span><span class="m">1136</span><span class="w"> </span>Aug<span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">2021</span><span class="w"> </span>crontab
</span><span id="__span-43-8"><a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a>drwxr-xr-x<span class="w"> </span><span class="m">2</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">       </span><span class="m">4096</span><span class="w"> </span>Nov<span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">2022</span><span class="w"> </span>cron.weekly
</span></code></pre></div>
<p>每个用户有一个以用户名命名的 crontab 配置文件，存放在 <code>/var/spool/cron/crontabs</code> 目录下。</p>
<p>macOS 下执行 <code>man cron</code>，FILES 显示 Directory for personal crontab files 为 <code>/usr/lib/cron/tabs</code>。</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>$<span class="w"> </span>sudo<span class="w"> </span>ls<span class="w"> </span>-l<span class="w"> </span>/usr/lib/cron/
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>total<span class="w"> </span><span class="m">0</span>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a>-rw-r--r--<span class="w">  </span><span class="m">1</span><span class="w"> </span>root<span class="w">    </span>wheel<span class="w">   </span><span class="m">0</span><span class="w"> </span>Mar<span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">15</span>:19<span class="w"> </span>at.deny
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a>-rw-r--r--<span class="w">  </span><span class="m">1</span><span class="w"> </span>root<span class="w">    </span>wheel<span class="w">   </span><span class="m">6</span><span class="w"> </span>Mar<span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">15</span>:19<span class="w"> </span>cron.deny
</span><span id="__span-44-5"><a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a>drwxr-xr-x<span class="w">  </span><span class="m">2</span><span class="w"> </span>daemon<span class="w">  </span>wheel<span class="w">  </span><span class="m">64</span><span class="w"> </span>Mar<span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">15</span>:19<span class="w"> </span><span class="nb">jobs</span>
</span><span id="__span-44-6"><a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a>drwxr-xr-x<span class="w">  </span><span class="m">2</span><span class="w"> </span>daemon<span class="w">  </span>wheel<span class="w">  </span><span class="m">64</span><span class="w"> </span>Mar<span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">15</span>:19<span class="w"> </span>spool
</span><span id="__span-44-7"><a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a>drwx------<span class="w">  </span><span class="m">3</span><span class="w"> </span>root<span class="w">    </span>wheel<span class="w">  </span><span class="m">96</span><span class="w"> </span>Mar<span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">15</span>:19<span class="w"> </span>tabs
</span><span id="__span-44-8"><a id="__codelineno-44-8" name="__codelineno-44-8" href="#__codelineno-44-8"></a>drwx------<span class="w">  </span><span class="m">2</span><span class="w"> </span>root<span class="w">    </span>wheel<span class="w">  </span><span class="m">64</span><span class="w"> </span>Mar<span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">15</span>:19<span class="w"> </span>tmp
</span><span id="__span-44-9"><a id="__codelineno-44-9" name="__codelineno-44-9" href="#__codelineno-44-9"></a>
</span><span id="__span-44-10"><a id="__codelineno-44-10" name="__codelineno-44-10" href="#__codelineno-44-10"></a>$<span class="w"> </span>sudo<span class="w"> </span>ls<span class="w"> </span>-l<span class="w"> </span>/usr/lib/cron/tabs
</span></code></pre></div>
<h3 id="ubuntu">ubuntu<a class="headerlink" href="#ubuntu" title="Permanent link">#</a></h3>
<p>用户可执行 <code>crontab -e</code> 打开一个类似 <code>/tmp/crontab.CNG0fm/crontab</code> 的临时文件，编辑 personal crontab。</p>
<p>在 rpi4b-ubuntu 上首次执行 <code>crontab -e</code>（注意不要 sudo），提示选择编辑器，选择 vim 打开编辑：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>$<span class="w"> </span>pifan@rpi4b-ubuntu<span class="w"> </span>~
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>crontab<span class="w"> </span>-e
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>no<span class="w"> </span>crontab<span class="w"> </span><span class="k">for</span><span class="w"> </span>pifan<span class="w"> </span>-<span class="w"> </span>using<span class="w"> </span>an<span class="w"> </span>empty<span class="w"> </span>one
</span><span id="__span-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a>
</span><span id="__span-45-5"><a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a>Select<span class="w"> </span>an<span class="w"> </span>editor.<span class="w">  </span>To<span class="w"> </span>change<span class="w"> </span>later,<span class="w"> </span>run<span class="w"> </span><span class="s1">&#39;select-editor&#39;</span>.
</span><span id="__span-45-6"><a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a><span class="w">  </span><span class="m">1</span>.<span class="w"> </span>/usr/bin/vim.gtk3
</span><span id="__span-45-7"><a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a><span class="w">  </span><span class="m">2</span>.<span class="w"> </span>/bin/nano<span class="w">        </span>&lt;----<span class="w"> </span>easiest
</span><span id="__span-45-8"><a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a><span class="w">  </span><span class="m">3</span>.<span class="w"> </span>/usr/bin/vim.basic
</span><span id="__span-45-9"><a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a><span class="w">  </span><span class="m">4</span>.<span class="w"> </span>/usr/bin/vim.tiny
</span><span id="__span-45-10"><a id="__codelineno-45-10" name="__codelineno-45-10" href="#__codelineno-45-10"></a><span class="w">  </span><span class="m">5</span>.<span class="w"> </span>/bin/ed
</span><span id="__span-45-11"><a id="__codelineno-45-11" name="__codelineno-45-11" href="#__codelineno-45-11"></a>
</span><span id="__span-45-12"><a id="__codelineno-45-12" name="__codelineno-45-12" href="#__codelineno-45-12"></a>Choose<span class="w"> </span><span class="m">1</span>-5<span class="w"> </span><span class="o">[</span><span class="m">2</span><span class="o">]</span>:<span class="w"> </span><span class="m">3</span>
</span></code></pre></div>
<p>文档注释中有关于配置项的说明：</p>
<div class="language-Shell highlight"><span class="filename">crontab -e Cron Syntax</span><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="c1"># To define the time you can provide concrete values for</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="c1"># minute (m), hour (h), day of month (dom), month (mon),</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="c1"># and day of week (dow) or use &#39;*&#39; in these fields (for &#39;any&#39;).</span>
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a><span class="c1">#</span>
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a><span class="c1"># For more information see the manual pages of crontab(5) and cron(8)</span>
</span><span id="__span-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a><span class="c1">#</span>
</span><span id="__span-46-7"><a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a><span class="c1"># m h  dom mon dow   command</span>
</span></code></pre></div>
<details class="note">
<summary>man 5 crontab</summary>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>Instead<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>first<span class="w"> </span>five<span class="w"> </span>fields,<span class="w"> </span>one<span class="w"> </span>of<span class="w"> </span>eight<span class="w"> </span>special<span class="w"> </span>strings<span class="w"> </span>may<span class="w"> </span>appear:
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a><span class="w">    </span>string<span class="w">         </span>meaning
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a><span class="w">    </span>------<span class="w">         </span>-------
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a><span class="w">    </span>@reboot<span class="w">        </span>Run<span class="w"> </span>once,<span class="w"> </span>at<span class="w"> </span>startup.
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a><span class="w">    </span>@yearly<span class="w">        </span>Run<span class="w"> </span>once<span class="w"> </span>a<span class="w"> </span>year,<span class="w"> </span><span class="s2">&quot;0 0 1 1 *&quot;</span>.
</span><span id="__span-47-7"><a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a><span class="w">    </span>@annually<span class="w">      </span><span class="o">(</span>same<span class="w"> </span>as<span class="w"> </span>@yearly<span class="o">)</span>
</span><span id="__span-47-8"><a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a><span class="w">    </span>@monthly<span class="w">       </span>Run<span class="w"> </span>once<span class="w"> </span>a<span class="w"> </span>month,<span class="w"> </span><span class="s2">&quot;0 0 1 * *&quot;</span>.
</span><span id="__span-47-9"><a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a><span class="w">    </span>@weekly<span class="w">        </span>Run<span class="w"> </span>once<span class="w"> </span>a<span class="w"> </span>week,<span class="w"> </span><span class="s2">&quot;0 0 * * 0&quot;</span>.
</span><span id="__span-47-10"><a id="__codelineno-47-10" name="__codelineno-47-10" href="#__codelineno-47-10"></a><span class="w">    </span>@daily<span class="w">         </span>Run<span class="w"> </span>once<span class="w"> </span>a<span class="w"> </span>day,<span class="w"> </span><span class="s2">&quot;0 0 * * *&quot;</span>.
</span><span id="__span-47-11"><a id="__codelineno-47-11" name="__codelineno-47-11" href="#__codelineno-47-11"></a><span class="w">    </span>@midnight<span class="w">      </span><span class="o">(</span>same<span class="w"> </span>as<span class="w"> </span>@daily<span class="o">)</span>
</span><span id="__span-47-12"><a id="__codelineno-47-12" name="__codelineno-47-12" href="#__codelineno-47-12"></a><span class="w">    </span>@hourly<span class="w">        </span>Run<span class="w"> </span>once<span class="w"> </span>an<span class="w"> </span>hour,<span class="w"> </span><span class="s2">&quot;0 * * * *&quot;</span>.
</span><span id="__span-47-13"><a id="__codelineno-47-13" name="__codelineno-47-13" href="#__codelineno-47-13"></a>
</span><span id="__span-47-14"><a id="__codelineno-47-14" name="__codelineno-47-14" href="#__codelineno-47-14"></a><span class="sb">`</span><span class="m">8</span>-11<span class="sb">`</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>an<span class="w"> </span>hours<span class="w"> </span>entry<span class="w"> </span>specifies<span class="w"> </span>execution<span class="w"> </span>at<span class="w"> </span>hours<span class="w"> </span><span class="m">8</span>,<span class="w"> </span><span class="m">9</span>,<span class="w"> </span><span class="m">10</span><span class="w"> </span>and<span class="w"> </span><span class="m">11</span>.
</span><span id="__span-47-15"><a id="__codelineno-47-15" name="__codelineno-47-15" href="#__codelineno-47-15"></a>
</span><span id="__span-47-16"><a id="__codelineno-47-16" name="__codelineno-47-16" href="#__codelineno-47-16"></a>A<span class="w"> </span>list<span class="w"> </span>is<span class="w"> </span>a<span class="w"> </span><span class="nb">set</span><span class="w"> </span>of<span class="w"> </span>numbers<span class="w"> </span><span class="o">(</span>or<span class="w"> </span>ranges<span class="o">)</span><span class="w"> </span>separated<span class="w"> </span>by<span class="w"> </span>commas.<span class="w"> </span>Examples:<span class="w"> </span><span class="sb">`</span><span class="m">1</span>,2,5,9<span class="sb">`</span>,<span class="w"> </span><span class="sb">`</span><span class="m">0</span>-4,8-12<span class="sb">`</span>.
</span><span id="__span-47-17"><a id="__codelineno-47-17" name="__codelineno-47-17" href="#__codelineno-47-17"></a>
</span><span id="__span-47-18"><a id="__codelineno-47-18" name="__codelineno-47-18" href="#__codelineno-47-18"></a><span class="sb">`</span><span class="m">0</span>-23/2<span class="sb">`</span><span class="w"> </span>can<span class="w"> </span>be<span class="w"> </span>used<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>hours<span class="w"> </span>field<span class="w"> </span>to<span class="w"> </span>specify<span class="w"> </span><span class="nb">command</span><span class="w"> </span>execution<span class="w"> </span>every<span class="w"> </span>other<span class="w"> </span>hour
</span><span id="__span-47-19"><a id="__codelineno-47-19" name="__codelineno-47-19" href="#__codelineno-47-19"></a>
</span><span id="__span-47-20"><a id="__codelineno-47-20" name="__codelineno-47-20" href="#__codelineno-47-20"></a><span class="k">if</span><span class="w"> </span>you<span class="w"> </span>want<span class="w"> </span>to<span class="w"> </span>say<span class="w"> </span><span class="sb">``</span>every<span class="w"> </span>two<span class="w"> </span>hours<span class="s1">&#39;&#39;</span>,<span class="w"> </span>just<span class="w"> </span>use<span class="w"> </span><span class="sb">`</span>*/2<span class="sb">`</span>.
</span><span id="__span-47-21"><a id="__codelineno-47-21" name="__codelineno-47-21" href="#__codelineno-47-21"></a>
</span><span id="__span-47-22"><a id="__codelineno-47-22" name="__codelineno-47-22" href="#__codelineno-47-22"></a>EXAMPLE<span class="w"> </span>CRON<span class="w"> </span>FILE
</span><span id="__span-47-23"><a id="__codelineno-47-23" name="__codelineno-47-23" href="#__codelineno-47-23"></a><span class="w">       </span><span class="c1"># run five minutes after midnight, every day</span>
</span><span id="__span-47-24"><a id="__codelineno-47-24" name="__codelineno-47-24" href="#__codelineno-47-24"></a><span class="w">       </span><span class="m">5</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w">       </span><span class="nv">$HOME</span>/bin/daily.job<span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$HOME</span>/tmp/out<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
</span><span id="__span-47-25"><a id="__codelineno-47-25" name="__codelineno-47-25" href="#__codelineno-47-25"></a><span class="w">       </span><span class="c1"># run at 2:15pm on the first of every month — output mailed to paul</span>
</span><span id="__span-47-26"><a id="__codelineno-47-26" name="__codelineno-47-26" href="#__codelineno-47-26"></a><span class="w">       </span><span class="m">15</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>*<span class="w"> </span>*<span class="w">     </span><span class="nv">$HOME</span>/bin/monthly
</span><span id="__span-47-27"><a id="__codelineno-47-27" name="__codelineno-47-27" href="#__codelineno-47-27"></a><span class="w">       </span><span class="c1"># run at 10 pm on weekdays, annoy Joe</span>
</span><span id="__span-47-28"><a id="__codelineno-47-28" name="__codelineno-47-28" href="#__codelineno-47-28"></a><span class="w">       </span><span class="m">0</span><span class="w"> </span><span class="m">22</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span><span class="m">1</span>-5<span class="w">    </span>mail<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;It&#39;s 10pm&quot;</span><span class="w"> </span>joe%Joe,%%Where<span class="w"> </span>are<span class="w"> </span>your<span class="w"> </span>kids?%
</span><span id="__span-47-29"><a id="__codelineno-47-29" name="__codelineno-47-29" href="#__codelineno-47-29"></a><span class="w">       </span><span class="m">23</span><span class="w"> </span><span class="m">0</span>-23/2<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;run 23 minutes after midn, 2am, 4am ..., everyday&quot;</span>
</span><span id="__span-47-30"><a id="__codelineno-47-30" name="__codelineno-47-30" href="#__codelineno-47-30"></a><span class="w">       </span><span class="m">5</span><span class="w"> </span><span class="m">4</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>sun<span class="w">     </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;run at 5 after 4 every Sunday&quot;</span>
</span><span id="__span-47-31"><a id="__codelineno-47-31" name="__codelineno-47-31" href="#__codelineno-47-31"></a><span class="w">       </span><span class="m">0</span><span class="w"> </span>*/4<span class="w"> </span><span class="m">1</span><span class="w"> </span>*<span class="w"> </span>mon<span class="w">   </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;run every 4th hour on the 1st and on every Monday&quot;</span>
</span><span id="__span-47-32"><a id="__codelineno-47-32" name="__codelineno-47-32" href="#__codelineno-47-32"></a><span class="w">       </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>*/2<span class="w"> </span>*<span class="w"> </span>sun<span class="w">   </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;run at midn on every Sunday that&#39;s an uneven date&quot;</span>
</span><span id="__span-47-33"><a id="__codelineno-47-33" name="__codelineno-47-33" href="#__codelineno-47-33"></a><span class="w">       </span><span class="c1"># Run on every second Saturday of the month</span>
</span><span id="__span-47-34"><a id="__codelineno-47-34" name="__codelineno-47-34" href="#__codelineno-47-34"></a><span class="w">       </span><span class="m">0</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">8</span>-14<span class="w"> </span>*<span class="w"> </span>*<span class="w">    </span><span class="nb">test</span><span class="w"> </span><span class="k">$(</span>date<span class="w"> </span>+<span class="se">\%</span>u<span class="k">)</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;2nd Saturday&quot;</span>
</span><span id="__span-47-35"><a id="__codelineno-47-35" name="__codelineno-47-35" href="#__codelineno-47-35"></a>
</span><span id="__span-47-36"><a id="__codelineno-47-36" name="__codelineno-47-36" href="#__codelineno-47-36"></a><span class="w">       </span><span class="c1"># Execute a program and run a notification every day at 10:00 am</span>
</span><span id="__span-47-37"><a id="__codelineno-47-37" name="__codelineno-47-37" href="#__codelineno-47-37"></a><span class="w">       </span><span class="m">0</span><span class="w"> </span><span class="m">10</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w">  </span><span class="nv">$HOME</span>/bin/program<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">DISPLAY</span><span class="o">=</span>:0<span class="w"> </span>notify-send<span class="w"> </span><span class="s2">&quot;Program run&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>cat<span class="k">)</span><span class="s2">&quot;</span>
</span></code></pre></div>
</details>
<p>执行 <code>crontab -e</code> 在末尾新增一条测试任务，每分钟执行 echo 写入文件 time.txt。</p>
<div class="language-Shell highlight"><span class="filename">crontab -e test</span><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>*/1<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;echo from crontab&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/home/pifan/Downloads/time.txt
</span></code></pre></div>
<p>整点分钟，观察 time.txt 是否有追加内容，以验证 cron 任务正常执行。</p>
<p>在 cron table 末尾新增一条任务，每天定点执行 rclone sync，将 webdav 云盘自动同步到外挂硬盘（<code>/media/WDHD/</code>）。</p>
<div class="language-Shell highlight"><span class="filename">crontab -e hourly</span><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="c1"># auto backup every two hours(0,2,4,6,8,10,12,14,16,18,20,22)</span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a><span class="c1"># 0 */2 * * * rclone sync -v webdav-rpi4b: /media/WDHD/webdav@rpi4b &gt;&gt; /var/log/rclone.log 2&gt;&amp;1</span>
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a><span class="m">0</span><span class="w"> </span>*/2<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>rclone<span class="w"> </span>sync<span class="w"> </span>-v<span class="w"> </span>webdav-rpi4b:<span class="w"> </span>/media/WDHD/webdav@rpi4b<span class="w"> </span>--log-file<span class="o">=</span>/home/pifan/.config/rclone/rclone-<span class="sb">`</span>date<span class="w"> </span>+<span class="se">\%</span>Y<span class="se">\%</span>m<span class="se">\%</span>d<span class="sb">`</span>.log
</span></code></pre></div>
<p>如果后续文件改动不是那么频繁，可以改为每天同步一次，日志文件按月命名。</p>
<blockquote>
<p>webdav 编辑大文件时经常出现同步问题导致文件损坏，可指定 <code>--min-size SizeSuffix</code> 选项，只备份大于 SizeSuffix（例如 10M）的大文件。</p>
</blockquote>
<div class="language-Shell highlight"><span class="filename">crontab -e daily</span><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="c1"># 每天凌晨1点同步备份</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>rclone<span class="w"> </span>sync<span class="w"> </span>-v<span class="w"> </span>webdav-rpi4b:<span class="w"> </span>/media/WDHD/webdav@rpi4b<span class="w"> </span>--log-file<span class="o">=</span>/home/pifan/.config/rclone/rclone-<span class="sb">`</span>date<span class="w"> </span>+<span class="se">\%</span>Y<span class="se">\%</span>m<span class="sb">`</span>.log
</span></code></pre></div>
<p>输入 <code>:wq</code> 保存退出 vim，命令行提示 <code>crontab: installing new crontab</code>。</p>
<p>编辑的 personal crontab 将自动追加到 <code>/var/spool/cron/crontabs/$USER</code> 文件中。</p>
<p>执行 <code>sudo systemctl restart cron.service</code> 重启定时任务使其生效。</p>
<div class="admonition note">
<p class="admonition-title">关于 rclone 运行日志路径</p>
<p>建议通过 <a href="https://rclone.org/docs/#log-file-file">--log-file=FILE</a> 选项为 rclone 指定用户级别的日志路径。<br />
参考 <a href="https://serverfault.com/questions/117360/sending-cron-output-to-a-file-with-a-timestamp-in-its-name">Sending cron output to a file with a timestamp in its name</a>，日志文件按天命名。<br />
如若使用全局日志路径 /var/log/rclone.log，则需先 <code>sudo touch</code> 再 <code>sudo chown</code> 为当前用户组。<br />
macOS 下的 rclone 运行日志可以考虑放到 /usr/local/var/log 目录下。</p>
</div>
<div class="admonition note">
<p class="admonition-title">crontab list &amp; remove</p>
<p>执行 <code>crontab -l</code> 可以查看当前用户的任务列表，或通过 <code>-u</code> 选项查看指定用户的任务列表 <code>crontab -l -u pifan</code>。<br />
执行 <code>crontab -r</code> 可以移除当前用户配置的任务列表，或 <code>crontab -ri</code> 带 interactive prompt 确认。</p>
</div>
<h3 id="macos">macOS<a class="headerlink" href="#macos" title="Permanent link">#</a></h3>
<p>在 macOS 上首次执行 <code>crontab -e</code>，将临时打开一个空文件，默认使用编辑器 /usr/bin/vi。<br />
在末尾新增一条测试任务，每分钟执行 date 写入文件 time.txt。</p>
<div class="language-Shell highlight"><span class="filename">crontab -e test</span><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>*/1<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>date<span class="w"> </span>&gt;&gt;<span class="w"> </span>/Users/faner/Downloads/time.txt
</span></code></pre></div>
<p>保存退回到终端，命令行显示以下内容：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a>$<span class="w"> </span>crontab<span class="w"> </span>-e
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a>crontab:<span class="w"> </span>no<span class="w"> </span>crontab<span class="w"> </span><span class="k">for</span><span class="w"> </span>faner<span class="w"> </span>-<span class="w"> </span>using<span class="w"> </span>an<span class="w"> </span>empty<span class="w"> </span>one
</span><span id="__span-52-3"><a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a>crontab:<span class="w"> </span>installing<span class="w"> </span>new<span class="w"> </span>crontab
</span></code></pre></div>
<p>执行 <code>crontab -l</code> 可以查看配置内容。</p>
<blockquote>
<p>personal crontab 目录下会多出一个以当前用户名（$USER）命名的配置文件，如 /usr/lib/cron/tabs/faner。</p>
</blockquote>
<p>整点分钟，观察 time.txt 是否有追加内容，以验证 cron 任务正常执行。</p>
<p>如果之前未在 macOS 上配置过 cron，大概率会失败，按照以下步骤配置。</p>
<div class="admonition note">
<p class="admonition-title">macOS 下的 cron</p>
<p>macOS 下的 cron 是系统启动服务（LaunchDaemons），每次执行 <code>crontab -e</code> 编辑保存，都提示需要授权终端管理员权限！</p>
</div>
<p>首先从 launchctl list 中查找 cron 服务：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>$<span class="w"> </span>sudo<span class="w"> </span>launchctl<span class="w"> </span>list<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s1">&#39;cron&#39;</span>
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a><span class="m">86386</span><span class="w">   </span><span class="m">0</span><span class="w">   </span>com.vix.cron
</span></code></pre></div>
<p>其中第一列是服务进程ID（pid）；第二列是服务状态，0代表正常；第三列是服务plist名。</p>
<p>尝试执行 <code>locate com.vix.cron</code> 全局查找 cron 服务的配置文件位置：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a>$<span class="w"> </span>locate<span class="w"> </span>com.vix.cron
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a>WARNING:<span class="w"> </span>The<span class="w"> </span>locate<span class="w"> </span>database<span class="w"> </span><span class="o">(</span>/var/db/locate.database<span class="o">)</span><span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>exist.
</span><span id="__span-54-4"><a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a>To<span class="w"> </span>create<span class="w"> </span>the<span class="w"> </span>database,<span class="w"> </span>run<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>command:
</span><span id="__span-54-5"><a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a>
</span><span id="__span-54-6"><a id="__codelineno-54-6" name="__codelineno-54-6" href="#__codelineno-54-6"></a><span class="w">  </span>sudo<span class="w"> </span>launchctl<span class="w"> </span>load<span class="w"> </span>-w<span class="w"> </span>/System/Library/LaunchDaemons/com.apple.locate.plist
</span><span id="__span-54-7"><a id="__codelineno-54-7" name="__codelineno-54-7" href="#__codelineno-54-7"></a>
</span><span id="__span-54-8"><a id="__codelineno-54-8" name="__codelineno-54-8" href="#__codelineno-54-8"></a>Please<span class="w"> </span>be<span class="w"> </span>aware<span class="w"> </span>that<span class="w"> </span>the<span class="w"> </span>database<span class="w"> </span>can<span class="w"> </span>take<span class="w"> </span>some<span class="w"> </span><span class="nb">time</span><span class="w"> </span>to<span class="w"> </span>generate<span class="p">;</span><span class="w"> </span>once
</span><span id="__span-54-9"><a id="__codelineno-54-9" name="__codelineno-54-9" href="#__codelineno-54-9"></a>the<span class="w"> </span>database<span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>created,<span class="w"> </span>this<span class="w"> </span>message<span class="w"> </span>will<span class="w"> </span>no<span class="w"> </span>longer<span class="w"> </span>appear.
</span></code></pre></div>
<p>按照提示执行加载 <code>com.apple.locate</code> 服务，创建一个database：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a>$<span class="w"> </span>sudo<span class="w"> </span>launchctl<span class="w"> </span>load<span class="w"> </span>-w<span class="w"> </span>/System/Library/LaunchDaemons/com.apple.locate.plist
</span></code></pre></div>
<p>然后，再次执行 <code>locate com.vix.cron</code> 查找到 cron 服务的配置文件位置：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a>$<span class="w"> </span>locate<span class="w"> </span>com.vix.cron
</span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a>/System/Library/LaunchDaemons/com.vix.cron.plist
</span></code></pre></div>
<p>执行 cat 或 vim 查看该配置文件，发现其 PathState 中的 <code>/etc/crontab</code> 配置文件默认不存在。</p>
<details class="info">
<summary>com.vix.cron.plist</summary>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="w"> </span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
</span><span id="__span-57-2"><a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a><span class="w"> </span><span class="cp">&lt;!DOCTYPE plist PUBLIC &quot;-//Apple Computer//DTD PLIST 1.0//EN&quot;</span>
</span><span id="__span-57-3"><a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a><span class="cp">    &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;</span>
</span><span id="__span-57-4"><a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a><span class="w"> </span><span class="nt">&lt;plist</span><span class="w"> </span><span class="na">version=</span><span class="s">&quot;1.0&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-57-5"><a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a><span class="w"> </span><span class="nt">&lt;dict&gt;</span>
</span><span id="__span-57-6"><a id="__codelineno-57-6" name="__codelineno-57-6" href="#__codelineno-57-6"></a><span class="w">    </span><span class="nt">&lt;key&gt;</span>Label<span class="nt">&lt;/key&gt;</span>
</span><span id="__span-57-7"><a id="__codelineno-57-7" name="__codelineno-57-7" href="#__codelineno-57-7"></a><span class="w">    </span><span class="nt">&lt;string&gt;</span>com.vix.cron<span class="nt">&lt;/string&gt;</span>
</span><span id="__span-57-8"><a id="__codelineno-57-8" name="__codelineno-57-8" href="#__codelineno-57-8"></a><span class="w">    </span><span class="nt">&lt;key&gt;</span>ProgramArguments<span class="nt">&lt;/key&gt;</span>
</span><span id="__span-57-9"><a id="__codelineno-57-9" name="__codelineno-57-9" href="#__codelineno-57-9"></a><span class="w">    </span><span class="nt">&lt;array&gt;</span>
</span><span id="__span-57-10"><a id="__codelineno-57-10" name="__codelineno-57-10" href="#__codelineno-57-10"></a><span class="w">        </span><span class="nt">&lt;string&gt;</span>/usr/sbin/cron<span class="nt">&lt;/string&gt;</span>
</span><span id="__span-57-11"><a id="__codelineno-57-11" name="__codelineno-57-11" href="#__codelineno-57-11"></a><span class="w">    </span><span class="nt">&lt;/array&gt;</span>
</span><span id="__span-57-12"><a id="__codelineno-57-12" name="__codelineno-57-12" href="#__codelineno-57-12"></a><span class="w">    </span><span class="nt">&lt;key&gt;</span>KeepAlive<span class="nt">&lt;/key&gt;</span>
</span><span id="__span-57-13"><a id="__codelineno-57-13" name="__codelineno-57-13" href="#__codelineno-57-13"></a><span class="w">    </span><span class="nt">&lt;dict&gt;</span>
</span><span id="__span-57-14"><a id="__codelineno-57-14" name="__codelineno-57-14" href="#__codelineno-57-14"></a><span class="w">        </span><span class="nt">&lt;key&gt;</span>PathState<span class="nt">&lt;/key&gt;</span>
</span><span id="__span-57-15"><a id="__codelineno-57-15" name="__codelineno-57-15" href="#__codelineno-57-15"></a><span class="w">        </span><span class="nt">&lt;dict&gt;</span>
</span><span id="__span-57-16"><a id="__codelineno-57-16" name="__codelineno-57-16" href="#__codelineno-57-16"></a><span class="w">            </span><span class="nt">&lt;key&gt;</span>/etc/crontab<span class="nt">&lt;/key&gt;</span>
</span><span id="__span-57-17"><a id="__codelineno-57-17" name="__codelineno-57-17" href="#__codelineno-57-17"></a><span class="w">            </span><span class="nt">&lt;true/&gt;</span>
</span><span id="__span-57-18"><a id="__codelineno-57-18" name="__codelineno-57-18" href="#__codelineno-57-18"></a><span class="w">        </span><span class="nt">&lt;/dict&gt;</span>
</span><span id="__span-57-19"><a id="__codelineno-57-19" name="__codelineno-57-19" href="#__codelineno-57-19"></a><span class="w">    </span><span class="nt">&lt;/dict&gt;</span>
</span><span id="__span-57-20"><a id="__codelineno-57-20" name="__codelineno-57-20" href="#__codelineno-57-20"></a><span class="w">    </span><span class="nt">&lt;key&gt;</span>QueueDirectories<span class="nt">&lt;/key&gt;</span>
</span><span id="__span-57-21"><a id="__codelineno-57-21" name="__codelineno-57-21" href="#__codelineno-57-21"></a><span class="w">    </span><span class="nt">&lt;array&gt;</span>
</span><span id="__span-57-22"><a id="__codelineno-57-22" name="__codelineno-57-22" href="#__codelineno-57-22"></a><span class="w">        </span><span class="nt">&lt;string&gt;</span>/usr/lib/cron/tabs<span class="nt">&lt;/string&gt;</span>
</span><span id="__span-57-23"><a id="__codelineno-57-23" name="__codelineno-57-23" href="#__codelineno-57-23"></a><span class="w">    </span><span class="nt">&lt;/array&gt;</span>
</span><span id="__span-57-24"><a id="__codelineno-57-24" name="__codelineno-57-24" href="#__codelineno-57-24"></a><span class="w">    </span><span class="nt">&lt;key&gt;</span>EnableTransactions<span class="nt">&lt;/key&gt;</span>
</span><span id="__span-57-25"><a id="__codelineno-57-25" name="__codelineno-57-25" href="#__codelineno-57-25"></a><span class="w">    </span><span class="nt">&lt;true/&gt;</span>
</span><span id="__span-57-26"><a id="__codelineno-57-26" name="__codelineno-57-26" href="#__codelineno-57-26"></a><span class="w"> </span><span class="nt">&lt;/dict&gt;</span>
</span><span id="__span-57-27"><a id="__codelineno-57-27" name="__codelineno-57-27" href="#__codelineno-57-27"></a><span class="w"> </span><span class="nt">&lt;/plist&gt;</span>
</span></code></pre></div>
</details>
<p>执行 <code>sudo vim /etc/crontab</code> 创建 <code>/etc/crontab</code> 文件，参考 ubuntu 填入以下模版内容：</p>
<div class="language-Shell highlight"><span class="filename">/etc/crontab</span><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="nv">SHELL</span><span class="o">=</span>/bin/bash
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a><span class="nv">PATH</span><span class="o">=</span>/sbin:/bin:/usr/sbin:/usr/bin
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a><span class="nv">MAILTO</span><span class="o">=</span>root
</span><span id="__span-58-4"><a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a>
</span><span id="__span-58-5"><a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a><span class="c1"># For details see man 4 crontabs</span>
</span><span id="__span-58-6"><a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a>
</span><span id="__span-58-7"><a id="__codelineno-58-7" name="__codelineno-58-7" href="#__codelineno-58-7"></a><span class="c1"># Example of job definition:</span>
</span><span id="__span-58-8"><a id="__codelineno-58-8" name="__codelineno-58-8" href="#__codelineno-58-8"></a><span class="c1"># .---------------- minute (0 - 59)</span>
</span><span id="__span-58-9"><a id="__codelineno-58-9" name="__codelineno-58-9" href="#__codelineno-58-9"></a><span class="c1"># |  .------------- hour (0 - 23)</span>
</span><span id="__span-58-10"><a id="__codelineno-58-10" name="__codelineno-58-10" href="#__codelineno-58-10"></a><span class="c1"># |  |  .---------- day of month (1 - 31)</span>
</span><span id="__span-58-11"><a id="__codelineno-58-11" name="__codelineno-58-11" href="#__codelineno-58-11"></a><span class="c1"># |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span>
</span><span id="__span-58-12"><a id="__codelineno-58-12" name="__codelineno-58-12" href="#__codelineno-58-12"></a><span class="c1"># |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span>
</span><span id="__span-58-13"><a id="__codelineno-58-13" name="__codelineno-58-13" href="#__codelineno-58-13"></a><span class="c1"># |  |  |  |  |</span>
</span><span id="__span-58-14"><a id="__codelineno-58-14" name="__codelineno-58-14" href="#__codelineno-58-14"></a><span class="c1"># *  *  *  *  * user-name  command to be executed</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">macOS 重启 cron 服务</p>
<ol>
<li>
<p>cron 服务开启、关闭、重启：</p>
<ul>
<li>sudo /usr/sbin/cron start</li>
<li>sudo /usr/sbin/cron stop</li>
<li>sudo /usr/sbin/cron restart</li>
</ul>
</li>
<li>
<p>如果修改了配置文件，执行 launchctl load 命令（可添加 -w 选项）：</p>
<ul>
<li>sudo launchctl load /System/Library/LaunchDaemons/com.vix.cron.plist</li>
<li>sudo launchctl unload /System/Library/LaunchDaemons/com.vix.cron.plist</li>
</ul>
</li>
</ol>
</div>
<p>执行完以上配置，再观察检查 time.txt。如果还没有内容，可能是该测试命令涉及到写磁盘文件，需要给 cron 授权。</p>
<div class="admonition note">
<p class="admonition-title">授权 cron 写磁盘权限</p>
<p><a href="https://osxdaily.com/2020/04/27/fix-cron-permissions-macos-full-disk-access/">How to Fix Cron Permission Issues in macOS</a><br />
 1. 执行 <code>which cron</code> 查找到 cron 命令的位置：/usr/sbin/cron。<br />
 2. 打开 macOS 设置(System Settings)，隐私与安全性(Privacy &amp; Security)，点进完全磁盘访问权限(Full Disk Access)。<br />
 3. 点按左下角的 + 号，在打开的访达窗口按 <span class="keys"><kbd class="key-shift">Shift</kbd><span>+</span><kbd class="key-command">Cmd</kbd><span>+</span><kbd class="key-g">G</kbd></span> 调出路径访问方式，输入 <code>/usr/sbin/cron</code> 回车，找到 cron 命令添加。</p>
</div>
<p>正常情况下，到这一步，time.txt 中应该可以看到，每分钟追加写入了一行当前日期时间。</p>
<p>接下来配置 crontab 定时任务，白天每隔两小时备份一下特定文件，并按时辰命名。</p>
<div class="language-Shell highlight"><span class="filename">crontab -e</span><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="c1"># every two hour: 5,7,9,11,13,15,17,19,21,23</span>
</span><span id="__span-59-2"><a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a><span class="m">0</span><span class="w"> </span><span class="m">5</span>-23/2<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>rclone<span class="w"> </span>copyto<span class="w"> </span>-v<span class="w"> </span>/Users/faner/Documents/English/LINKIN-WORDS-7000/恋词考研英语-全真题源报刊7000词-索引红版.pdf<span class="w"> </span>smbhd@rpi4b:WDHD/backups/English/恋词考研英语-全真题源报刊7000词-索引红版-<span class="sb">`</span>date<span class="w"> </span>+<span class="se">\%</span>Y<span class="se">\%</span>m<span class="se">\%</span>d<span class="se">\%</span>H<span class="sb">`</span>.pdf<span class="w"> </span>--log-file<span class="o">=</span>/Users/faner/.config/rclone/rclone-<span class="sb">`</span>date<span class="w"> </span>+<span class="se">\%</span>Y<span class="se">\%</span>m<span class="sb">`</span>.log
</span></code></pre></div>
<p>先把调度时间改为每分钟，看看是否正常运行：</p>
<div class="language-Shell highlight"><span class="filename">crontab -e</span><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a>*/1<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>rclone<span class="w"> </span>copyto<span class="w"> </span>-v<span class="w"> </span>/Users/faner/Documents/English/LINKIN-WORDS-7000/恋词考研英语-全真题源报刊7000词-索引红版.pdf<span class="w"> </span>smbhd@rpi4b:WDHD/backups/English/恋词考研英语-全真题源报刊7000词-索引红版-<span class="sb">`</span>date<span class="w"> </span>+<span class="se">\%</span>Y<span class="se">\%</span>m<span class="se">\%</span>d<span class="se">\%</span>H<span class="se">\%</span>M<span class="sb">`</span>.pdf<span class="w"> </span>--log-file<span class="o">=</span>/Users/faner/.config/rclone/rclone-<span class="sb">`</span>date<span class="w"> </span>+<span class="se">\%</span>Y<span class="se">\%</span>m<span class="sb">`</span>.log
</span></code></pre></div>
<p>等了几分钟，查看 rclone 日志文件没有相应运行日志，在 dstpath 中也没有看到预期同步的文件。</p>
<p>cron 执行出错时默认会通过 MTA 服务给系统管理员发邮件，执行 <code>vim /var/mail/$USER</code> 检查当前用户的邮箱。</p>
<p>果然，其中提示找不到 rclone 命令：</p>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a>/bin/sh:<span class="w"> </span>rclone:<span class="w"> </span><span class="nb">command</span><span class="w"> </span>not<span class="w"> </span>found
</span></code></pre></div>
<p>执行 <code>which rclone</code>，显示 brew 安装的 rclone 路径为 <code>/usr/local/bin/rclone</code>。</p>
<p>可能系统服务启动的 shell 环境的 PATH 中并没有 /usr/local/bin。</p>
<p>将 rclone 命令改为绝对路径 <code>/usr/local/bin/rclone</code>：</p>
<div class="language-Shell highlight"><span class="filename">crontab -e</span><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a>*/1<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>/usr/local/bin/rclone<span class="w"> </span>copyto<span class="w"> </span>-v<span class="w"> </span>/Users/faner/Documents/English/LINKIN-WORDS-7000/恋词考研英语-全真题源报刊7000词-索引红版.pdf<span class="w"> </span>smbhd@rpi4b:WDHD/backups/English/恋词考研英语-全真题源报刊7000词-索引红版-<span class="sb">`</span>date<span class="w"> </span>+<span class="se">\%</span>Y<span class="se">\%</span>m<span class="se">\%</span>d<span class="se">\%</span>H<span class="se">\%</span>M<span class="sb">`</span>.pdf<span class="w"> </span>--log-file<span class="o">=</span>/Users/faner/.config/rclone/rclone-<span class="sb">`</span>date<span class="w"> </span>+<span class="se">\%</span>Y<span class="se">\%</span>m<span class="sb">`</span>.log
</span></code></pre></div>
<div class="admonition note">
<p>由于以上命令是 rclone copyto remote（upload），读本地写远端，所以不涉及本地写磁盘权限问题。<br />
如果是 rclone copyto local（download），可能涉及写磁盘权限问题，按照上面的步骤开启授权即可。</p>
</div>
<p>验证任务生效后，将调度时间修改为预期的同步频率，后续核对日志校验定时备份任务执行情况。</p>
<div class="language-Shell highlight"><span class="filename">crontab -e : 每隔 2h，执行同步脚本</span><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="m">0</span><span class="w"> </span><span class="m">7</span>-23/2<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>/usr/local/etc/scripts/rclone-sync.sh
</span></code></pre></div>
<p>需执行 <code>sudo chmod +x /usr/local/etc/scripts/rclone-sync.sh</code> 赋予其他用户对该脚本的可执行权限。</p>
<p>备份脚本 <code>rclone-sync.sh</code> 使用 date 或 stat 命令检查文件最后修改时间。</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:3"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><input id="__tabbed_3_3" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">date -r</label><label for="__tabbed_3_2">macOS: stat -f</label><label for="__tabbed_3_3">ubuntu: stat -c</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a>$<span class="w"> </span>date<span class="w"> </span>-r<span class="w"> </span>test.txt
</span><span id="__span-64-2"><a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a>Sat<span class="w"> </span>Mar<span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">16</span>:53:38<span class="w"> </span>CST<span class="w"> </span><span class="m">2024</span>
</span><span id="__span-64-3"><a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a>
</span><span id="__span-64-4"><a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a>$<span class="w"> </span>date<span class="w"> </span>-r<span class="w"> </span>test.txt<span class="w"> </span>+%s
</span><span id="__span-64-5"><a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a><span class="m">1710579218</span>
</span><span id="__span-64-6"><a id="__codelineno-64-6" name="__codelineno-64-6" href="#__codelineno-64-6"></a>
</span><span id="__span-64-7"><a id="__codelineno-64-7" name="__codelineno-64-7" href="#__codelineno-64-7"></a>$<span class="w"> </span>date<span class="w"> </span>-r<span class="w"> </span>test.txt<span class="w"> </span>+%Y%m%d%H%M%S
</span><span id="__span-64-8"><a id="__codelineno-64-8" name="__codelineno-64-8" href="#__codelineno-64-8"></a><span class="m">20240316165338</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<blockquote>
<p><code>-f format</code>: Display information using the specified format.  See the Formats section for a description of valid formats.</p>
</blockquote>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="c1"># To display a file&#39;s modification time:</span>
</span><span id="__span-65-2"><a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a>$<span class="w"> </span>stat<span class="w"> </span>-f<span class="w"> </span>%m<span class="w"> </span>test.txt
</span><span id="__span-65-3"><a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a><span class="m">1710579218</span>
</span><span id="__span-65-4"><a id="__codelineno-65-4" name="__codelineno-65-4" href="#__codelineno-65-4"></a>
</span><span id="__span-65-5"><a id="__codelineno-65-5" name="__codelineno-65-5" href="#__codelineno-65-5"></a><span class="c1"># To display the same modification time in a readable format</span>
</span><span id="__span-65-6"><a id="__codelineno-65-6" name="__codelineno-65-6" href="#__codelineno-65-6"></a>$<span class="w"> </span>stat<span class="w"> </span>-f<span class="w"> </span>%Sm<span class="w"> </span>test.txt
</span><span id="__span-65-7"><a id="__codelineno-65-7" name="__codelineno-65-7" href="#__codelineno-65-7"></a>Mar<span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">16</span>:53:38<span class="w"> </span><span class="m">2024</span>
</span><span id="__span-65-8"><a id="__codelineno-65-8" name="__codelineno-65-8" href="#__codelineno-65-8"></a>
</span><span id="__span-65-9"><a id="__codelineno-65-9" name="__codelineno-65-9" href="#__codelineno-65-9"></a><span class="c1"># To display the same modification time in a readable and sortable format</span>
</span><span id="__span-65-10"><a id="__codelineno-65-10" name="__codelineno-65-10" href="#__codelineno-65-10"></a>$<span class="w"> </span>stat<span class="w"> </span>-f<span class="w"> </span>%Sm<span class="w"> </span>-t<span class="w"> </span>%Y%m%d%H%M%S<span class="w"> </span>test.txt
</span><span id="__span-65-11"><a id="__codelineno-65-11" name="__codelineno-65-11" href="#__codelineno-65-11"></a><span class="m">20240316165338</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<blockquote>
<p><code>-c</code> / --format=FORMAT: use the specified FORMAT instead of the default; output a newline after each use of FORMAT</p>
</blockquote>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a>$<span class="w"> </span>stat<span class="w"> </span>-c<span class="w"> </span>%Y<span class="w"> </span>test.txt
</span><span id="__span-66-2"><a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a><span class="m">1710579219</span>
</span><span id="__span-66-3"><a id="__codelineno-66-3" name="__codelineno-66-3" href="#__codelineno-66-3"></a>
</span><span id="__span-66-4"><a id="__codelineno-66-4" name="__codelineno-66-4" href="#__codelineno-66-4"></a>$<span class="w"> </span>stat<span class="w"> </span>-c<span class="w"> </span>%y<span class="w"> </span>test.txt
</span><span id="__span-66-5"><a id="__codelineno-66-5" name="__codelineno-66-5" href="#__codelineno-66-5"></a><span class="m">2024</span>-03-16<span class="w"> </span><span class="m">16</span>:53:39.000000000<span class="w"> </span>+0800
</span><span id="__span-66-6"><a id="__codelineno-66-6" name="__codelineno-66-6" href="#__codelineno-66-6"></a>
</span><span id="__span-66-7"><a id="__codelineno-66-7" name="__codelineno-66-7" href="#__codelineno-66-7"></a>$<span class="w"> </span>date<span class="w"> </span>-d<span class="w"> </span><span class="s2">&quot;@</span><span class="k">$(</span>stat<span class="w"> </span>-c<span class="w"> </span>%Y<span class="w"> </span>test.txt<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="s1">&#39;+%Y%m%d%H%M%S&#39;</span>
</span><span id="__span-66-8"><a id="__codelineno-66-8" name="__codelineno-66-8" href="#__codelineno-66-8"></a><span class="m">20240316165339</span>
</span></code></pre></div>
</div>
</div>
</div>
<p>如果在 2h 定时周期内无改动则 dry-run，有改动才备份；备份成功后，老化删除一天之前的旧备份。</p>
<div class="admonition note">
<p class="admonition-title">Why not use filtering flag --max-age ?</p>
<p>如果执行 sync 或 copy 同步目录，可使用 rclone 提供的 <code>--max-age 2h</code> 选项。<br />
这里执行 copyto 命令备份特定文件，不适用 <code>--max-age</code> 选项，故自行等效实现。</p>
</div>
<details class="info">
<summary>rclone-sync.sh</summary>
<div class="language-Shell highlight"><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-67-2"><a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a>
</span><span id="__span-67-3"><a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a><span class="nv">logfile</span><span class="o">=</span><span class="s2">&quot;/Users/faner/.config/rclone/rclone-</span><span class="k">$(</span>date<span class="w"> </span>+%Y%m<span class="k">)</span><span class="s2">.log&quot;</span>
</span><span id="__span-67-4"><a id="__codelineno-67-4" name="__codelineno-67-4" href="#__codelineno-67-4"></a><span class="nv">filename</span><span class="o">=</span><span class="s2">&quot;恋词考研英语-全真题源报刊7000词-索引红版&quot;</span>
</span><span id="__span-67-5"><a id="__codelineno-67-5" name="__codelineno-67-5" href="#__codelineno-67-5"></a><span class="nv">srcfile</span><span class="o">=</span><span class="s2">&quot;/Users/faner/Documents/English/LINKIN-WORDS-7000/</span><span class="nv">$filename</span><span class="s2">.pdf&quot;</span>
</span><span id="__span-67-6"><a id="__codelineno-67-6" name="__codelineno-67-6" href="#__codelineno-67-6"></a><span class="nv">dstpath</span><span class="o">=</span><span class="s2">&quot;smbhd@rpi4b:WDHD/backups/English&quot;</span>
</span><span id="__span-67-7"><a id="__codelineno-67-7" name="__codelineno-67-7" href="#__codelineno-67-7"></a><span class="nv">dstfile</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$dstpath</span><span class="s2">/</span><span class="nv">$filename</span><span class="s2">-</span><span class="k">$(</span>date<span class="w"> </span>+%Y%m%d%H<span class="k">)</span><span class="s2">.pdf&quot;</span>
</span><span id="__span-67-8"><a id="__codelineno-67-8" name="__codelineno-67-8" href="#__codelineno-67-8"></a>
</span><span id="__span-67-9"><a id="__codelineno-67-9" name="__codelineno-67-9" href="#__codelineno-67-9"></a><span class="nv">curdate</span><span class="o">=</span><span class="k">$(</span>date<span class="w"> </span>+%Y/%m/%d<span class="se">\ </span>%H:%M:%S<span class="k">)</span>
</span><span id="__span-67-10"><a id="__codelineno-67-10" name="__codelineno-67-10" href="#__codelineno-67-10"></a><span class="nv">curdate_sec</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>date<span class="w"> </span>+%s<span class="k">)</span><span class="s2">&quot;</span>
</span><span id="__span-67-11"><a id="__codelineno-67-11" name="__codelineno-67-11" href="#__codelineno-67-11"></a>
</span><span id="__span-67-12"><a id="__codelineno-67-12" name="__codelineno-67-12" href="#__codelineno-67-12"></a><span class="nv">filedate</span><span class="o">=</span><span class="k">$(</span>date<span class="w"> </span>-r<span class="w"> </span><span class="nv">$srcfile</span><span class="w"> </span>+%Y/%m/%d<span class="se">\ </span>%H:%M:%S<span class="k">)</span>
</span><span id="__span-67-13"><a id="__codelineno-67-13" name="__codelineno-67-13" href="#__codelineno-67-13"></a><span class="nv">filedate_sec</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>date<span class="w"> </span>-r<span class="w"> </span><span class="nv">$srcfile</span><span class="w"> </span>+%s<span class="k">)</span><span class="s2">&quot;</span>
</span><span id="__span-67-14"><a id="__codelineno-67-14" name="__codelineno-67-14" href="#__codelineno-67-14"></a>
</span><span id="__span-67-15"><a id="__codelineno-67-15" name="__codelineno-67-15" href="#__codelineno-67-15"></a><span class="nv">passed_sec</span><span class="o">=</span><span class="m">0</span>
</span><span id="__span-67-16"><a id="__codelineno-67-16" name="__codelineno-67-16" href="#__codelineno-67-16"></a><span class="nv">elapsed_sec</span><span class="o">=</span><span class="m">0</span>
</span><span id="__span-67-17"><a id="__codelineno-67-17" name="__codelineno-67-17" href="#__codelineno-67-17"></a><span class="nv">elapsed_min</span><span class="o">=</span><span class="m">0</span>
</span><span id="__span-67-18"><a id="__codelineno-67-18" name="__codelineno-67-18" href="#__codelineno-67-18"></a><span class="nv">elapsed_hour</span><span class="o">=</span><span class="m">0</span>
</span><span id="__span-67-19"><a id="__codelineno-67-19" name="__codelineno-67-19" href="#__codelineno-67-19"></a><span class="nv">elapsed_day</span><span class="o">=</span><span class="m">0</span>
</span><span id="__span-67-20"><a id="__codelineno-67-20" name="__codelineno-67-20" href="#__codelineno-67-20"></a>
</span><span id="__span-67-21"><a id="__codelineno-67-21" name="__codelineno-67-21" href="#__codelineno-67-21"></a><span class="nv">passed_sec</span><span class="o">=</span><span class="k">$((</span><span class="nv">curdate_sec</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">filedate_sec</span><span class="k">))</span>
</span><span id="__span-67-22"><a id="__codelineno-67-22" name="__codelineno-67-22" href="#__codelineno-67-22"></a><span class="nv">elapsed_sec</span><span class="o">=</span><span class="nv">$passed_sec</span>
</span><span id="__span-67-23"><a id="__codelineno-67-23" name="__codelineno-67-23" href="#__codelineno-67-23"></a><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$elapsed_sec</span><span class="w"> </span>-ge<span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-67-24"><a id="__codelineno-67-24" name="__codelineno-67-24" href="#__codelineno-67-24"></a><span class="w">  </span><span class="nv">elapsed_min</span><span class="o">=</span><span class="k">$((</span><span class="nv">elapsed_sec</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">60</span><span class="k">))</span>
</span><span id="__span-67-25"><a id="__codelineno-67-25" name="__codelineno-67-25" href="#__codelineno-67-25"></a><span class="w">  </span><span class="nv">elapsed_sec</span><span class="o">=</span><span class="k">$((</span><span class="nv">elapsed_sec</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">60</span><span class="k">))</span>
</span><span id="__span-67-26"><a id="__codelineno-67-26" name="__codelineno-67-26" href="#__codelineno-67-26"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$elapsed_min</span><span class="w"> </span>-ge<span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-67-27"><a id="__codelineno-67-27" name="__codelineno-67-27" href="#__codelineno-67-27"></a><span class="w">    </span><span class="nv">elapsed_hour</span><span class="o">=</span><span class="k">$((</span><span class="nv">elapsed_min</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">60</span><span class="k">))</span>
</span><span id="__span-67-28"><a id="__codelineno-67-28" name="__codelineno-67-28" href="#__codelineno-67-28"></a><span class="w">    </span><span class="nv">elapsed_min</span><span class="o">=</span><span class="k">$((</span><span class="nv">elapsed_min</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">60</span><span class="k">))</span>
</span><span id="__span-67-29"><a id="__codelineno-67-29" name="__codelineno-67-29" href="#__codelineno-67-29"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$elapsed_hour</span><span class="w"> </span>-ge<span class="w"> </span><span class="m">24</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-67-30"><a id="__codelineno-67-30" name="__codelineno-67-30" href="#__codelineno-67-30"></a><span class="w">      </span><span class="nv">elapsed_day</span><span class="o">=</span><span class="k">$((</span><span class="nv">elapsed_hour</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">24</span><span class="k">))</span>
</span><span id="__span-67-31"><a id="__codelineno-67-31" name="__codelineno-67-31" href="#__codelineno-67-31"></a><span class="w">      </span><span class="nv">elapsed_hour</span><span class="o">=</span><span class="k">$((</span><span class="nv">elapsed_hour</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">24</span><span class="k">))</span>
</span><span id="__span-67-32"><a id="__codelineno-67-32" name="__codelineno-67-32" href="#__codelineno-67-32"></a><span class="w">    </span><span class="k">fi</span>
</span><span id="__span-67-33"><a id="__codelineno-67-33" name="__codelineno-67-33" href="#__codelineno-67-33"></a><span class="w">  </span><span class="k">fi</span>
</span><span id="__span-67-34"><a id="__codelineno-67-34" name="__codelineno-67-34" href="#__codelineno-67-34"></a><span class="k">fi</span>
</span><span id="__span-67-35"><a id="__codelineno-67-35" name="__codelineno-67-35" href="#__codelineno-67-35"></a>
</span><span id="__span-67-36"><a id="__codelineno-67-36" name="__codelineno-67-36" href="#__codelineno-67-36"></a><span class="nv">elapsed_time</span><span class="o">=</span><span class="k">$(</span><span class="nb">printf</span><span class="w"> </span><span class="s1">&#39;%sd-%sh-%sm&#39;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$elapsed_day</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$elapsed_hour</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$elapsed_min</span><span class="s2">&quot;</span><span class="k">)</span>
</span><span id="__span-67-37"><a id="__codelineno-67-37" name="__codelineno-67-37" href="#__codelineno-67-37"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$curdate</span><span class="s2"> DEBUG : </span><span class="nv">$filename</span><span class="s2">.pdf, modification: </span><span class="nv">$filedate</span><span class="s2">, </span><span class="nv">$elapsed_time</span><span class="s2"> ago.&quot;</span><span class="w"> </span>&gt;&gt;<span class="s2">&quot;</span><span class="nv">$logfile</span><span class="s2">&quot;</span>
</span><span id="__span-67-38"><a id="__codelineno-67-38" name="__codelineno-67-38" href="#__codelineno-67-38"></a>
</span><span id="__span-67-39"><a id="__codelineno-67-39" name="__codelineno-67-39" href="#__codelineno-67-39"></a><span class="nv">checkpoint</span><span class="o">=</span><span class="k">$((</span><span class="nv">passed_sec</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="k">))</span><span class="w"> </span><span class="c1"># rewind for a second</span>
</span><span id="__span-67-40"><a id="__codelineno-67-40" name="__codelineno-67-40" href="#__codelineno-67-40"></a><span class="nv">backupcount</span><span class="o">=</span><span class="k">$(</span>rclone<span class="w"> </span>lsf<span class="w"> </span>--max-age<span class="o">=</span><span class="nv">$checkpoint</span><span class="w"> </span><span class="nv">$dstpath</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l<span class="k">)</span>
</span><span id="__span-67-41"><a id="__codelineno-67-41" name="__codelineno-67-41" href="#__codelineno-67-41"></a>
</span><span id="__span-67-42"><a id="__codelineno-67-42" name="__codelineno-67-42" href="#__codelineno-67-42"></a><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$backupcount</span><span class="s2">&quot;</span><span class="w"> </span>-eq<span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="c1"># modified since last backup, execute backup</span>
</span><span id="__span-67-43"><a id="__codelineno-67-43" name="__codelineno-67-43" href="#__codelineno-67-43"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span>/usr/local/bin/rclone<span class="w"> </span>copyto<span class="w"> </span>-v<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$srcfile</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$dstfile</span><span class="s2">&quot;</span><span class="w"> </span>--log-file<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$logfile</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-67-44"><a id="__codelineno-67-44" name="__codelineno-67-44" href="#__codelineno-67-44"></a><span class="w">    </span>/usr/local/bin/rclone<span class="w"> </span>delete<span class="w"> </span>-v<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$dstpath</span><span class="s2">&quot;</span><span class="w"> </span>--min-age<span class="w"> </span>24h<span class="w"> </span>--log-file<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$logfile</span><span class="s2">&quot;</span>
</span><span id="__span-67-45"><a id="__codelineno-67-45" name="__codelineno-67-45" href="#__codelineno-67-45"></a><span class="w">  </span><span class="k">else</span>
</span><span id="__span-67-46"><a id="__codelineno-67-46" name="__codelineno-67-46" href="#__codelineno-67-46"></a><span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;backup failed, keep old backups.\n&quot;</span><span class="w"> </span>&gt;&gt;<span class="s2">&quot;</span><span class="nv">$logfile</span><span class="s2">&quot;</span>
</span><span id="__span-67-47"><a id="__codelineno-67-47" name="__codelineno-67-47" href="#__codelineno-67-47"></a><span class="w">  </span><span class="k">fi</span>
</span><span id="__span-67-48"><a id="__codelineno-67-48" name="__codelineno-67-48" href="#__codelineno-67-48"></a><span class="k">else</span><span class="w"> </span><span class="c1"># remain unchanged since last backup</span>
</span><span id="__span-67-49"><a id="__codelineno-67-49" name="__codelineno-67-49" href="#__codelineno-67-49"></a><span class="w">  </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;remain unchanged, keep old backup: </span><span class="k">$(</span>rclone<span class="w"> </span>lsf<span class="w"> </span>--max-age<span class="o">=</span><span class="nv">$checkpoint</span><span class="w"> </span><span class="nv">$dstpath</span><span class="k">)</span><span class="s2">\n&quot;</span><span class="w"> </span>&gt;&gt;<span class="s2">&quot;</span><span class="nv">$logfile</span><span class="s2">&quot;</span>
</span><span id="__span-67-50"><a id="__codelineno-67-50" name="__codelineno-67-50" href="#__codelineno-67-50"></a><span class="k">fi</span>
</span></code></pre></div>
</details>
<h3 id="check_logs">check logs<a class="headerlink" href="#check_logs" title="Permanent link">#</a></h3>
<p>每天检查日志文件，确认系统 cron 定时任务和 rclone sysnc 同步任务执行情况。</p>
<p>系统日志 /var/log/syslog 中，应该有类似的条目：</p>
<div class="language-dmesg highlight"><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a><span class="err">$ grep -a CRON /var/log/syslog</span>
</span><span id="__span-68-2"><a id="__codelineno-68-2" name="__codelineno-68-2" href="#__codelineno-68-2"></a><span class="err">Apr  7 02:30:00 rpi4b-ubuntu CRON[62328]: (pifan) CMD (rclone sync -v webdav-rpi4b: /media/WDHD/webdav@rpi4b --log-file=/home/pifan/.config/rclone/rclone.log)</span>
</span></code></pre></div>
<p>也可以开启 cron 独立日志，后续直接查看 /var/log/cron.log。</p>
<div class="admonition note">
<p class="admonition-title">Use Independent Crontab Logs</p>
<ol>
<li><code>sudo vim /etc/rsyslog.d/50-default.conf</code></li>
<li>uncomment the line starting with the <code>cron.*</code></li>
<li><code>sudo systemctl restart rsyslog</code></li>
</ol>
</div>
<hr />
<p>macOS 的系统日志 /var/log/system.log 中没有搜到任何 cron 相关的运行日志。</p>
<p>参考 <a href="https://stackoverflow.com/questions/5475800/mac-os-x-cron-log-tracking">macos - Mac OS X cron log / tracking</a>，执行 <code>log show --process cron</code> 可以看到 crontab/cron 的 Activity 活动日志。</p>
<div class="admonition note">
<p class="admonition-title">cron -x debugflag</p>
<p><a href="https://superuser.com/questions/134864/log-of-cron-actions-on-os-x">macos - Log of cron actions on OS X</a> 中提到，参考 man cron 中的 <code>-x debugflag</code>，可修改 com.vix.cron.plist，为 ProgramArguments 添加 <code>-x</code> 调试选项，并配置 StandardErrorPath 为 /var/log/cron.log。尚未具体实践验证。</p>
</div>
<hr />
<p>确认 cron 定时任务执行后，再检查配置目录 ~/.config/rclone/ 下当天/月的运行日志 rclone-<code>date</code>.log，查看同步情况。</p>
<h2 id="refs">refs<a class="headerlink" href="#refs" title="Permanent link">#</a></h2>
<p><a href="https://www.cnblogs.com/varden/p/17181717.html">Rclone云存储数据同步工具</a><br />
<a href="https://cloud.tencent.com/developer/article/2192254">备份同步神器 Rclone 使用教程</a><br />
<a href="https://blog.csdn.net/neowell/article/details/134009677">rclone 选项参数 --min-age/--max-age 的理解</a></p>
<p><a href="https://juejin.cn/post/7131650853307416589">使用 RClone 实现 Unraid 的异地容灾</a><br />
<a href="https://wzfou.com/vps-one-backup/">一个命令让Linux定时打包备份指定目录文件夹并同步备份到各大网盘</a></p>
<p><a href="https://medium.com/@justin_ng/how-to-run-your-script-on-a-schedule-using-crontab-on-macos-a-step-by-step-guide-a7ba539acf76">schedule using crontab on macOS: A step-by-step guide</a><br />
<a href="https://chethansp.medium.com/schedule-job-with-crontab-on-macos-d47a1fda47e5">Schedule job with crontab on macOS</a></p>
<p><a href="https://blog.humh.cn/?p=947">记录一次macOS上crontab未成功执行问题的排查过程！</a><br />
<a href="https://zhuanlan.zhihu.com/p/564215492">macOS 电脑—设置 crontab</a></p>







  
  



  


  



  <h2 id="__comments">评论</h2>
  <!-- Insert generated snippet here -->
  <script src="https://giscus.app/client.js"
    data-repo="fan2/mkdocs"
    data-repo-id="R_kgDOLltxSg"
    data-category="Announcements"
    data-category-id="DIC_kwDOLltxSs4CeURH"
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="1"
    data-input-position="top"
    data-theme="preferred_color_scheme"
    data-lang="zh-CN"
    data-loading="lazy"
    crossorigin="anonymous"
    async>
  </script>

  <!-- Synchronize Giscus theme with palette -->
  <script>
    var giscus = document.querySelector("script[src*=giscus]")

    // Set palette on initial load
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate"
        ? "transparent_dark"
        : "light"

      // Instruct Giscus to set theme
      giscus.setAttribute("data-theme", theme) 
    }

    // Register event handlers after documented loaded
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate"
            ? "transparent_dark"
            : "light"

          // Instruct Giscus to change theme
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>

      
    </article>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
        
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../ubuntu-install-nginx-full-config-webdav/" class="md-footer__link md-footer__link--prev" aria-label="上一页: rpi4b-ubuntu安装nginx-extras并配置WebDav">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                rpi4b-ubuntu安装nginx-extras并配置WebDav
              </div>
            </div>
          </a>
        
        
          
          <a href="../nginx-control/" class="md-footer__link md-footer__link--next" aria-label="下一页: nginx查看日志及控制命令">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                nginx查看日志及控制命令
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024- Cliff Fan
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["toc.follow", "header.autohide", "navigation.tabs", "navigation.top", "navigation.footer", "navigation.tracking", "content.code.copy", "content.code.select", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.bd41221c.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://vercount.one/js"></script>
      
    
  </body>
</html>